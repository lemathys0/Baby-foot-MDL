import{r as u,j as e,e as yn}from"./vendor-react-BxsbldMV.js";import{V as qr,R as Ur,A as Vr,C as Zr,T as Gr,D as Wr,P as bn,a as Hr,b as vn,S as jn,L as Qr,c as Jr,d as Yr,e as Nn,f as Kr,I as wn,O as Xr,g as Cn,h as ea,i as _n,j as ta,k as sa,l as kn,m as Sn,n as ra,o as En,p as aa,q as na,r as Rn,s as ia,t as oa,u as $n,v as la,w as An,x as ca,y as da,z as Tn,B as Mn,E as ua,F as On,G as Pn}from"./vendor-radix-DLEjPDrE.js";import{c as ma,X as ze,$ as Dn,L as ce,H as In,T as Fe,U as Ae,a as xa,b as ha,Z as Gt,d as Ze,G as Ln,S as pa,C as xs,P as fa,e as St,f as zn,g as Fn,h as Ke,F as As,i as ft,j as Bn,k as qn,l as Et,m as it,n as ga,o as Rt,A as $t,p as gt,I as ts,q as Un,r as Vn,R as Zn,s as Gn,t as Wn,u as Hn,Y as Qn,v as Jn,w as Yn,E as Kn,x as Xn,y as yt,B as nr,z as ir,D as kt,J as qt,K as ss,M as ya,N as ot,O as hs,Q as Tt,V as ba,W as or,_ as is,a0 as va,a1 as ei,a2 as ti,a3 as si,a4 as ja,a5 as ri,a6 as lr,a7 as ai,a8 as ni,a9 as ii,aa as Yt,ab as oi,ac as cr,ad as li,ae as ci}from"./vendor-ui-C0C1mm7i.js";import{u as qs,N as di,a as ui,L as Kt,b as jt,c as mi,B as xi,R as hi,d as Le}from"./vendor-router-o6rgvikh.js";import{i as pi,g as os,c as fi,o as gi,s as ys,d as Na,u as yi,e as ut,r as E,f as bi,h as G,j as bt,k as fe,l as rs,m as vi,p as Us,n as ji,q as Ni}from"./vendor-firebase-B6EPLZUD.js";import{m as L,A as He}from"./vendor-framer-IsYYbCxk.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();const wi=1,Ci=1e6;let bs=0;function _i(){return bs=(bs+1)%Number.MAX_SAFE_INTEGER,bs.toString()}const vs=new Map,dr=s=>{if(vs.has(s))return;const t=setTimeout(()=>{vs.delete(s),Vt({type:"REMOVE_TOAST",toastId:s})},Ci);vs.set(s,t)},ki=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,wi)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?dr(r):s.toasts.forEach(a=>{dr(a.id)}),{...s,toasts:s.toasts.map(a=>a.id===r||r===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(r=>r.id!==t.toastId)}}},as=[];let ns={toasts:[]};function Vt(s){ns=ki(ns,s),as.forEach(t=>{t(ns)})}function w({...s}){const t=_i(),r=n=>Vt({type:"UPDATE_TOAST",toast:{...n,id:t}}),a=()=>Vt({type:"DISMISS_TOAST",toastId:t});return Vt({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:n=>{n||a()}}}),{id:t,dismiss:a,update:r}}function Si(){const[s,t]=u.useState(ns);return u.useEffect(()=>(as.push(t),()=>{const r=as.indexOf(t);r>-1&&as.splice(r,1)}),[s]),{...s,toast:w,dismiss:r=>Vt({type:"DISMISS_TOAST",toastId:r})}}const ur=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,mr=ma,ps=(s,t)=>r=>{var a;if((t==null?void 0:t.variants)==null)return mr(s,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:n,defaultVariants:i}=t,o=Object.keys(n).map(c=>{const m=r==null?void 0:r[c],y=i==null?void 0:i[c];if(m===null)return null;const h=ur(m)||ur(y);return n[c][h]}),l=r&&Object.entries(r).reduce((c,m)=>{let[y,h]=m;return h===void 0||(c[y]=h),c},{}),d=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((c,m)=>{let{class:y,className:h,...b}=m;return Object.entries(b).every(p=>{let[x,j]=p;return Array.isArray(j)?j.includes({...i,...l}[x]):{...i,...l}[x]===j})?[...c,y,h]:c},[]);return mr(s,o,d,r==null?void 0:r.class,r==null?void 0:r.className)},Vs="-",Ei=s=>{const t=$i(s),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=s;return{getClassGroupId:o=>{const l=o.split(Vs);return l[0]===""&&l.length!==1&&l.shift(),wa(l,t)||Ri(o)},getConflictingClassGroupIds:(o,l)=>{const d=r[o]||[];return l&&a[o]?[...d,...a[o]]:d}}},wa=(s,t)=>{var o;if(s.length===0)return t.classGroupId;const r=s[0],a=t.nextPart.get(r),n=a?wa(s.slice(1),a):void 0;if(n)return n;if(t.validators.length===0)return;const i=s.join(Vs);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},xr=/^\[(.+)\]$/,Ri=s=>{if(xr.test(s)){const t=xr.exec(s)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},$i=s=>{const{theme:t,prefix:r}=s,a={nextPart:new Map,validators:[]};return Ti(Object.entries(s.classGroups),r).forEach(([i,o])=>{Ts(o,a,i,t)}),a},Ts=(s,t,r,a)=>{s.forEach(n=>{if(typeof n=="string"){const i=n===""?t:hr(t,n);i.classGroupId=r;return}if(typeof n=="function"){if(Ai(n)){Ts(n(a),t,r,a);return}t.validators.push({validator:n,classGroupId:r});return}Object.entries(n).forEach(([i,o])=>{Ts(o,hr(t,i),r,a)})})},hr=(s,t)=>{let r=s;return t.split(Vs).forEach(a=>{r.nextPart.has(a)||r.nextPart.set(a,{nextPart:new Map,validators:[]}),r=r.nextPart.get(a)}),r},Ai=s=>s.isThemeGetter,Ti=(s,t)=>t?s.map(([r,a])=>{const n=a.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,n]}):s,Mi=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,a=new Map;const n=(i,o)=>{r.set(i,o),t++,t>s&&(t=0,a=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=a.get(i))!==void 0)return n(i,o),o},set(i,o){r.has(i)?r.set(i,o):n(i,o)}}},Ca="!",Oi=s=>{const{separator:t,experimentalParseClassName:r}=s,a=t.length===1,n=t[0],i=t.length,o=l=>{const d=[];let c=0,m=0,y;for(let j=0;j<l.length;j++){let v=l[j];if(c===0){if(v===n&&(a||l.slice(j,j+i)===t)){d.push(l.slice(m,j)),m=j+i;continue}if(v==="/"){y=j;continue}}v==="["?c++:v==="]"&&c--}const h=d.length===0?l:l.substring(m),b=h.startsWith(Ca),p=b?h.substring(1):h,x=y&&y>m?y-m:void 0;return{modifiers:d,hasImportantModifier:b,baseClassName:p,maybePostfixModifierPosition:x}};return r?l=>r({className:l,parseClassName:o}):o},Pi=s=>{if(s.length<=1)return s;const t=[];let r=[];return s.forEach(a=>{a[0]==="["?(t.push(...r.sort(),a),r=[]):r.push(a)}),t.push(...r.sort()),t},Di=s=>({cache:Mi(s.cacheSize),parseClassName:Oi(s),...Ei(s)}),Ii=/\s+/,Li=(s,t)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:n}=t,i=[],o=s.trim().split(Ii);let l="";for(let d=o.length-1;d>=0;d-=1){const c=o[d],{modifiers:m,hasImportantModifier:y,baseClassName:h,maybePostfixModifierPosition:b}=r(c);let p=!!b,x=a(p?h.substring(0,b):h);if(!x){if(!p){l=c+(l.length>0?" "+l:l);continue}if(x=a(h),!x){l=c+(l.length>0?" "+l:l);continue}p=!1}const j=Pi(m).join(":"),v=y?j+Ca:j,M=v+x;if(i.includes(M))continue;i.push(M);const U=n(x,p);for(let V=0;V<U.length;++V){const I=U[V];i.push(v+I)}l=c+(l.length>0?" "+l:l)}return l};function zi(){let s=0,t,r,a="";for(;s<arguments.length;)(t=arguments[s++])&&(r=_a(t))&&(a&&(a+=" "),a+=r);return a}const _a=s=>{if(typeof s=="string")return s;let t,r="";for(let a=0;a<s.length;a++)s[a]&&(t=_a(s[a]))&&(r&&(r+=" "),r+=t);return r};function Fi(s,...t){let r,a,n,i=o;function o(d){const c=t.reduce((m,y)=>y(m),s());return r=Di(c),a=r.cache.get,n=r.cache.set,i=l,l(d)}function l(d){const c=a(d);if(c)return c;const m=Li(d,r);return n(d,m),m}return function(){return i(zi.apply(null,arguments))}}const je=s=>{const t=r=>r[s]||[];return t.isThemeGetter=!0,t},ka=/^\[(?:([a-z-]+):)?(.+)\]$/i,Bi=/^\d+\/\d+$/,qi=new Set(["px","full","screen"]),Ui=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Vi=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Zi=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Gi=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Wi=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Je=s=>At(s)||qi.has(s)||Bi.test(s),tt=s=>It(s,"length",to),At=s=>!!s&&!Number.isNaN(Number(s)),js=s=>It(s,"number",At),Ft=s=>!!s&&Number.isInteger(Number(s)),Hi=s=>s.endsWith("%")&&At(s.slice(0,-1)),oe=s=>ka.test(s),st=s=>Ui.test(s),Qi=new Set(["length","size","percentage"]),Ji=s=>It(s,Qi,Sa),Yi=s=>It(s,"position",Sa),Ki=new Set(["image","url"]),Xi=s=>It(s,Ki,ro),eo=s=>It(s,"",so),Bt=()=>!0,It=(s,t,r)=>{const a=ka.exec(s);return a?a[1]?typeof t=="string"?a[1]===t:t.has(a[1]):r(a[2]):!1},to=s=>Vi.test(s)&&!Zi.test(s),Sa=()=>!1,so=s=>Gi.test(s),ro=s=>Wi.test(s),ao=()=>{const s=je("colors"),t=je("spacing"),r=je("blur"),a=je("brightness"),n=je("borderColor"),i=je("borderRadius"),o=je("borderSpacing"),l=je("borderWidth"),d=je("contrast"),c=je("grayscale"),m=je("hueRotate"),y=je("invert"),h=je("gap"),b=je("gradientColorStops"),p=je("gradientColorStopPositions"),x=je("inset"),j=je("margin"),v=je("opacity"),M=je("padding"),U=je("saturate"),V=je("scale"),I=je("sepia"),H=je("skew"),k=je("space"),F=je("translate"),J=()=>["auto","contain","none"],f=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",oe,t],T=()=>[oe,t],Z=()=>["",Je,tt],le=()=>["auto",At,oe],ve=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],me=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],te=()=>["start","end","center","between","around","evenly","stretch"],se=()=>["","0",oe],ue=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>[At,oe];return{cacheSize:500,separator:":",theme:{colors:[Bt],spacing:[Je,tt],blur:["none","",st,oe],brightness:$(),borderColor:[s],borderRadius:["none","","full",st,oe],borderSpacing:T(),borderWidth:Z(),contrast:$(),grayscale:se(),hueRotate:$(),invert:se(),gap:T(),gradientColorStops:[s],gradientColorStopPositions:[Hi,tt],inset:D(),margin:D(),opacity:$(),padding:T(),saturate:$(),scale:$(),sepia:se(),skew:$(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",oe]}],container:["container"],columns:[{columns:[st]}],"break-after":[{"break-after":ue()}],"break-before":[{"break-before":ue()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ve(),oe]}],overflow:[{overflow:f()}],"overflow-x":[{"overflow-x":f()}],"overflow-y":[{"overflow-y":f()}],overscroll:[{overscroll:J()}],"overscroll-x":[{"overscroll-x":J()}],"overscroll-y":[{"overscroll-y":J()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ft,oe]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",oe]}],grow:[{grow:se()}],shrink:[{shrink:se()}],order:[{order:["first","last","none",Ft,oe]}],"grid-cols":[{"grid-cols":[Bt]}],"col-start-end":[{col:["auto",{span:["full",Ft,oe]},oe]}],"col-start":[{"col-start":le()}],"col-end":[{"col-end":le()}],"grid-rows":[{"grid-rows":[Bt]}],"row-start-end":[{row:["auto",{span:[Ft,oe]},oe]}],"row-start":[{"row-start":le()}],"row-end":[{"row-end":le()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",oe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",oe]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...te()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...te(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...te(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[M]}],px:[{px:[M]}],py:[{py:[M]}],ps:[{ps:[M]}],pe:[{pe:[M]}],pt:[{pt:[M]}],pr:[{pr:[M]}],pb:[{pb:[M]}],pl:[{pl:[M]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",oe,t]}],"min-w":[{"min-w":[oe,t,"min","max","fit"]}],"max-w":[{"max-w":[oe,t,"none","full","min","max","fit","prose",{screen:[st]},st]}],h:[{h:[oe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[oe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[oe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[oe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",st,tt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",js]}],"font-family":[{font:[Bt]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",oe]}],"line-clamp":[{"line-clamp":["none",At,js]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Je,oe]}],"list-image":[{"list-image":["none",oe]}],"list-style-type":[{list:["none","disc","decimal",oe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...me(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Je,tt]}],"underline-offset":[{"underline-offset":["auto",Je,oe]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ve(),Yi]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ji]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Xi]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...me(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:me()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...me()]}],"outline-offset":[{"outline-offset":[Je,oe]}],"outline-w":[{outline:[Je,tt]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:Z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Je,tt]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",st,eo]}],"shadow-color":[{shadow:[Bt]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[a]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",st,oe]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[y]}],saturate:[{saturate:[U]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[y]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[U]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",oe]}],duration:[{duration:$()}],ease:[{ease:["linear","in","out","in-out",oe]}],delay:[{delay:$()}],animate:[{animate:["none","spin","ping","pulse","bounce",oe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[V]}],"scale-x":[{"scale-x":[V]}],"scale-y":[{"scale-y":[V]}],rotate:[{rotate:[Ft,oe]}],"translate-x":[{"translate-x":[F]}],"translate-y":[{"translate-y":[F]}],"skew-x":[{"skew-x":[H]}],"skew-y":[{"skew-y":[H]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",oe]}],accent:[{accent:["auto",s]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",oe]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",oe]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[Je,tt,js]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},no=Fi(ao);function ie(...s){return no(ma(s))}const pr=[{threshold:0,rate:.1},{threshold:100,rate:.15},{threshold:1e3,rate:.19},{threshold:2e3,rate:.23}];function Ms(s){let t=pr[0].rate;for(const r of pr)if(s>=r.threshold)t=r.rate;else break;return t}const io=bn,Ea=u.forwardRef(({className:s,...t},r)=>e.jsx(qr,{ref:r,className:ie("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...t}));Ea.displayName=qr.displayName;const oo=ps("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ra=u.forwardRef(({className:s,variant:t,...r},a)=>e.jsx(Ur,{ref:a,className:ie(oo({variant:t}),s),...r}));Ra.displayName=Ur.displayName;const lo=u.forwardRef(({className:s,...t},r)=>e.jsx(Vr,{ref:r,className:ie("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",s),...t}));lo.displayName=Vr.displayName;const $a=u.forwardRef(({className:s,...t},r)=>e.jsx(Zr,{ref:r,className:ie("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:e.jsx(ze,{className:"h-4 w-4"})}));$a.displayName=Zr.displayName;const Aa=u.forwardRef(({className:s,...t},r)=>e.jsx(Gr,{ref:r,className:ie("text-sm font-semibold",s),...t}));Aa.displayName=Gr.displayName;const Ta=u.forwardRef(({className:s,...t},r)=>e.jsx(Wr,{ref:r,className:ie("text-sm opacity-90",s),...t}));Ta.displayName=Wr.displayName;function co(){const{toasts:s}=Si();return e.jsxs(io,{children:[s.map(function({id:t,title:r,description:a,action:n,...i}){return e.jsxs(Ra,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(Aa,{children:r}),a&&e.jsx(Ta,{children:a})]}),n,e.jsx($a,{})]},t)}),e.jsx(Ea,{})]})}var fr=["light","dark"],uo="(prefers-color-scheme: dark)",mo=u.createContext(void 0),xo={setTheme:s=>{},themes:[]},ho=()=>{var s;return(s=u.useContext(mo))!=null?s:xo};u.memo(({forcedTheme:s,storageKey:t,attribute:r,enableSystem:a,enableColorScheme:n,defaultTheme:i,value:o,attrs:l,nonce:d})=>{let c=i==="system",m=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(p=>`'${p}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,y=n?fr.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(p,x=!1,j=!0)=>{let v=o?o[p]:p,M=x?p+"|| ''":`'${v}'`,U="";return n&&j&&!x&&fr.includes(p)&&(U+=`d.style.colorScheme = '${p}';`),r==="class"?x||v?U+=`c.add(${M})`:U+="null":v&&(U+=`d[s](n,${M})`),U},b=s?`!function(){${m}${h(s)}}()`:a?`!function(){try{${m}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${c})){var t='${uo}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${c?"":"else{"+h(i,!1,!1)+"}"}${y}}catch(e){}}()`:`!function(){try{${m}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(i,!1,!1)};}${y}}catch(t){}}();`;return u.createElement("script",{nonce:d,dangerouslySetInnerHTML:{__html:b}})});const po=({...s})=>{const{theme:t="system"}=ho();return e.jsx(Dn,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})},fo=vn,go=u.forwardRef(({className:s,sideOffset:t=4,...r},a)=>e.jsx(Hr,{ref:a,sideOffset:t,className:ie("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r}));go.displayName=Hr.displayName;const yo={apiKey:"AIzaSyCbAU10zAKrvv9WJtapj1uBTQhKAlZrhXg",authDomain:"baby-footv2.firebaseapp.com",databaseURL:"https://baby-footv2-default-rtdb.firebaseio.com",projectId:"baby-footv2",storageBucket:"baby-footv2.firebasestorage.app",messagingSenderId:"630738367010",appId:"1:630738367010:web:8070effcead46645d7507b",measurementId:"G-PCFZ8HZ8C4"},Ma=pi(yo),Nt=os(Ma),R=fi(Ma),Oa=u.createContext(void 0);function qe(){const s=u.useContext(Oa);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s}function bo({children:s}){const[t,r]=u.useState(null),[a,n]=u.useState(null),[i,o]=u.useState(!0),l=async h=>{try{const b=E(R,`users/${h}`),p=await G(b);if(p.exists()){const x=p.val();if(x.banned===!0){await ys(Nt),w({title:"üö´ Compte banni",description:"Votre compte a √©t√© banni. Contactez un administrateur.",variant:"destructive"}),r(null),n(null);return}n(x)}}catch(b){console.error("Error fetching user profile:",b)}};u.useEffect(()=>{const h=gi(Nt,b=>{r(b),b?setTimeout(()=>{l(b.uid)},0):n(null),o(!1)});return()=>h()},[]);const y={user:t,userProfile:a,loading:i,login:async(h,b)=>{try{const x=(await bi(Nt,h,b)).user.uid,j=E(R,`users/${x}`),v=await G(j);return v.exists()&&v.val().banned===!0?(await ys(Nt),{error:"üö´ Ce compte a √©t√© banni. Contactez un administrateur pour plus d'informations."}):{error:null}}catch(p){let x="Une erreur est survenue lors de la connexion.";switch(p.code){case"auth/invalid-email":x="Adresse email invalide.";break;case"auth/user-disabled":x="Ce compte a √©t√© d√©sactiv√©.";break;case"auth/user-not-found":x="Aucun compte trouv√© avec cette adresse email.";break;case"auth/wrong-password":x="Mot de passe incorrect.";break;case"auth/invalid-credential":x="Email ou mot de passe incorrect.";break;case"auth/too-many-requests":x="Trop de tentatives. R√©essayez plus tard.";break}return{error:x}}},signup:async(h,b,p)=>{try{const j=(await Na(Nt,h,b)).user;await yi(j,{displayName:p});const v={username:p,eloRating:1e3,wins:0,losses:0,fortune:100,totalEarned:0,role:"player",banned:!1,createdAt:new Date().toISOString()};return await ut(E(R,`users/${j.uid}`),v),n(v),{error:null}}catch(x){let j="Une erreur est survenue lors de l'inscription.";switch(x.code){case"auth/email-already-in-use":j="Cette adresse email est d√©j√† utilis√©e.";break;case"auth/invalid-email":j="Adresse email invalide.";break;case"auth/operation-not-allowed":j="L'inscription par email n'est pas activ√©e.";break;case"auth/weak-password":j="Le mot de passe doit contenir au moins 6 caract√®res.";break}return{error:j}}},logout:async()=>{try{await ys(Nt),n(null)}catch(h){console.error("Error signing out:",h)}}};return e.jsx(Oa.Provider,{value:y,children:s})}const vo=u.createContext(void 0),gr={theme_purple:{primary:"270 100% 50%",secondary:"280 100% 50%",background:"270 20% 5%"},theme_green:{primary:"142 76% 36%",secondary:"142 76% 46%",background:"142 20% 5%"},theme_gold:{primary:"38 92% 50%",secondary:"45 93% 58%",background:"38 20% 5%"}};function jo({children:s}){const{user:t}=qe(),[r,a]=u.useState(""),[n,i]=u.useState(""),[o,l]=u.useState("");u.useEffect(()=>{if(!t)return;(async()=>{try{const m=E(R,`users/${t.uid}`),y=await G(m);if(y.exists()){const h=y.val(),b=h.equippedTheme||"",p=h.equippedBanner||"",x=h.equippedEffect||"";a(b),i(p),l(x),b&&gr[b]&&d(b)}}catch(m){console.error("Erreur chargement items √©quip√©s:",m)}})()},[t]);const d=c=>{const m=gr[c];m&&(document.documentElement.style.setProperty("--primary",m.primary),document.documentElement.style.setProperty("--secondary",m.secondary),document.documentElement.style.setProperty("--background",m.background),a(c))};return e.jsx(vo.Provider,{value:{currentTheme:r,currentBanner:n,currentEffect:o,applyTheme:d},children:s})}function We({children:s}){const{user:t,loading:r}=qe(),a=qs();return r?e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(ce,{className:"h-10 w-10 animate-spin text-primary"}),e.jsx("p",{className:"text-muted-foreground",children:"Chargement..."})]})}):t?e.jsx(e.Fragment,{children:s}):e.jsx(di,{to:"/auth",state:{from:a},replace:!0})}const No=[{to:"/",icon:In,label:"Accueil"},{to:"/leaderboard",icon:Fe,label:"Classement"},{to:"/match",icon:Ae,label:"Match"},{to:"/babydex",icon:xa,label:"BabyDex"},{to:"/profile",icon:ha,label:"Profil"}];function wo(){return e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 border-t border-border bg-card/95 backdrop-blur-lg",children:e.jsx("div",{className:"mx-auto flex h-16 max-w-lg items-center justify-around px-2",children:No.map(s=>e.jsx(ui,{to:s.to,className:({isActive:t})=>ie("relative flex flex-col items-center justify-center gap-1 px-3 py-2 text-xs font-medium transition-colors",t?"text-primary":"text-muted-foreground hover:text-foreground"),children:({isActive:t})=>e.jsxs(e.Fragment,{children:[t&&e.jsx(L.div,{layoutId:"activeTab",className:"absolute inset-0 rounded-lg bg-primary/10",initial:!1,transition:{type:"spring",stiffness:500,damping:30}}),e.jsx(s.icon,{className:ie("h-5 w-5 transition-all",t&&"text-glow-cyan")}),e.jsx("span",{className:"relative z-10",children:s.label})]})},s.to))})})}function Oe({children:s}){return e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx("main",{className:"container mx-auto px-4 py-6",children:s}),e.jsx(wo,{})]})}const O=u.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:ie("rounded-xl border border-border bg-card text-card-foreground shadow-lg backdrop-blur-sm transition-all duration-300 hover:border-primary/30",s),...t}));O.displayName="Card";const he=u.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:ie("flex flex-col space-y-1.5 p-6",s),...t}));he.displayName="CardHeader";const pe=u.forwardRef(({className:s,...t},r)=>e.jsx("h3",{ref:r,className:ie("text-xl font-semibold leading-none tracking-tight",s),...t}));pe.displayName="CardTitle";const Zs=u.forwardRef(({className:s,...t},r)=>e.jsx("p",{ref:r,className:ie("text-sm text-muted-foreground",s),...t}));Zs.displayName="CardDescription";const B=u.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:ie("p-6 pt-0",s),...t}));B.displayName="CardContent";const Co=u.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:ie("flex items-center p-6 pt-0",s),...t}));Co.displayName="CardFooter";const _o=ps("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-semibold transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-[0_0_20px_hsla(180,100%,50%,0.4)]",destructive:"bg-secondary text-secondary-foreground hover:bg-secondary/90 shadow-[0_0_20px_hsla(300,100%,50%,0.4)]",outline:"border border-border bg-transparent hover:bg-muted hover:border-primary hover:text-primary",secondary:"bg-muted text-foreground hover:bg-muted/80",ghost:"hover:bg-muted hover:text-foreground",link:"text-primary underline-offset-4 hover:underline",neon:"bg-transparent border-2 border-primary text-primary hover:bg-primary hover:text-primary-foreground shadow-[0_0_10px_hsla(180,100%,50%,0.4),inset_0_0_10px_hsla(180,100%,50%,0.1)]","neon-magenta":"bg-transparent border-2 border-secondary text-secondary hover:bg-secondary hover:text-secondary-foreground shadow-[0_0_10px_hsla(300,100%,50%,0.4),inset_0_0_10px_hsla(300,100%,50%,0.1)]",gaming:"bg-gradient-to-r from-primary/20 to-secondary/20 border border-primary/50 text-foreground hover:border-primary hover:from-primary/30 hover:to-secondary/30"},size:{default:"h-11 px-5 py-2",sm:"h-9 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),A=u.forwardRef(({className:s,variant:t,size:r,asChild:a=!1,...n},i)=>{const o=a?jn:"button";return e.jsx(o,{className:ie(_o({variant:t,size:r,className:s})),ref:i,...n})});A.displayName="Button";async function ko(s=10){try{const t=E(R,"matches"),r=await G(t);if(!r.exists())return[];const a=[];return r.forEach(n=>{a.push({id:n.key,...n.val()})}),a.sort((n,i)=>(i.timestamp||0)-(n.timestamp||0)).slice(0,s)}catch(t){return console.error("Erreur chargement matchs:",t),[]}}function Pa(s,t=10){const r=E(R,"matches");return bt(r,n=>{const i=[];n.forEach(o=>{i.push({id:o.key,...o.val()})}),s(i.sort((o,l)=>(l.timestamp||0)-(o.timestamp||0)).slice(0,t))})}async function So(){try{const s=E(R,"matchQueue"),t=await G(s);if(!t.exists())return[];const r=[];return t.forEach(a=>{r.push({id:a.key,...a.val()})}),r}catch(s){return console.error("Erreur chargement queue:",s),[]}}function Da(s){const t=E(R,"matchQueue");return bt(t,a=>{const n=[];a.forEach(i=>{n.push({id:i.key,...i.val()})}),s(n)})}async function Ia(){try{const s=await G(E(R,"users")),t=await G(E(R,"matches")),r=[];s.forEach(o=>{r.push(o.val())});const a=r.length,n=r.length>0?Math.round(r.reduce((o,l)=>o+(l.eloRating||1e3),0)/r.length):0,i=t.size;return{totalPlayers:a,averageElo:n,totalMatches:i}}catch(s){return console.error("Erreur chargement stats:",s),{totalPlayers:0,averageElo:0,totalMatches:0}}}function Eo(s){let t=null,r=null;const a=async()=>{const n=await Ia();s(n)};return t=bt(E(R,"users"),()=>{a()}),r=bt(E(R,"matches"),()=>{a()}),()=>{t==null||t(),r==null||r()}}const Ro="modulepreload",$o=function(s){return"/"+s},yr={},Gs=function(t,r,a){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(r.map(d=>{if(d=$o(d),d in yr)return;yr[d]=!0;const c=d.endsWith(".css"),m=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const y=document.createElement("link");if(y.rel=c?"stylesheet":Ro,c||(y.as="script"),y.crossOrigin="",y.href=d,l&&y.setAttribute("nonce",l),document.head.appendChild(y),c)return new Promise((h,b)=>{y.addEventListener("load",h),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},La={season1:{N831:{nom:"Lilwenn.png",rarity:"Bronze-NR"},R174:{nom:"Cloe.png",rarity:"Bronze-NR"},J665:{nom:"Romane.png",rarity:"Bronze-R"},D384:{nom:"Maxence.png",rarity:"Bronze-R"},W350:{nom:"Ioana.png",rarity:"Silver-NR"},B298:{nom:"Eli-jah.png",rarity:"Silver-R"},Y912:{nom:"Kathell.png",rarity:"Silver-R"},U934:{nom:"Shana.png",rarity:"Silver-R"},Z473:{nom:"Faustin.png",rarity:"Silver-NR"},M483:{nom:"Abel.png",rarity:"Silver-R"},C407:{nom:"Lola.png",rarity:"Silver-NR"},Q493:{nom:"Lucas.png",rarity:"Silver-NR"},H997:{nom:"Yoris.png",rarity:"Gold-NR"},U532:{nom:"Prune.png",rarity:"Gold-NR"},S849:{nom:"Thais.png",rarity:"Gold-R"},K006:{nom:"Adams.png",rarity:"Gold-R"},F825:{nom:"Ambre.png",rarity:"Gold-R"},T209:{nom:"Marceau.png",rarity:"Espoir"},Q514:{nom:"Mathys.png",rarity:"Espoir"},L276:{nom:"Thimeo.png",rarity:"Icone"},C478:{nom:"Mael.png",rarity:"Icone"},X118:{nom:"Nathael.png",rarity:"Future-star"},A621:{nom:"Enzo.png",rarity:"Hist.Maker"},T294:{nom:"Larry.png",rarity:"God"},Q574:{nom:"Chenaie.png",rarity:"Createur"},U986:{nom:"BouBou.png",rarity:"BouBou"},U956:{nom:"Dracaufeu.png",rarity:"PikaPika"}}},Ao={"Bronze-NR":40,"Bronze-R":25,"Silver-NR":15,"Silver-R":10,"Gold-NR":5,"Gold-R":3,Espoir:2,Icone:1.5,"Future-star":.8,God:1,Createur:.5,PikaPika:.2,BouBou:.1,"Hist.Maker":.1};function To(s,t=new Set){const r=La[s];if(!r)return null;const a=Object.entries(r).filter(([l])=>!t.has(l));if(a.length===0)return null;let n=0;const i=a.map(([l,d])=>{const c=Ao[d.rarity]||1;return n+=c,{code:l,...d,weight:c}});let o=Math.random()*n;for(const l of i)if(o-=l.weight,o<=0)return{code:l.code,nom:l.nom,rarity:l.rarity,season:s};return null}function Mo(s,t){const r=[],a=new Set,n=t*5;let i=0;for(;r.length<t&&i<n;){i++;const o=To(s,a);if(o&&!a.has(o.code))r.push(o),a.add(o.code);else if(!o)break}return r}function Me(s){const t=s.trim();return t.includes("Bronze")?"bronze":t.includes("Silver")?"silver":t.includes("Gold")?"gold":t==="Espoir"?"espoir":t==="Icone"?"icone":t==="Future-star"?"future-star":["God","PikaPika","BouBou","Hist.Maker"].includes(t)?"god":t==="Createur"?"creator":"unknown"}const Ws=Object.freeze(Object.defineProperty({__proto__:null,codeToCardMap:La,drawCards:Mo,getRarityCategory:Me},Symbol.toStringTag,{value:"Module"})),Oo=["Gold-NR","Gold-R","God","Createur","PikaPika","BouBou","Hist.Maker"];async function Po(s){try{const t=E(R,`users/${s}/cards`),r=await G(t);return r.exists()?r.val()||{}:{}}catch(t){return console.error("Erreur lors du chargement des quantit√©s de cartes:",t),{}}}async function Do(s){try{const r=E(R,`users/${s}`),{drawCards:a}=await Gs(async()=>{const{drawCards:h}=await Promise.resolve().then(()=>Ws);return{drawCards:h}},void 0),n=a("season1",3),o=(await G(r)).val()||{},l=o.cards||{};let d=o.totalBabyCards||0;const c={};n.forEach(h=>{const b=l[h.code]||0;c[h.code]=b+1,d++});const y={cards:{...l,...c},totalBabyCards:d,lastBoosterOpened:new Date().toISOString()};return await fe(r,y),n}catch(r){throw console.error("Erreur lors de l'ouverture du booster:",r),new Error("Impossible d'ouvrir le booster et de mettre √† jour la collection.")}}async function za(s){try{const t=await Po(s);let r=0,a=0,n=0;const{codeToCardMap:i}=await Gs(async()=>{const{codeToCardMap:o}=await Promise.resolve().then(()=>Ws);return{codeToCardMap:o}},void 0);for(const[o,l]of Object.entries(t))if(l>0){r+=l,a++;const d=i.season1[o];d&&Oo.includes(d.rarity)&&(n+=l)}return{totalCards:r,uniqueCards:a,rareCards:n}}catch(t){return console.error("Erreur lors du chargement des stats:",t),{totalCards:0,uniqueCards:0,rareCards:0}}}const Io=()=>{const{currentUser:s}=qe(),[t,r]=u.useState({totalPlayers:0,averageElo:0,totalMatches:0}),[a,n]=u.useState([]),[i,o]=u.useState([]),[l,d]=u.useState({totalCards:0,uniqueCards:48}),[c,m]=u.useState(!0);u.useEffect(()=>{(async()=>{try{const[M,U,V]=await Promise.all([Ia(),ko(3),So()]);if(r(M),n(U),o(V),s){const I=await za(s.uid);d(I)}}catch(M){console.error("Erreur chargement donn√©es:",M)}finally{m(!1)}})();const x=Eo(r),j=Pa(M=>{n(M.slice(0,3))},3),v=Da(o);return()=>{x(),j(),v()}},[s]);const y=p=>{const j=Date.now()-p,v=Math.floor(j/6e4),M=Math.floor(j/36e5),U=Math.floor(j/864e5);return v<1?"√Ä l'instant":v<60?`Il y a ${v} min`:M<24?`Il y a ${M}h`:`Il y a ${U}j`},h=()=>{const p=[];return a.forEach(x=>{const j=x.score1>x.score2?x.team1Names.join(" & "):x.team2Names.join(" & ");p.push({text:`${j} a gagn√© ${x.score1}-${x.score2}`,time:y(x.timestamp),type:"match"})}),s&&l.uniqueCards>0&&p.push({text:`${l.uniqueCards} cartes uniques collect√©es`,time:"Collection",type:"card"}),p.slice(0,3)};if(c)return e.jsx(Oe,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Chargement..."})]})})});const b=h();return e.jsxs(Oe,{children:[e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8 text-center",children:[e.jsx(L.div,{animate:{rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0},className:"mb-4 text-6xl",children:"‚öΩ"}),e.jsxs("h1",{className:"mb-2 text-3xl font-bold text-foreground",children:["Baby-Foot ",e.jsx("span",{className:"text-primary text-glow-cyan",children:"App"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Comp√©tition ‚Ä¢ Collection ‚Ä¢ Communaut√©"})]}),e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-6 grid grid-cols-3 gap-3",children:[e.jsx(O,{className:"text-center",children:e.jsxs(B,{className:"p-4",children:[e.jsx(Gt,{className:"mx-auto mb-2 h-6 w-6 text-primary"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:t.averageElo||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"ELO Moyen"})]})}),e.jsx(O,{className:"text-center",children:e.jsxs(B,{className:"p-4",children:[e.jsx(Ae,{className:"mx-auto mb-2 h-6 w-6 text-secondary"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:t.totalPlayers||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Joueurs"})]})}),e.jsx(O,{className:"text-center",children:e.jsxs(B,{className:"p-4",children:[e.jsx(Fe,{className:"mx-auto mb-2 h-6 w-6 text-rarity-gold"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:t.totalMatches||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Matchs"})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:e.jsx(Kt,{to:"/match",children:e.jsx(O,{className:"group cursor-pointer overflow-hidden transition-all hover:neon-border-cyan",children:e.jsxs(B,{className:"flex items-center gap-4 p-4",children:[e.jsx("div",{className:"rounded-xl bg-primary/20 p-3 transition-all group-hover:glow-cyan",children:e.jsx(Ae,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Rejoindre un match"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.length," joueur",i.length!==1?"s":""," en attente"]})]}),e.jsx(A,{variant:"neon",size:"sm",children:"Jouer"})]})})})}),e.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:e.jsx(Kt,{to:"/leaderboard",children:e.jsx(O,{className:"group cursor-pointer overflow-hidden transition-all hover:border-rarity-gold/50",children:e.jsxs(B,{className:"flex items-center gap-4 p-4",children:[e.jsx("div",{className:"rounded-xl bg-rarity-gold/20 p-3",children:e.jsx(Fe,{className:"h-8 w-8 text-rarity-gold"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Classement"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Voir le top des joueurs"})]}),e.jsx(Ze,{className:"h-5 w-5 text-muted-foreground"})]})})})}),e.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:e.jsx(Kt,{to:"/babydex",children:e.jsx(O,{className:"group cursor-pointer overflow-hidden transition-all hover:neon-border-magenta",children:e.jsxs(B,{className:"flex items-center gap-4 p-4",children:[e.jsx("div",{className:"rounded-xl bg-secondary/20 p-3 transition-all group-hover:glow-magenta",children:e.jsx(xa,{className:"h-8 w-8 text-secondary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"BabyDex"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s?`${l.uniqueCards}/${l.uniqueCards} cartes collect√©es`:"Collection de cartes"})]}),e.jsx(A,{variant:"neon-magenta",size:"sm",children:"Ouvrir"})]})})})}),e.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},children:e.jsx(Kt,{to:"/tournament",children:e.jsx(O,{className:"group cursor-pointer overflow-hidden transition-all hover:border-yellow-500/50 bg-gradient-to-r from-yellow-500/5 to-orange-500/5",children:e.jsxs(B,{className:"flex items-center gap-4 p-4",children:[e.jsx("div",{className:"rounded-xl bg-yellow-500/20 p-3",children:e.jsx(Fe,{className:"h-8 w-8 text-yellow-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Tournoi Quotidien"}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-bold bg-yellow-500 text-black rounded-full",children:"NOUVEAU"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"13h00 - 14h15 ‚Ä¢ Frais 50‚Ç¨"})]}),e.jsx(A,{variant:"outline",size:"sm",className:"border-yellow-500/50 text-yellow-500 hover:bg-yellow-500/10",children:"S'inscrire"})]})})})})]}),e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mt-6",children:[e.jsx("h2",{className:"mb-4 text-lg font-semibold text-foreground",children:"Activit√© r√©cente"}),e.jsx("div",{className:"space-y-2",children:b.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Aucune activit√© r√©cente"}):b.map((p,x)=>e.jsxs(L.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.6+x*.1},className:"flex items-center gap-3 rounded-lg bg-surface-alt p-3",children:[e.jsxs("span",{className:"text-lg",children:[p.type==="match"&&"‚öΩ",p.type==="card"&&"üÉè",p.type==="tournament"&&"üèÜ"]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-foreground",children:p.text}),e.jsx("p",{className:"text-xs text-muted-foreground",children:p.time})]})]},x))})]})]})},Fa=Nn,Hs=u.forwardRef(({className:s,...t},r)=>e.jsx(Qr,{ref:r,className:ie("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));Hs.displayName=Qr.displayName;const Ye=u.forwardRef(({className:s,...t},r)=>e.jsx(Jr,{ref:r,className:ie("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",s),...t}));Ye.displayName=Jr.displayName;const Ct=u.forwardRef(({className:s,...t},r)=>e.jsx(Yr,{ref:r,className:ie("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));Ct.displayName=Yr.displayName;const Lo=ps("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ye({className:s,variant:t,...r}){return e.jsx("div",{className:ie(Lo({variant:t}),s),...r})}const br=[{name:"Bronze",minElo:0,maxElo:1099,color:"#CD7F32",icon:"ü•â"},{name:"Argent",minElo:1100,maxElo:1299,color:"#C0C0C0",icon:"ü•à"},{name:"Or",minElo:1300,maxElo:1499,color:"#FFD700",icon:"ü•á"},{name:"Platine",minElo:1500,maxElo:1699,color:"#E5E4E2",icon:"üíé"},{name:"Diamant",minElo:1700,maxElo:1899,color:"#B9F2FF",icon:"üí†"},{name:"Ma√Ætre",minElo:1900,maxElo:2099,color:"#9B59B6",icon:"üëë"},{name:"Grand Ma√Ætre",minElo:2100,maxElo:2299,color:"#E74C3C",icon:"‚ö°"},{name:"Challenger",minElo:2300,maxElo:9999,color:"#F39C12",icon:"üî•"}];function Os(s){return br.find(t=>s>=t.minElo&&s<=t.maxElo)||br[0]}async function zo(s,t,r,a,n){try{const i=E(R,`matchQueue/${s}`);await ut(i,{id:s,username:t,elo1v1:r,elo2v2:a,eloGlobal:n,joinedAt:Date.now()}),vi(i).remove()}catch(i){throw console.error("Erreur lors de l'ajout √† la queue:",i),new Error("Impossible de rejoindre la file d'attente")}}async function Fo(s){try{const t=E(R,`matchQueue/${s}`);await rs(t)}catch(t){throw console.error("Erreur lors du retrait de la queue:",t),new Error("Impossible de quitter la file d'attente")}}function Bo(s,t){return s===1&&t===1?"1v1":s===2&&t===2?"2v2":"mixed"}async function qo(s,t,r){try{if(s.filter(p=>t.includes(p)).length>0)throw new Error("Un joueur ne peut pas √™tre dans les deux √©quipes");const n=E(R,"users"),i=await G(n);if(!i.exists())throw new Error("Aucun utilisateur trouv√©");const o=i.val(),l=s.map(p=>{var x;return((x=o[p])==null?void 0:x.username)||"Unknown"}),d=t.map(p=>{var x;return((x=o[p])==null?void 0:x.username)||"Unknown"}),c=Bo(s.length,t.length),m=E(R,"bettingMatches"),y=Us(m),h=y.key,b={id:h,team1:s,team2:t,team1Names:l,team2Names:d,matchType:c,status:"open",createdAt:Date.now(),createdBy:r,bets:{},totalBetsTeam1:0,totalBetsTeam2:0};return await ut(y,b),h}catch(a){throw console.error("Erreur lors de la cr√©ation du match:",a),a}}async function Uo(s,t,r,a,n){var i;try{const o=E(R,`bettingMatches/${s}`),l=await G(o);if(!l.exists())throw new Error("Match introuvable");const d=l.val();if(d.status!=="open")throw new Error("Les paris sont ferm√©s pour ce match");const c=E(R,`users/${t}`);await ji(c,p=>{var M;if(!p)throw new Error("Utilisateur introuvable");const x=p.fortune||0,j=(M=d.bets)==null?void 0:M[t],v=j?x+j.amount:x;if(v<a)throw new Error("Vous n'avez pas assez d'argent");return p.fortune=v-a,p});const m={};m[`bettingMatches/${s}/bets/${t}`]={userId:t,username:r,amount:a,teamBet:n,timestamp:Date.now()};let y=d.totalBetsTeam1||0,h=d.totalBetsTeam2||0;const b=(i=d.bets)==null?void 0:i[t];b&&(b.teamBet===1?y-=b.amount:h-=b.amount),n===1?y+=a:h+=a,m[`bettingMatches/${s}/totalBetsTeam1`]=y,m[`bettingMatches/${s}/totalBetsTeam2`]=h,await fe(E(R),m)}catch(o){throw console.error("Erreur lors du placement du pari:",o),o}}async function Vo(s){try{const t={};t[`bettingMatches/${s}/status`]="playing",t[`bettingMatches/${s}/startedAt`]=Date.now(),await fe(E(R),t)}catch(t){throw console.error("Erreur lors du d√©marrage du match:",t),t}}function Zo(s){return s<1300?40:s<1700?32:s<2100?24:16}function Go(s,t,r){const a=Zo(s),n=1/(1+Math.pow(10,(t-s)/400)),o=Math.round(a*((r?1:0)-n));return s+o}async function Wo(s,t,r){try{if(t===r)throw new Error("Le score ne peut pas √™tre √©gal");const a=E(R,`bettingMatches/${s}`),n=await G(a);if(!n.exists())throw new Error("Match introuvable");const i=n.val();if(i.status==="finished")throw new Error("Ce match est d√©j√† termin√©");const o=E(R,"users"),l=await G(o);if(!l.exists())throw new Error("Aucun utilisateur trouv√©");const d=l.val(),c=i.matchType,m=f=>{const D=d[f];if(!D)return 1e3;switch(c){case"1v1":return D.elo1v1||1e3;case"2v2":return D.elo2v2||1e3;case"mixed":return D.eloGlobal||1e3}},y=i.team1.map(f=>{var D,T,Z;return{id:f,username:((D=d[f])==null?void 0:D.username)||"Unknown",eloRating:m(f),wins:((T=d[f])==null?void 0:T[`wins${c==="1v1"?"1v1":c==="2v2"?"2v2":"Mixed"}`])||0,losses:((Z=d[f])==null?void 0:Z[`losses${c==="1v1"?"1v1":c==="2v2"?"2v2":"Mixed"}`])||0}}),h=i.team2.map(f=>{var D,T,Z;return{id:f,username:((D=d[f])==null?void 0:D.username)||"Unknown",eloRating:m(f),wins:((T=d[f])==null?void 0:T[`wins${c==="1v1"?"1v1":c==="2v2"?"2v2":"Mixed"}`])||0,losses:((Z=d[f])==null?void 0:Z[`losses${c==="1v1"?"1v1":c==="2v2"?"2v2":"Mixed"}`])||0}}),b=y.reduce((f,D)=>f+D.eloRating,0)/y.length,p=h.reduce((f,D)=>f+D.eloRating,0)/h.length,x=t>r,j=[],v={},M=(f,D,T)=>{const Z=Go(f.eloRating,D,T),le=Z-f.eloRating,ve=c==="1v1"?"elo1v1":c==="2v2"?"elo2v2":"eloGlobal";v[`users/${f.id}/${ve}`]=Z;const me=d[f.id],K=c==="1v1"?Z:(me==null?void 0:me.elo1v1)||1e3,te=c==="2v2"?Z:(me==null?void 0:me.elo2v2)||1e3,se=c==="mixed"?Z:(me==null?void 0:me.eloGlobal)||1e3,ue=Math.round((K+te+se)/3);v[`users/${f.id}/eloGlobal`]=ue;const $=`wins${c==="1v1"?"1v1":c==="2v2"?"2v2":"Mixed"}`,C=`losses${c==="1v1"?"1v1":c==="2v2"?"2v2":"Mixed"}`;v[`users/${f.id}/${$}`]=T?f.wins+1:f.wins,v[`users/${f.id}/${C}`]=T?f.losses:f.losses+1;const g=Os(Z);j.push({userId:f.id,username:f.username,oldElo:f.eloRating,newElo:Z,eloChange:le,matchType:c,rank:g})};y.forEach(f=>M(f,p,x)),h.forEach(f=>M(f,b,!x));const U=x?1:2,V=i.totalBetsTeam1+i.totalBetsTeam2,I=U===1?i.totalBetsTeam1:i.totalBetsTeam2,H=U===1?i.totalBetsTeam2:i.totalBetsTeam1,k={};if(i.bets&&I>0){for(const f of Object.values(i.bets))if(f.teamBet===U){const T=f.amount/I*H,Z=f.amount+T;k[f.userId]=Math.round(Z);const le=E(R,`users/${f.userId}`),ve=await G(le);if(ve.exists()){const me=ve.val(),K=me.fortune||0,te=me.bettingGains||0,se=Math.round(T);v[`users/${f.userId}/fortune`]=K+k[f.userId],v[`users/${f.userId}/bettingGains`]=te+se,v[`users/${f.userId}/totalEarned`]=(me.totalEarned||0)+se}}}const F=E(R,"matches"),J=Us(F);return v[`matches/${J.key}`]={id:J.key,team1:i.team1,team2:i.team2,team1Names:i.team1Names,team2Names:i.team2Names,matchType:c,score1:t,score2:r,date:new Date().toISOString(),timestamp:Date.now(),recordedBy:i.createdBy,fromBetting:!0},v[`bettingMatches/${s}/status`]="finished",v[`bettingMatches/${s}/score1`]=t,v[`bettingMatches/${s}/score2`]=r,v[`bettingMatches/${s}/finishedAt`]=Date.now(),await fe(E(R),v),{eloUpdates:j,winnings:k}}catch(a){throw console.error("Erreur lors de la finalisation du match:",a),a}}async function Ho(){try{const s=E(R,"bettingMatches"),t=await G(s);if(!t.exists())return[];const r=[];return t.forEach(a=>{const n={id:a.key,...a.val()};(n.status==="open"||n.status==="playing")&&r.push(n)}),r.sort((a,n)=>n.createdAt-a.createdAt)}catch(s){return console.error("Erreur lors de la r√©cup√©ration des matchs:",s),[]}}async function Qo(){try{const s=E(R,"users"),t=await G(s);if(!t.exists())return[];const r=t.val();return Object.entries(r).map(([a,n])=>({id:a,username:n.username||"Unknown",elo1v1:n.elo1v1||1e3,elo2v2:n.elo2v2||1e3,eloGlobal:n.eloGlobal||1e3}))}catch(s){return console.error("Erreur lors de la r√©cup√©ration des joueurs:",s),[]}}const Jo=()=>{const[s,t]=u.useState([]),[r,a]=u.useState(!0),[n,i]=u.useState("global");u.useEffect(()=>{const p=E(R,"users"),x=bt(p,j=>{if(!j.exists()){t([]),a(!1);return}const v=[];j.forEach(M=>{const U=M.val();v.push({id:M.key,username:U.username||"Joueur",elo1v1:U.elo1v1||U.eloRating||1e3,elo2v2:U.elo2v2||U.eloRating||1e3,eloGlobal:U.eloGlobal||U.eloRating||1e3,wins1v1:U.wins1v1||0,losses1v1:U.losses1v1||0,wins2v2:U.wins2v2||0,losses2v2:U.losses2v2||0,winsMixed:U.winsMixed||0,lossesMixed:U.lossesMixed||0})}),t(v),a(!1)},j=>{console.error("Erreur chargement leaderboard:",j),a(!1)});return()=>x()},[]);const o=()=>{const p=n==="1v1"?"elo1v1":n==="2v2"?"elo2v2":"eloGlobal";return[...s].sort((x,j)=>j[p]-x[p])},l=(p,x)=>{const j=x==="1v1"?p.wins1v1:x==="2v2"?p.wins2v2:p.winsMixed,v=x==="1v1"?p.losses1v1:x==="2v2"?p.losses2v2:p.lossesMixed,M=j+v;return M===0?0:Math.round(j/M*100)},d=p=>{const x=Os(p);return e.jsxs(ye,{style:{backgroundColor:`${x.color}20`,borderColor:x.color,color:x.color},className:"border",children:[e.jsx("span",{className:"mr-1",children:x.icon}),x.name]})},c=()=>{const p={Bronze:0,Argent:0,Or:0,Platine:0,Diamant:0,Ma√Ætre:0,"G.Ma√Ætre":0,Challenger:0},x=n==="1v1"?"elo1v1":n==="2v2"?"elo2v2":"eloGlobal";s.forEach(v=>{const M=v[x],U=Os(M);p.hasOwnProperty(U.name)&&p[U.name]++});const j=s.length||1;return Object.entries(p).map(([v,M])=>({name:v,percentage:Math.round(M/j*100)}))},m=({player:p,rank:x,index:j})=>{const v=n==="1v1"?p.elo1v1:n==="2v2"?p.elo2v2:p.eloGlobal,U=l(p,n==="1v1"?"1v1":n==="2v2"?"2v2":"mixed"),V=H=>H===1?"text-rarity-gold":H===2?"text-rarity-silver":H===3?"text-rarity-bronze":"text-muted-foreground",I=H=>H===1?"üëë":H===2?"ü•à":H===3?"ü•â":H;return e.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1+j*.05},className:`rounded-lg border p-4 ${x<=3?"border-primary/40 bg-gradient-to-r from-primary/10 to-transparent":"border-border bg-surface-alt"}`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-lg bg-surface font-bold ${V(x)}`,children:I(x)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-semibold text-foreground",children:p.username}),d(v)]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["WR: ",U,"%"]}),e.jsx("span",{children:"‚Ä¢"}),e.jsxs("span",{children:[n==="1v1"&&`${p.wins1v1}V - ${p.losses1v1}D`,n==="2v2"&&`${p.wins2v2}V - ${p.losses2v2}D`,n==="global"&&`${p.winsMixed}V - ${p.lossesMixed}D`]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:v}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"ELO"})]})]})})},y=o(),h=y.slice(0,3),b=c();return r?e.jsx(Oe,{children:e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ce,{className:"mx-auto mb-4 h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"text-muted-foreground",children:"Chargement du classement..."})]})})}):e.jsxs(Oe,{children:[e.jsxs(L.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"rounded-xl bg-rarity-gold/20 p-3",children:e.jsx(Fe,{className:"h-6 w-6 text-rarity-gold"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Classement"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Saison 1 - Multi-Modes"})]})]}),e.jsx(Fa,{value:n,onValueChange:p=>i(p),className:"w-full",children:e.jsxs(Hs,{className:"grid w-full grid-cols-3",children:[e.jsxs(Ye,{value:"global",className:"gap-2",children:[e.jsx(Ln,{className:"h-4 w-4"}),"Global"]}),e.jsxs(Ye,{value:"1v1",className:"gap-2",children:[e.jsx(pa,{className:"h-4 w-4"}),"1v1"]}),e.jsxs(Ye,{value:"2v2",className:"gap-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),"2v2"]})]})})]}),h.length>0&&e.jsxs(L.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},className:"mb-6 flex items-end justify-center gap-2",children:[h[1]&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"mb-2 flex h-16 w-16 items-center justify-center rounded-full border-4 border-rarity-silver bg-surface-alt",children:e.jsx("span",{className:"text-2xl",children:"ü•à"})}),e.jsx("p",{className:"text-sm font-medium text-foreground mb-1",children:h[1].username}),d(n==="1v1"?h[1].elo1v1:n==="2v2"?h[1].elo2v2:h[1].eloGlobal),e.jsx("div",{className:"mt-2 h-20 w-20 rounded-t-lg bg-gradient-to-b from-rarity-silver/40 to-rarity-silver/20 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-rarity-silver",children:n==="1v1"?h[1].elo1v1:n==="2v2"?h[1].elo2v2:h[1].eloGlobal})})]}),h[0]&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(L.div,{animate:{y:[0,-5,0]},transition:{duration:2,repeat:1/0},className:"mb-2",children:e.jsx("span",{className:"text-3xl",children:"üëë"})}),e.jsx("div",{className:"mb-2 flex h-20 w-20 items-center justify-center rounded-full border-4 border-rarity-gold bg-surface-alt glow-gold",children:e.jsx("span",{className:"text-3xl",children:"üèÜ"})}),e.jsx("p",{className:"font-semibold text-foreground mb-1",children:h[0].username}),d(n==="1v1"?h[0].elo1v1:n==="2v2"?h[0].elo2v2:h[0].eloGlobal),e.jsx("div",{className:"mt-2 h-28 w-24 rounded-t-lg bg-gradient-to-b from-rarity-gold/40 to-rarity-gold/20 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl font-bold text-rarity-gold",children:n==="1v1"?h[0].elo1v1:n==="2v2"?h[0].elo2v2:h[0].eloGlobal})})]}),h[2]&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"mb-2 flex h-14 w-14 items-center justify-center rounded-full border-4 border-rarity-bronze bg-surface-alt",children:e.jsx("span",{className:"text-xl",children:"ü•â"})}),e.jsx("p",{className:"text-sm font-medium text-foreground mb-1",children:h[2].username}),d(n==="1v1"?h[2].elo1v1:n==="2v2"?h[2].elo2v2:h[2].eloGlobal),e.jsx("div",{className:"mt-2 h-16 w-18 rounded-t-lg bg-gradient-to-b from-rarity-bronze/40 to-rarity-bronze/20 flex items-center justify-center px-6",children:e.jsx("span",{className:"text-xl font-bold text-rarity-bronze",children:n==="1v1"?h[2].elo1v1:n==="2v2"?h[2].elo2v2:h[2].eloGlobal})})]})]}),e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-6",children:e.jsxs(O,{children:[e.jsx(he,{children:e.jsx(pe,{className:"text-lg",children:"Distribution des Rangs"})}),e.jsx(B,{children:e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{name:"Bronze",icon:"ü•â",color:"#CD7F32"},{name:"Argent",icon:"ü•à",color:"#C0C0C0"},{name:"Or",icon:"ü•á",color:"#FFD700"},{name:"Platine",icon:"üíé",color:"#E5E4E2"},{name:"Diamant",icon:"üí†",color:"#B9F2FF"},{name:"Ma√Ætre",icon:"üëë",color:"#9B59B6"},{name:"G.Ma√Ætre",icon:"‚ö°",color:"#E74C3C"},{name:"Challenger",icon:"üî•",color:"#F39C12"}].map(p=>{const x=b.find(j=>j.name===p.name);return e.jsxs("div",{className:"flex flex-col items-center rounded-lg border border-border bg-surface-alt p-2",children:[e.jsx("span",{className:"text-2xl mb-1",children:p.icon}),e.jsx("span",{className:"text-xs font-medium",style:{color:p.color},children:p.name}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[(x==null?void 0:x.percentage)||0,"%"]})]},p.name)})})})]})}),e.jsx("div",{className:"space-y-3",children:y.length>0?y.map((p,x)=>e.jsx(m,{player:p,rank:x+1,index:x},p.id)):e.jsx(O,{children:e.jsx(B,{className:"p-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Aucun joueur trouv√©"})})})})]})};function Yo({queuedPlayers:s,isInQueue:t,onJoinQueue:r,onLeaveQueue:a,isJoining:n=!1,isLeaving:i=!1}){return e.jsxs(O,{className:"overflow-hidden",children:[e.jsx(he,{className:"border-b border-border bg-surface-alt/50",children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-5 w-5 text-primary"}),"File d'attente",e.jsxs("span",{className:"ml-auto rounded-full bg-primary/20 px-3 py-1 text-sm text-primary",children:[s.length,"/4"]})]})}),e.jsxs(B,{className:"p-4",children:[e.jsx("div",{className:"mb-6 grid grid-cols-4 gap-2",children:[0,1,2,3].map(o=>{const l=s[o];return e.jsx(L.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:o*.1},className:`flex aspect-square flex-col items-center justify-center rounded-xl border-2 border-dashed transition-all ${l?"border-primary bg-primary/10 neon-border-cyan":"border-border bg-surface-alt"}`,children:l?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-2xl",children:"üë§"}),e.jsx("span",{className:"mt-1 text-xs font-medium truncate w-full text-center px-1",children:l.username}),e.jsx("span",{className:"text-[10px] text-primary",children:l.eloRating})]}):e.jsxs(e.Fragment,{children:[e.jsx(xs,{className:"h-6 w-6 text-muted-foreground"}),e.jsx("span",{className:"mt-1 text-xs text-muted-foreground",children:"En attente"})]})},o)})}),t?e.jsx(A,{variant:"neon-magenta",className:"w-full",onClick:a,disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}),"D√©part..."]}):"Quitter la file"}):e.jsx(A,{variant:"neon",className:"w-full",onClick:r,disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}),"Rejoindre..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fa,{className:"mr-2 h-4 w-4"}),"Rejoindre la file"]})}),s.length===4&&e.jsx(L.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 rounded-lg bg-primary/20 p-3 text-center",children:e.jsx("p",{className:"font-semibold text-primary text-glow-cyan",children:"üéÆ Match pr√™t √† d√©marrer !"})})]})]})}const Ko=()=>{const{user:s,userProfile:t}=qe(),r=jt(),[a,n]=u.useState(!1),[i,o]=u.useState([]),[l,d]=u.useState([]),[c,m]=u.useState(!0),[y,h]=u.useState(!0),[b,p]=u.useState(!1),[x,j]=u.useState(!1);u.useEffect(()=>{m(!0);const I=Da(H=>{if(o(H),m(!1),s){const k=H.some(F=>F.id===s.uid);n(k)}});return()=>I()},[s]),u.useEffect(()=>{h(!0);const I=Pa(H=>{d(H),h(!1)},10);return()=>I()},[]);const v=async()=>{if(!s||!t){w({title:"Erreur",description:"Vous devez √™tre connect√©",variant:"destructive"});return}p(!0);try{await zo(s.uid,t.username,t.eloRating||1e3),w({title:"File d'attente",description:"Vous avez rejoint la file d'attente!"})}catch(I){console.error("Erreur:",I),w({title:"Erreur",description:"Impossible de rejoindre la file",variant:"destructive"})}finally{p(!1)}},M=async()=>{if(s){j(!0);try{await Fo(s.uid),w({title:"File d'attente",description:"Vous avez quitt√© la file d'attente."})}catch(I){console.error("Erreur:",I),w({title:"Erreur",description:"Impossible de quitter la file",variant:"destructive"})}finally{j(!1)}}},U=I=>{try{return(typeof I=="string"?new Date(I):new Date(I)).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Date inconnue"}},V=(I,H)=>{const k=H===1?I.team1:I.team2,F=H===1?I.team1Names:I.team2Names;return F&&Array.isArray(F)?F.join(" & "):k&&k.length>0&&typeof k[0]=="string"?k.join(" & "):`√âquipe ${H}`};return e.jsxs(Oe,{children:[e.jsxs(L.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-xl bg-primary/20 p-3",children:e.jsx(pa,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Match"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Trouvez une partie"})]})]}),e.jsxs(A,{onClick:()=>r("/betting"),variant:"neon",className:"gap-2",children:[e.jsx(St,{className:"h-4 w-4"}),"Cr√©er Match avec Paris"]})]}),e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-6",children:c?e.jsx(O,{children:e.jsxs(B,{className:"flex items-center justify-center p-8",children:[e.jsx(ce,{className:"h-6 w-6 animate-spin text-primary"}),e.jsx("p",{className:"ml-3 text-muted-foreground",children:"Chargement de la file..."})]})}):e.jsx(Yo,{queuedPlayers:i,isInQueue:a,onJoinQueue:v,onLeaveQueue:M,isJoining:b,isLeaving:x})}),e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-6",children:e.jsx(O,{className:"border-rarity-gold/30 bg-gradient-to-r from-rarity-gold/10 to-transparent",children:e.jsxs(B,{className:"flex items-center gap-4 p-4",children:[e.jsx("div",{className:"rounded-xl bg-rarity-gold/20 p-3",children:e.jsx(zn,{className:"h-6 w-6 text-rarity-gold"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Tournoi du Jeudi"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"D√©but dans 2h (13:00)"})]}),e.jsx(A,{onClick:()=>r("/tournament"),variant:"outline",size:"sm",className:"border-rarity-gold text-rarity-gold hover:bg-rarity-gold/10",children:"S'inscrire"})]})})}),e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsxs(O,{children:[e.jsx(he,{className:"border-b border-border",children:e.jsxs(pe,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Fn,{className:"h-5 w-5 text-muted-foreground"}),"Matchs r√©cents"]})}),e.jsx(B,{className:"p-4",children:y?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(ce,{className:"h-6 w-6 animate-spin text-primary"}),e.jsx("p",{className:"ml-3 text-muted-foreground",children:"Chargement des matchs..."})]}):e.jsx("div",{className:"space-y-4",children:l.length>0?l.map((I,H)=>e.jsxs(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4+H*.1},className:"rounded-lg bg-surface-alt p-4",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:U(I.date)}),e.jsx("span",{className:I.score1>I.score2?"text-primary":"text-secondary",children:I.score1>I.score2?"√âquipe 1 gagne":"√âquipe 2 gagne"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 text-center",children:e.jsx("p",{className:"text-sm font-medium text-foreground",children:V(I,1)})}),e.jsxs("div",{className:"mx-4 flex items-center gap-2",children:[e.jsx("span",{className:`text-2xl font-bold ${I.score1>I.score2?"text-primary text-glow-cyan":"text-muted-foreground"}`,children:I.score1}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx("span",{className:`text-2xl font-bold ${I.score2>I.score1?"text-primary text-glow-cyan":"text-muted-foreground"}`,children:I.score2})]}),e.jsx("div",{className:"flex-1 text-center",children:e.jsx("p",{className:"text-sm font-medium text-foreground",children:V(I,2)})})]})]},I.id)):e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Aucun match r√©cent"})})})]})})]})},wt=50,Xo=2*60*60*1e3,vr=5,jr={bronze:1,silver:2,gold:3,espoir:4,icone:5,"future-star":6,god:7,creator:8,unknown:0},Ba={bronze:"Bronze",silver:"Silver",gold:"Gold",espoir:"Espoir",icone:"Ic√¥ne","future-star":"Future Star",god:"GOD",creator:"CR√âATEUR",unknown:"Inconnu"};function Nr({rarity:s,image:t,owned:r=!0,onClick:a}){return e.jsx(L.div,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:ie("relative cursor-pointer overflow-hidden rounded-xl p-1 transition-all",`card-rarity-${s}`,!r&&"opacity-40 grayscale"),children:e.jsxs("div",{className:"relative aspect-[3/4] overflow-hidden rounded-lg bg-background/50 backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-b from-transparent to-background/80",children:t?e.jsx("img",{src:t,alt:"Card",className:"h-full w-full object-cover",loading:"lazy"}):e.jsx("span",{className:"text-4xl",children:"‚öΩ"})}),e.jsx("div",{className:ie("absolute right-2 top-2 rounded-full px-2 py-0.5 text-[10px] font-bold uppercase",s==="bronze"&&"bg-amber-600/80 text-foreground",s==="silver"&&"bg-gray-400/80 text-background",s==="gold"&&"bg-yellow-500/80 text-background",s==="espoir"&&"bg-blue-500/80 text-white",s==="icone"&&"bg-purple-500/80 text-white",s==="future-star"&&"bg-cyan-500/80 text-white",s==="god"&&"bg-purple-600/80 text-white",s==="creator"&&"bg-pink-600/80 text-white",s==="unknown"&&"bg-gray-500/80 text-white"),children:Ba[s]}),!r&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/60",children:e.jsx("span",{className:"text-2xl",children:"üîí"})})]})})}const el=()=>{const{user:s}=qe(),[t,r]=u.useState("all"),[a,n]=u.useState(!1),[i,o]=u.useState(!0),[l,d]=u.useState([]),[c,m]=u.useState([]),[y,h]=u.useState(0),[b,p]=u.useState(null),[x,j]=u.useState(0),[v,M]=u.useState(null),[U,V]=u.useState(null),[I,H]=u.useState(!1),[k,F]=u.useState(""),J=u.useCallback(async()=>{if(s){o(!0);try{const K=E(R,`users/${s.uid}`),te=await G(K);if(te.exists()){const se=te.val();j(se.fortune||0),M(se.lastFreeBooster||null),V(se.lastDailyBonus||null);const ue=se.cards||{},$="season1",{codeToCardMap:C}=await Gs(async()=>{const{codeToCardMap:q}=await Promise.resolve().then(()=>Ws);return{codeToCardMap:q}},void 0),g=C[$]||{},S=[];for(const[q,P]of Object.entries(g)){const _=ue[q]||0;S.push({code:q,nom:P.nom,rarity:P.rarity,season:$,ownedCount:_,owned:_>0})}d(S.sort((q,P)=>q.code.localeCompare(P.code))),await f(se)}}catch(K){w({title:"Erreur de chargement",description:"Impossible de charger votre collection de cartes.",variant:"destructive"}),console.error("Erreur de chargement des cartes:",K)}finally{o(!1)}}},[s]),f=u.useCallback(async K=>{if(!s)return;const te=Date.now(),se=K.createdAt?new Date(K.createdAt).getTime():te,ue=K.lastDailyBonus||se,$=te-ue,C=24*60*60*1e3;if($>=C){const g=E(R,`users/${s.uid}`),S=(K.fortune||0)+vr;await fe(g,{fortune:S,lastDailyBonus:te}),j(S),V(te),w({title:"Bonus quotidien ! üéÅ",description:`Vous avez re√ßu ${vr}‚Ç¨`})}},[s]);u.useEffect(()=>{J()},[J]),u.useEffect(()=>{const K=()=>{if(!v){H(!0),F("");return}const ue=Date.now()-v,$=Xo-ue;if($<=0)H(!0),F("");else{H(!1);const C=Math.floor($/(60*60*1e3)),g=Math.floor($%(60*60*1e3)/(60*1e3)),S=Math.floor($%(60*1e3)/1e3);F(`${C}h ${g}m ${S}s`)}};K();const te=setInterval(K,1e3);return()=>clearInterval(te)},[v]);const D=u.useMemo(()=>t==="all"?l:l.filter(K=>Me(K.rarity)===t),[l,t]),T=u.useMemo(()=>l.filter(K=>K.owned).length,[l]),Z=async(K=!1)=>{if(s){if(!K&&x<wt){w({title:"Pas assez d'argent",description:`Il vous faut ${wt}‚Ç¨ pour ouvrir un booster.`,variant:"destructive"});return}if(K&&!I){w({title:"Booster gratuit indisponible",description:`Prochain booster gratuit dans ${k}`,variant:"destructive"});return}n(!0);try{const se=(await Do(s.uid)).sort((C,g)=>{const S=Me(C.rarity),q=Me(g.rarity);return jr[S]-jr[q]});m(se),h(0);const ue=E(R,`users/${s.uid}`),$={};K?($.lastFreeBooster=Date.now(),M(Date.now()),H(!1)):($.fortune=x-wt,j(x-wt)),await fe(ue,$),await J()}catch{w({title:"Erreur",description:"Impossible d'ouvrir le booster.",variant:"destructive"})}finally{n(!1)}}},le=()=>{y<c.length-1&&h(y+1)},ve=()=>{y>0&&h(y-1)},me=()=>{m([]),h(0)};return e.jsx(Oe,{children:e.jsxs("div",{className:"container mx-auto p-4 max-w-7xl",children:[e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"BabyDex"}),e.jsxs("p",{className:"mt-1 text-muted-foreground",children:["Collectionnez toutes les cartes des joueurs ! (",T,"/",l.length," cartes poss√©d√©es)"]}),e.jsxs("p",{className:"text-sm text-primary font-semibold mt-2",children:["üí∞ Fortune: ",x.toLocaleString(),"‚Ç¨"]})]}),e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-6 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(A,{className:"w-full sm:w-auto",onClick:()=>Z(!1),disabled:a||x<wt,children:[a?e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Ke,{className:"mr-2 h-4 w-4"}),a?"Ouverture...":`Ouvrir un booster (${wt}‚Ç¨)`]}),e.jsxs(A,{className:"w-full sm:w-auto",onClick:()=>Z(!0),disabled:a||!I,variant:I?"default":"secondary",children:[a?e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(xs,{className:"mr-2 h-4 w-4"}),I?"Booster gratuit !":`Gratuit dans ${k}`]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["all","bronze","silver","gold","espoir","icone","future-star","god","creator"].map(K=>e.jsxs(A,{variant:t===K?"default":"secondary",size:"sm",onClick:()=>r(K),children:[K==="all"?e.jsx(As,{className:"h-4 w-4 mr-1"}):e.jsx(ft,{className:"h-4 w-4 mr-1"}),K==="all"?"Tous":K==="future-star"?"Future Star":K.charAt(0).toUpperCase()+K.slice(1)]},K))})]}),i?e.jsx("div",{className:"flex justify-center items-center h-48",children:e.jsx(ce,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6",children:[D.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(As,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsxs("p",{className:"text-lg font-semibold text-muted-foreground",children:["Aucune carte ",t," trouv√©e."]})]}),D.map(K=>{const te=`/images/cards/${K.nom}`,se=Me(K.rarity);return e.jsxs(L.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},className:"relative",children:[K.ownedCount>1&&e.jsxs("div",{className:"absolute top-0 right-0 z-10 -mt-2 -mr-2 flex h-6 w-6 items-center justify-center rounded-full bg-primary text-xs font-bold text-primary-foreground shadow-md",children:["x",K.ownedCount]}),e.jsx(Nr,{rarity:se,image:te,owned:K.owned,onClick:()=>p(K)})]},K.code)})]}),e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mt-8",children:e.jsxs(O,{children:[e.jsx(he,{children:e.jsx(pe,{className:"text-sm",children:"L√©gende des raret√©s"})}),e.jsxs(B,{className:"grid grid-cols-4 sm:grid-cols-8 gap-2 text-center text-xs",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto mb-1 h-4 w-4 rounded bg-amber-600"}),e.jsx("span",{className:"text-muted-foreground",children:"Bronze"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto mb-1 h-4 w-4 rounded bg-gray-400"}),e.jsx("span",{className:"text-muted-foreground",children:"Silver"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto mb-1 h-4 w-4 rounded bg-yellow-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Gold"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto mb-1 h-4 w-4 rounded bg-blue-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Espoir"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto mb-1 h-4 w-4 rounded bg-purple-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Ic√¥ne"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto mb-1 h-4 w-4 rounded bg-cyan-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Future"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto mb-1 h-4 w-4 rounded bg-purple-600"}),e.jsx("span",{className:"text-muted-foreground",children:"God"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto mb-1 h-4 w-4 rounded bg-pink-600"}),e.jsx("span",{className:"text-muted-foreground",children:"Cr√©ateur"})]})]})]})})]}),e.jsx(He,{children:b&&e.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",onClick:()=>p(null),children:e.jsxs(L.div,{initial:{scale:.5,y:-50},animate:{scale:1,y:0},exit:{scale:.5,y:-50},className:"relative w-full max-w-sm max-h-[90vh] overflow-y-auto",onClick:K=>K.stopPropagation(),children:[e.jsxs("button",{onClick:()=>p(null),className:"absolute -top-8 right-0 text-white hover:text-primary transition-colors z-[60]",children:[e.jsx(ze,{className:"h-8 w-8"}),e.jsx("span",{className:"sr-only",children:"Fermer"})]}),e.jsxs(O,{className:"border-2 border-primary/50 shadow-2xl",children:[e.jsx(he,{className:"p-3 pb-2",children:e.jsx(pe,{className:"text-center text-lg",children:b.nom.replace(/\.(png|jpg|gif)$/i,"")})}),e.jsxs(B,{className:"p-3 space-y-3",children:[e.jsx("div",{className:"relative w-full max-w-[200px] mx-auto",children:e.jsx(Nr,{rarity:Me(b.rarity),image:`/images/cards/${b.nom}`,owned:b.owned})}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 bg-surface rounded-lg",children:[e.jsx("span",{className:"font-semibold text-muted-foreground",children:"Code:"}),e.jsx("span",{className:"text-primary font-mono",children:b.code})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-surface rounded-lg",children:[e.jsx("span",{className:"font-semibold text-muted-foreground",children:"Raret√©:"}),e.jsx("span",{className:"text-primary",children:b.rarity})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-surface rounded-lg",children:[e.jsx("span",{className:"font-semibold text-muted-foreground",children:"Saison:"}),e.jsx("span",{className:"text-primary capitalize",children:b.season})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-surface rounded-lg",children:[e.jsx("span",{className:"font-semibold text-muted-foreground",children:"Statut:"}),e.jsx("span",{className:ie("font-bold",b.owned?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:b.owned?`Poss√©d√©e (x${b.ownedCount})`:"Non poss√©d√©e üîí"})]})]}),e.jsx(A,{onClick:()=>p(null),className:"w-full",variant:"default",size:"sm",children:"Fermer"})]})]})]})})}),e.jsx(He,{children:c.length>0&&e.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-lg p-4",children:e.jsxs(L.div,{initial:{scale:.5},animate:{scale:1},exit:{scale:.5},className:"w-full max-w-md relative",children:[e.jsxs("button",{onClick:me,className:"absolute -top-8 right-0 text-white hover:text-primary transition-colors z-[60]",children:[e.jsx(ze,{className:"h-8 w-8"}),e.jsx("span",{className:"sr-only",children:"Fermer"})]}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary mb-2",children:"Booster Ouvert ! üéâ"}),e.jsxs("p",{className:"text-muted-foreground",children:["Carte ",y+1," sur ",c.length]})]}),e.jsx(He,{mode:"wait",children:e.jsx(L.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},className:"w-full max-w-sm mx-auto",children:c[y]&&e.jsx("div",{children:e.jsx("div",{className:`relative aspect-[3/4] overflow-hidden rounded-xl p-2 card-rarity-${Me(c[y].rarity)}`,children:e.jsxs("div",{className:"relative h-full overflow-hidden rounded-lg bg-background/50 backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-b from-transparent to-background/80",children:e.jsx("img",{src:`/images/cards/${c[y].nom}`,alt:c[y].nom,className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-background to-transparent",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:c[y].code}),e.jsx("p",{className:"font-bold text-foreground text-lg",children:c[y].nom.replace(/\.(png|jpg|gif)$/i,"")})]}),e.jsx("div",{className:ie("absolute right-3 top-3 rounded-full px-3 py-1 text-xs font-bold uppercase",Me(c[y].rarity)==="bronze"&&"bg-amber-600/80 text-foreground",Me(c[y].rarity)==="silver"&&"bg-gray-400/80 text-background",Me(c[y].rarity)==="gold"&&"bg-yellow-500/80 text-background",Me(c[y].rarity)==="espoir"&&"bg-blue-500/80 text-white",Me(c[y].rarity)==="icone"&&"bg-purple-500/80 text-white",Me(c[y].rarity)==="future-star"&&"bg-cyan-500/80 text-white",Me(c[y].rarity)==="god"&&"bg-purple-600/80 text-white",Me(c[y].rarity)==="creator"&&"bg-pink-600/80 text-white"),children:Ba[Me(c[y].rarity)]})]})})})},y)}),e.jsxs("div",{className:"flex gap-2 mt-6",children:[e.jsxs(A,{onClick:ve,disabled:y===0,variant:"outline",className:"flex-1",children:[e.jsx(Bn,{className:"h-4 w-4 mr-1"}),"Pr√©c√©dent"]}),y===c.length-1?e.jsx(A,{onClick:me,className:"flex-1",children:"Fermer"}):e.jsxs(A,{onClick:le,className:"flex-1",children:["Suivant",e.jsx(qn,{className:"h-4 w-4 ml-1"})]})]})]})})})]})})};async function tl(s,t,r,a,n){try{const i=E(R,"clubs"),o=Us(i),l=o.key,d={id:l,name:r,logo:a,color:n,founderId:s,members:{[s]:{userId:s,username:t,role:"founder",joinedAt:Date.now(),contributions:0}},treasury:0,totalEarnings:0,createdAt:Date.now(),bonuses:{}};return await ut(o,d),await fe(E(R,`users/${s}`),{clubId:l}),console.log(`‚úÖ Club cr√©√©: ${l} par ${s}`),l}catch(i){throw console.error("Erreur cr√©ation club:",i),new Error("Impossible de cr√©er le club.")}}async function sl(s,t,r){try{const a=E(R,`clubs/${s}`);if(!(await G(a)).exists())throw new Error("Club introuvable.");const i=E(R,`users/${t}`),o=await G(i);if(o.exists()&&o.val().clubId)throw new Error("Vous √™tes d√©j√† membre d'un autre club.");const l={userId:t,username:r,role:"member",joinedAt:Date.now(),contributions:0},d={};d[`clubs/${s}/members/${t}`]=l,d[`users/${t}/clubId`]=s,await fe(E(R),d),console.log(`‚úÖ ${t} a rejoint le club ${s}`)}catch(a){throw console.error("Erreur rejoindre club:",a),a}}async function rl(s,t=30){try{const r=E(R,`fortuneHistory/${s}`),a=await G(r);if(!a.exists())return[];const n=Object.values(a.val()),i=Date.now()-t*24*60*60*1e3;return n.filter(o=>o.timestamp>=i).sort((o,l)=>l.timestamp-o.timestamp)}catch(r){return console.error("Erreur lors de la r√©cup√©ration de l'historique de fortune:",r),[]}}async function al(s){try{const t=E(R,"users"),r=await G(t);if(!r.exists())return[];const a=r.val(),n=s.toLowerCase(),i=[];return Object.keys(a).forEach(o=>{const l=a[o];l.username&&l.username.toLowerCase().includes(n)&&i.push({id:o,username:l.username,role:l.role||"player",eloRating:l.eloRating||1e3,wins:l.wins||0,losses:l.losses||0,fortune:l.fortune||0,totalEarned:l.totalEarned||0,createdAt:l.createdAt||new Date().toISOString(),clubId:l.clubId})}),i.slice(0,10)}catch(t){return console.error("Erreur recherche utilisateurs:",t),[]}}const nl={lootbox_starter:{common:70,rare:25,epic:4,legendary:.9,mythic:.1},lootbox_silver:{common:40,rare:40,epic:15,legendary:4,mythic:1},lootbox_gold:{common:20,rare:35,epic:30,legendary:12,mythic:3},lootbox_diamond:{common:5,rare:20,epic:35,legendary:30,mythic:10},lootbox_mythic:{common:0,rare:10,epic:30,legendary:40,mythic:20}},il={common:{min:10,max:50},rare:{min:50,max:150},epic:{min:150,max:300},legendary:{min:300,max:600},mythic:{min:600,max:1200}};function ol(s){const t=nl[s];if(!t)return console.warn(`Taux de drop non trouv√©s pour ${s}, utilisation de common`),"common";const r=Math.random()*100;let a=0;for(const[n,i]of Object.entries(t))if(a+=i,r<=a)return n;return"common"}function ll(s,t){const r=De.filter(n=>n.rarity===s&&n.type!=="lootbox"&&!t.includes(n.id));if(r.length===0){const n=["mythic","legendary","epic","rare","common"],i=n.indexOf(s);for(let o=i+1;o<n.length;o++){const l=De.filter(d=>d.rarity===n[o]&&d.type!=="lootbox"&&!t.includes(d.id));if(l.length>0)return{item:l[Math.floor(Math.random()*l.length)],rarity:n[o]}}return null}return{item:r[Math.floor(Math.random()*r.length)],rarity:s}}function cl(s){const t=De.find(n=>n.id===s),r=(t==null?void 0:t.rarity)||"common",a=il[r];return Math.floor(Math.random()*(a.max-a.min+1))+a.min}function qa(s,t){return s!=null&&s.lootbox&&typeof s.lootbox[t]=="number"?s.lootbox[t]:typeof(s==null?void 0:s[t])=="number"?s[t]:0}async function dl(s,t){var r;try{const a=E(R,`users/${s}`),n=await G(a);if(!n.exists())throw new Error("Utilisateur non trouv√©");const i=n.val(),o=i.inventory||{},l=qa(o,t);if(l<=0)throw new Error("Vous ne poss√©dez pas cette lootbox");if(!De.find(x=>x.id===t))throw new Error("Lootbox introuvable");const c=[],m=[];for(let x=0;x<3;x++){const j=ol(t),v=ll(j,m);if(v){const{item:M,rarity:U}=v;m.push(M.id);const V=!!((r=o[M.type])!=null&&r[M.id]);c.push({itemId:M.id,itemName:M.name,rarity:U,type:M.type,isNew:!V})}}const y=cl(t),h={},b=l-1;b<=0?(h[`inventory/lootbox/${t}`]=null,o[t]&&(h[`inventory/${t}`]=null)):(h[`inventory/lootbox/${t}`]=b,o[t]&&(h[`inventory/${t}`]=null)),c.forEach(x=>{x.isNew&&(h[`inventory/${x.type}/${x.itemId}`]={obtainedAt:Date.now(),source:"lootbox",lootboxId:t})});const p=i.fortune||0;return h.fortune=p+y,await fe(a,h),console.log(`‚úÖ Lootbox ${t} ouverte par ${s}:`,{rewards:c.map(x=>`${x.itemName} (${x.rarity})`),fortuneBonus:y,newItems:c.filter(x=>x.isNew).length}),{rewards:c,fortuneBonus:y}}catch(a){throw console.error("‚ùå Erreur lors de l'ouverture de la lootbox:",a),a}}async function ul(s,t,r){try{const a=E(R,`users/${s}`),n=await G(a);if(!n.exists())throw new Error("Utilisateur non trouv√©");const i=n.val(),o=i.fortune||0;if(o<r)throw new Error("Fonds insuffisants");const l=i.inventory||{},d=qa(l,t),c={fortune:o-r,[`inventory/lootbox/${t}`]:d+1};l[t]&&(c[`inventory/${t}`]=null),await fe(a,c),console.log(`‚úÖ Lootbox ${t} achet√©e par ${s} (total: ${d+1})`)}catch(a){throw console.error("‚ùå Erreur lors de l'achat de la lootbox:",a),a}}async function ml(s,t,r){var a,n;try{const i=E(R,`users/${s}`),o=await G(i);if(!o.exists())throw new Error("Utilisateur introuvable");const d=o.val().fortune||0;if(d<r)throw new Error("Fonds insuffisants");const c=E(R,`clubs/${t}`),m=await G(c);if(!m.exists())throw new Error("Club introuvable");const y=m.val(),h=((n=(a=y.members)==null?void 0:a[s])==null?void 0:n.contributions)||0,b={};b[`users/${s}/fortune`]=d-r,b[`clubs/${t}/treasury`]=(y.treasury||0)+r,b[`clubs/${t}/members/${s}/contributions`]=h+r,await fe(E(R),b),console.log(`‚úÖ Contribution de ${r}‚Ç¨ ajout√©e au club ${t} par ${s}`)}catch(i){throw console.error("Erreur contribution club:",i),i}}async function xl(s,t,r){try{const a=E(R,`clubs/${s}`),n=await G(a);if(!n.exists())throw new Error("Club introuvable.");const i=n.val();if((i.treasury||0)<r)throw new Error("Tr√©sorerie insuffisante pour acheter ce bonus.");if(i.bonuses[t])throw new Error("Ce bonus est d√©j√† actif.");const o={};o.treasury=(i.treasury||0)-r,o[`bonuses/${t}`]=!0,await fe(a,o),console.log(`‚úÖ Bonus ${t} achet√© pour le club ${s}`)}catch(a){throw console.error("Erreur achat bonus club:",a),a}}async function hl(s,t){try{const r={};r[`clubs/${s}/members/${t}`]=null,r[`users/${t}/clubId`]=null,await fe(E(R),r),console.log(`‚úÖ ${t} a quitt√© le club ${s}`)}catch(r){throw console.error("Erreur quitter club:",r),new Error("Impossible de quitter le club.")}}async function Ua(s){try{const t=E(R,`userBadges/${s}`),r=await G(t);if(!r.exists())return[];const a=r.val();return Object.keys(a).map(n=>({id:n,...a[n],unlocked:a[n].unlocked||!1,progress:a[n].progress||0}))}catch(t){return console.error("Erreur lors de la r√©cup√©ration des badges:",t),[]}}async function pl(s){console.log(`[ACHIEVEMENTS] V√©rification des succ√®s pour l'utilisateur ${s}...`)}const fl=[{id:"avatar_default",name:"Avatar Classique",description:"L'avatar par d√©faut",type:"avatar",price:0,rarity:"common",icon:"üòä"},{id:"avatar_king",name:"Roi",description:"Avatar royal avec couronne dor√©e",type:"avatar",price:150,rarity:"rare",icon:"üëë"},{id:"avatar_ninja",name:"Ninja",description:"Discret et rapide",type:"avatar",price:200,rarity:"rare",icon:"ü•∑"},{id:"avatar_wizard",name:"Magicien",description:"Ma√Ætre des arcanes",type:"avatar",price:250,rarity:"epic",icon:"üßô"},{id:"avatar_robot",name:"Robot",description:"Technologie avanc√©e",type:"avatar",price:180,rarity:"rare",icon:"ü§ñ"},{id:"avatar_alien",name:"Alien",description:"Venu d'une autre galaxie",type:"avatar",price:300,rarity:"epic",icon:"üëΩ"},{id:"avatar_dragon",name:"Dragon",description:"Puissance l√©gendaire",type:"avatar",price:500,rarity:"legendary",icon:"üêâ"},{id:"avatar_phoenix",name:"Ph√©nix",description:"Rena√Æt de ses cendres",type:"avatar",price:450,rarity:"legendary",icon:"üî•"},{id:"avatar_ghost",name:"Fant√¥me",description:"Myst√©rieux et insaisissable",type:"avatar",price:220,rarity:"epic",icon:"üëª"},{id:"avatar_pirate",name:"Pirate",description:"Chasseur de tr√©sors",type:"avatar",price:170,rarity:"rare",icon:"üè¥‚Äç‚ò†Ô∏è"},{id:"avatar_astronaut",name:"Astronaute",description:"Explorateur spatial",type:"avatar",price:280,rarity:"epic",icon:"üë®‚ÄçüöÄ"},{id:"avatar_vampire",name:"Vampire",description:"Immortel de la nuit",type:"avatar",price:320,rarity:"epic",icon:"üßõ"},{id:"avatar_knight",name:"Chevalier",description:"Gardien du royaume",type:"avatar",price:190,rarity:"rare",icon:"‚öîÔ∏è"},{id:"avatar_samurai",name:"Samoura√Ø",description:"Guerrier honorable",type:"avatar",price:350,rarity:"epic",icon:"üóæ"},{id:"avatar_cyborg",name:"Cyborg",description:"Fusion homme-machine",type:"avatar",price:400,rarity:"legendary",icon:"ü¶æ"},{id:"avatar_demon",name:"D√©mon",description:"Seigneur des t√©n√®bres",type:"avatar",price:550,rarity:"legendary",icon:"üòà"},{id:"avatar_angel",name:"Ange",description:"Messager c√©leste",type:"avatar",price:500,rarity:"legendary",icon:"üëº"},{id:"avatar_zeus",name:"Zeus",description:"Dieu de l'Olympe",type:"avatar",price:800,rarity:"mythic",icon:"‚ö°üëë"},{id:"avatar_reaper",name:"Faucheuse",description:"Gardien des √¢mes",type:"avatar",price:600,rarity:"legendary",icon:"üíÄ"},{id:"avatar_titan",name:"Titan",description:"Colosse ancestral",type:"avatar",price:900,rarity:"mythic",icon:"‚õ∞Ô∏è"}],gl=[{id:"theme_default",name:"Th√®me Par D√©faut",description:"Le th√®me classique",type:"theme",price:0,rarity:"common",preview:"#6366f1",icon:"üé®"},{id:"theme_ocean",name:"Oc√©an Profond",description:"Ambiance sous-marine",type:"theme",price:200,rarity:"rare",preview:"#1e40af",icon:"üåä"},{id:"theme_sunset",name:"Coucher de Soleil",description:"Tons chauds orang√©s",type:"theme",price:180,rarity:"rare",preview:"#ea580c",icon:"üåÖ"},{id:"theme_forest",name:"For√™t Enchant√©e",description:"Vert naturel",type:"theme",price:220,rarity:"epic",preview:"#15803d",icon:"üå≤"},{id:"theme_neon",name:"N√©on Cyberpunk",description:"Style futuriste",type:"theme",price:350,rarity:"epic",preview:"#a855f7",icon:"‚ö°"},{id:"theme_gold",name:"Or Royal",description:"Luxe et prestige",type:"theme",price:500,rarity:"legendary",preview:"#d97706",icon:"üëë"},{id:"theme_ice",name:"Glace Arctique",description:"Froid cristallin",type:"theme",price:250,rarity:"epic",preview:"#0ea5e9",icon:"‚ùÑÔ∏è"},{id:"theme_lava",name:"Lave Volcanique",description:"Chaleur intense",type:"theme",price:280,rarity:"epic",preview:"#dc2626",icon:"üåã"},{id:"theme_space",name:"Espace Infini",description:"Cosmos myst√©rieux",type:"theme",price:400,rarity:"legendary",preview:"#1e1b4b",icon:"üåå"},{id:"theme_sakura",name:"Sakura",description:"Fleurs de cerisier",type:"theme",price:300,rarity:"epic",preview:"#ec4899",icon:"üå∏"},{id:"theme_matrix",name:"Matrix",description:"Code vert",type:"theme",price:450,rarity:"legendary",preview:"#22c55e",icon:"üíª"},{id:"theme_blood",name:"Sang Noir",description:"T√©n√®bres profondes",type:"theme",price:550,rarity:"legendary",preview:"#7f1d1d",icon:"ü©∏"},{id:"theme_rainbow",name:"Arc-en-ciel",description:"Toutes les couleurs",type:"theme",price:600,rarity:"legendary",preview:"#ff00ff",icon:"üåà"},{id:"theme_diamond",name:"Diamant",description:"Luxe absolu",type:"theme",price:800,rarity:"mythic",preview:"#38bdf8",icon:"üíé"},{id:"theme_cosmic",name:"Cosmique",description:"Galaxies infinies",type:"theme",price:1e3,rarity:"mythic",preview:"#4c1d95",icon:"‚ú®"}],yl=[{id:"banner_default",name:"Banni√®re Simple",description:"Banni√®re de d√©part",type:"banner",price:0,rarity:"common",icon:"üìã"},{id:"banner_stars",name:"Ciel √âtoil√©",description:"√âtoiles scintillantes",type:"banner",price:150,rarity:"rare",icon:"‚≠ê"},{id:"banner_fire",name:"Flammes",description:"Banni√®re enflamm√©e",type:"banner",price:200,rarity:"rare",icon:"üî•"},{id:"banner_lightning",name:"√âclair",description:"Banni√®re √©lectrique",type:"banner",price:250,rarity:"epic",icon:"‚ö°"},{id:"banner_rainbow",name:"Arc-en-ciel",description:"Banni√®re multicolore",type:"banner",price:180,rarity:"rare",icon:"üåà"},{id:"banner_galaxy",name:"Galaxie",description:"Banni√®re cosmique",type:"banner",price:400,rarity:"legendary",icon:"üåå"},{id:"banner_diamond",name:"Diamant",description:"Luxe cristallin",type:"banner",price:500,rarity:"legendary",icon:"üíé"},{id:"banner_sakura",name:"Fleurs de Cerisier",description:"√âl√©gance japonaise",type:"banner",price:280,rarity:"epic",icon:"üå∏"},{id:"banner_dragon",name:"Dragon Dor√©",description:"Mythique",type:"banner",price:450,rarity:"legendary",icon:"üê≤"},{id:"banner_ocean",name:"Vagues Oc√©aniques",description:"Aquatique",type:"banner",price:220,rarity:"epic",icon:"üåä"},{id:"banner_aurora",name:"Aurore Bor√©ale",description:"Lumineuse magique",type:"banner",price:350,rarity:"epic",icon:"üåå"},{id:"banner_blood",name:"Lune Sanglante",description:"Nocturne mystique",type:"banner",price:380,rarity:"epic",icon:"üåô"},{id:"banner_gold",name:"Or Imp√©rial",description:"Richesse absolue",type:"banner",price:600,rarity:"legendary",icon:"üèÜ"},{id:"banner_phoenix",name:"Ph√©nix C√©leste",description:"Renaissance √©ternelle",type:"banner",price:700,rarity:"mythic",icon:"üî•ü¶Ö"},{id:"banner_infinity",name:"Infini",description:"Au-del√† du temps",type:"banner",price:900,rarity:"mythic",icon:"‚ôæÔ∏è"}],bl=[{id:"effect_none",name:"Aucun Effet",description:"Pas d'effet visuel",type:"effect",price:0,rarity:"common",icon:"‚ö™"},{id:"effect_sparkles",name:"√âtincelles",description:"Particules brillantes",type:"effect",price:100,rarity:"common",icon:"‚ú®"},{id:"effect_glow",name:"Aura Lumineuse",description:"Halo color√©",type:"effect",price:150,rarity:"rare",icon:"üí´"},{id:"effect_fire",name:"Flammes",description:"Feu anim√©",type:"effect",price:200,rarity:"rare",icon:"üî•"},{id:"effect_ice",name:"Cristaux de Glace",description:"Effet de gel",type:"effect",price:220,rarity:"epic",icon:"‚ùÑÔ∏è"},{id:"effect_lightning",name:"√âlectricit√©",description:"√âclairs anim√©s",type:"effect",price:250,rarity:"epic",icon:"‚ö°"},{id:"effect_rainbow",name:"Arc-en-ciel",description:"Effet multicolore",type:"effect",price:180,rarity:"rare",icon:"üåà"},{id:"effect_stars",name:"√âtoiles Filantes",description:"Tra√Æn√©e d'√©toiles",type:"effect",price:300,rarity:"epic",icon:"‚≠ê"},{id:"effect_portal",name:"Portail",description:"Effet dimensionnel",type:"effect",price:400,rarity:"legendary",icon:"üåÄ"},{id:"effect_crown",name:"Couronne Flottante",description:"Couronne dor√©e",type:"effect",price:350,rarity:"legendary",icon:"üëë"},{id:"effect_wings",name:"Ailes d'Ange",description:"Ailes lumineuses",type:"effect",price:500,rarity:"legendary",icon:"ü™Ω"},{id:"effect_shadow",name:"Ombre Vivante",description:"Ombre qui bouge",type:"effect",price:280,rarity:"epic",icon:"üåë"},{id:"effect_sakura",name:"P√©tales de Sakura",description:"Fleurs qui tombent",type:"effect",price:320,rarity:"epic",icon:"üå∏"},{id:"effect_smoke",name:"Fum√©e Mystique",description:"Brume magique",type:"effect",price:260,rarity:"epic",icon:"üí®"},{id:"effect_galaxy",name:"Tourbillon Galactique",description:"√âtoiles qui tournent",type:"effect",price:450,rarity:"legendary",icon:"üåå"},{id:"effect_blood",name:"Aura Sanguine",description:"Rouge pulsant",type:"effect",price:380,rarity:"epic",icon:"ü©∏"},{id:"effect_divine",name:"Lumi√®re Divine",description:"Rayons c√©lestes",type:"effect",price:600,rarity:"legendary",icon:"‚òÄÔ∏è"},{id:"effect_demon",name:"Flammes D√©moniaques",description:"Feu noir",type:"effect",price:550,rarity:"legendary",icon:"üòà"},{id:"effect_cosmic",name:"√ânergie Cosmique",description:"Pouvoir ultime",type:"effect",price:800,rarity:"mythic",icon:"üí•"},{id:"effect_infinity",name:"Boucle Infinie",description:"Symbole infini",type:"effect",price:1e3,rarity:"mythic",icon:"‚ôæÔ∏è"}],vl=[{id:"lootbox_starter",name:"Coffre D√©butant",description:"Cartes Bronze/Silver/Gold",type:"lootbox",price:100,rarity:"common",icon:"üì¶"},{id:"lootbox_silver",name:"Bo√Æte Argent√©e",description:"Cartes Silver/Gold/Platinum",type:"lootbox",price:250,rarity:"rare",icon:"üéÅ"},{id:"lootbox_gold",name:"Coffre Dor√©",description:"Cartes Gold/Platinum/Diamond",type:"lootbox",price:500,rarity:"epic",icon:"üí∞"},{id:"lootbox_diamond",name:"Coffre Diamant",description:"Cartes Platinum/Diamond/Black",type:"lootbox",price:1e3,rarity:"legendary",icon:"üíé"},{id:"lootbox_mythic",name:"Coffre Mythique",description:"Cartes l√©gendaires garanties",type:"lootbox",price:2e3,rarity:"mythic",icon:"‚ú®"}],jl=[{id:"title_newbie",name:"D√©butant",description:"Titre de d√©part",type:"title",price:0,rarity:"common",icon:"üÜï"},{id:"title_veteran",name:"V√©t√©ran",description:"Joueur exp√©riment√©",type:"title",price:300,rarity:"rare",icon:"üéñÔ∏è"},{id:"title_champion",name:"Champion",description:"Gagnant de tournois",type:"title",price:500,rarity:"epic",icon:"üèÜ"},{id:"title_legend",name:"L√©gende",description:"L√©gende vivante",type:"title",price:800,rarity:"legendary",icon:"‚≠ê"},{id:"title_millionaire",name:"Millionnaire",description:"Fortune immense",type:"title",price:1500,rarity:"legendary",icon:"üí∞"},{id:"title_godlike",name:"Divin",description:"Pouvoir supr√™me",type:"title",price:2e3,rarity:"mythic",icon:"üëë"},{id:"title_strategist",name:"Strat√®ge",description:"Ma√Ætre tacticien",type:"title",price:600,rarity:"epic",icon:"üß†"},{id:"title_gambler",name:"Parieur Fou",description:"Risque tout",type:"title",price:400,rarity:"rare",icon:"üé≤"},{id:"title_collector",name:"Collectionneur",description:"Toutes les cartes",type:"title",price:1e3,rarity:"legendary",icon:"üÉè"},{id:"title_immortal",name:"Immortel",description:"Au-del√† du temps",type:"title",price:3e3,rarity:"mythic",icon:"‚ôæÔ∏è"}],De=[...fl,...gl,...yl,...bl,...vl,...jl];async function Nl(s,t,r,a){var n,i,o;try{const l=E(R,`users/${s}`),d=await G(l);if(!d.exists())throw new Error("Utilisateur introuvable");const c=d.val(),m=c.fortune||0;if(m<a)throw new Error("Fonds insuffisants");if((i=(n=c.inventory)==null?void 0:n[r])!=null&&i[t])throw new Error("Vous poss√©dez d√©j√† cet item");const y={};y[`users/${s}/fortune`]=m-a,y[`users/${s}/inventory/${r}/${t}`]={obtainedAt:Date.now(),source:"shop",price:a},!(((o=c.inventory)==null?void 0:o[r])&&Object.keys(c.inventory[r]).length>0)&&r!=="lootbox"&&(y[`users/${s}/${r}`]=t),await fe(E(R),y)}catch(l){throw console.error("Erreur achat article:",l),l}}async function Va(s,t,r){var a,n;try{const i=E(R,`users/${s}`),o=await G(i);if(!o.exists())throw new Error("Utilisateur introuvable");if(!((n=(a=o.val().inventory)==null?void 0:a[r])==null?void 0:n[t]))throw new Error("Vous ne poss√©dez pas cet item");const c={avatar:"avatar",theme:"theme",banner:"banner",effect:"effect",title:"title",badge:"badge",lootbox:null}[r];if(!c)throw new Error("Ce type d'article n'est pas √©quipable.");const m={};m[`users/${s}/${c}`]=t,await fe(E(R),m)}catch(i){throw console.error("Erreur √©quiper article:",i),i}}const wl=({username:s,role:t,eloRating:r,rank:a,equippedAvatar:n,equippedBanner:i})=>{const l={player:{label:"Joueur",color:"bg-blue-500",icon:it},agent:{label:"Agent",color:"bg-purple-500",icon:Et},admin:{label:"Admin",color:"bg-yellow-500",icon:Et}}[t],d=l.icon,c=n?De.find(h=>h.id===n):null,m=(c==null?void 0:c.icon)||"üòä",y=i?De.find(h=>h.id===i):null;return e.jsxs(O,{className:"relative overflow-hidden",children:[y&&e.jsx("div",{className:"absolute inset-0 opacity-20 bg-gradient-to-r from-primary/30 via-secondary/30 to-primary/30",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-9xl opacity-10",children:y.icon})}),e.jsx("div",{className:"relative p-6",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-24 w-24 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-5xl shadow-xl border-4 border-background",children:m}),e.jsx("div",{className:`absolute -bottom-1 -right-1 ${l.color} rounded-full p-2 shadow-lg border-2 border-background`,children:e.jsx(d,{className:"h-4 w-4 text-white"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:s}),e.jsx(ye,{variant:"outline",className:`${l.color} text-white border-0`,children:l.label})]}),e.jsxs("div",{className:"flex items-center gap-4 text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4 text-primary"}),e.jsxs("span",{className:"text-sm",children:["ELO: ",e.jsx("span",{className:"font-bold text-foreground",children:r})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("span",{className:"text-sm",children:["Rang: ",e.jsxs("span",{className:"font-bold text-foreground",children:["#",a]})]})]})]})]})]})})]})};function Cl({wins:s,losses:t,fortune:r,totalEarned:a}){const n=s+t>0?Math.round(s/(s+t)*100):0,i=[{label:"Victoires",value:s,icon:Fe,color:"text-primary",bgColor:"bg-primary/10"},{label:"D√©faites",value:t,icon:ze,color:"text-secondary",bgColor:"bg-secondary/10"},{label:"Win Rate",value:`${n}%`,icon:ga,color:"text-rarity-gold",bgColor:"bg-rarity-gold/10"},{label:"Fortune",value:`${r}‚Ç¨`,icon:Rt,color:"text-primary",bgColor:"bg-primary/10"}];return e.jsx("div",{className:"grid grid-cols-2 gap-3",children:i.map((o,l)=>e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},children:e.jsx(O,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`rounded-lg p-2 ${o.bgColor}`,children:e.jsx(o.icon,{className:`h-5 w-5 ${o.color}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:o.label}),e.jsx("p",{className:`text-xl font-bold ${o.color}`,children:o.value})]})]})})},o.label))})}const Qs=u.forwardRef(({className:s,value:t,...r},a)=>e.jsx(Kr,{ref:a,className:ie("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...r,children:e.jsx(wn,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Qs.displayName=Kr.displayName;const Ns={common:"bg-gray-500",rare:"bg-blue-500",epic:"bg-purple-500",legendary:"bg-orange-500"},wr={common:"Commun",rare:"Rare",epic:"√âpique",legendary:"L√©gendaire"},Xt=[{id:"tueur_gamelle",name:"Tueur de Gamelles",description:"Gagner 10 matchs d'affil√©e",icon:"üî•",rarity:"epic",reward:100},{id:"roi_jeudi",name:"Roi du Jeudi",description:"Gagner 5 matchs un jeudi",icon:"üëë",rarity:"rare",reward:50},{id:"millionnaire",name:"Millionnaire",description:"Atteindre 1000‚Ç¨ de fortune",icon:"üí∞",rarity:"legendary",reward:200},{id:"collectionneur",name:"Collectionneur",description:"Poss√©der 50 cartes uniques",icon:"üé¥",rarity:"epic",reward:150},{id:"parieur_fou",name:"Parieur Fou",description:"Gagner 10 paris",icon:"üé≤",rarity:"rare",reward:75}];function _l({userId:s}){const[t,r]=u.useState([]),[a,n]=u.useState(!0),[i,o]=u.useState(!1),[l,d]=u.useState(null);u.useEffect(()=>{s&&c()},[s]);const c=async()=>{try{const b=await Ua(s);r(b||[])}catch(b){console.error("Erreur chargement badges:",b),r([])}finally{n(!1)}},m=async()=>{o(!0);try{const b=await pl(s);b&&b.length>0?(await c(),b.forEach(p=>{const x=Xt.find(j=>j.id===p.id);w({title:"üéâ Nouveau badge d√©bloqu√© !",description:`${p.icon} ${p.name} - +${(x==null?void 0:x.reward)||0}‚Ç¨`})})):w({title:"Aucun nouveau badge",description:"Continue √† jouer pour d√©bloquer plus de badges !"})}catch(b){console.error("Erreur v√©rification achievements:",b),w({title:"Erreur",description:"Impossible de v√©rifier les achievements",variant:"destructive"})}finally{o(!1)}},y=t.map(b=>b.id),h=Math.round(t.length/Xt.length*100);return a?e.jsx(O,{children:e.jsx(B,{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):e.jsxs(O,{children:[e.jsxs(he,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($t,{className:"h-5 w-5 text-primary"}),e.jsx(pe,{children:"Badges & Succ√®s"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Compl√©tion"}),e.jsxs("p",{className:"text-lg font-bold text-primary",children:[h,"%"]})]}),e.jsx(A,{variant:"outline",size:"sm",onClick:m,disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary mr-2"}),"V√©rification..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"h-4 w-4 mr-2"}),"V√©rifier"]})})]})]}),e.jsx(Qs,{value:h,className:"mt-2"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:Xt.map(b=>{const p=y.includes(b.id),x=t.find(v=>v.id===b.id),j=l===b.id;return e.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.05},className:"relative",onMouseEnter:()=>d(b.id),onMouseLeave:()=>d(null),children:[e.jsxs("div",{className:`relative p-3 rounded-lg border-2 transition-all cursor-help ${p?"border-primary bg-primary/5":"border-border bg-surface-alt opacity-60"}`,children:[e.jsx("div",{className:`absolute top-1 right-1 w-2 h-2 rounded-full ${Ns[b.rarity]}`}),e.jsx("div",{className:`text-4xl text-center mb-2 ${!p&&"grayscale"}`,children:p?b.icon:"üîí"}),e.jsx("p",{className:"text-xs font-bold text-center mb-1 line-clamp-2",children:b.name}),p?e.jsx("div",{className:"text-center",children:e.jsx(ye,{variant:"default",className:"text-[10px] py-0 px-1 bg-green-500",children:"‚úì"})}):e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(gt,{className:"h-3 w-3 text-muted-foreground"})})]}),j&&e.jsx(L.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 z-50 pointer-events-none",children:e.jsxs("div",{className:"bg-popover border-2 border-primary/50 rounded-lg p-3 shadow-2xl whitespace-nowrap min-w-[200px]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b border-border",children:[e.jsx("span",{className:"text-2xl",children:p?b.icon:"üîí"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-foreground",children:b.name}),e.jsx(ye,{className:`${Ns[b.rarity]} text-white text-[10px] mt-0.5`,children:wr[b.rarity]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ts,{className:"h-3 w-3 text-primary mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:b.description})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"R√©compense"}),e.jsxs("span",{className:"text-sm font-bold text-primary",children:[b.reward,"‚Ç¨"]})]}),p&&x&&e.jsxs("div",{className:"flex items-center justify-between pt-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"D√©bloqu√© le"}),e.jsx("span",{className:"text-xs text-green-400 font-medium",children:new Date(x.unlockedAt).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"})})]})]}),e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-[1px]",children:e.jsx("div",{className:"border-8 border-transparent border-t-primary/50"})})]})})]},b.id)})}),t.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx($t,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-muted-foreground mb-3",children:"Aucun badge d√©bloqu√© pour le moment"}),e.jsx(A,{onClick:m,disabled:i,children:"V√©rifier mes accomplissements"})]}),t.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Badges r√©cents"}),e.jsx("div",{className:"space-y-2",children:t.sort((b,p)=>p.unlockedAt-b.unlockedAt).slice(0,3).map(b=>{const p=Xt.find(x=>x.id===b.id);return e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-surface-alt",children:[e.jsx("div",{className:"text-2xl",children:b.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:b.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:p==null?void 0:p.description}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:new Date(b.unlockedAt).toLocaleDateString("fr-FR")})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(ye,{className:Ns[b.rarity],children:wr[b.rarity]}),e.jsxs("p",{className:"text-xs text-primary font-bold mt-1",children:["+",(p==null?void 0:p.reward)||0,"‚Ç¨"]})]})]},b.id)})})]})]})]})}function kl({userId:s}){var p,x;const[t,r]=u.useState([]),[a,n]=u.useState(30),[i,o]=u.useState(!0);u.useEffect(()=>{l()},[s,a]);const l=async()=>{o(!0);try{const j=await rl(s,a);r(j)}catch(j){console.error("Erreur chargement historique:",j)}finally{o(!1)}},d=((p=t[t.length-1])==null?void 0:p.fortune)||0,c=((x=t[0])==null?void 0:x.fortune)||0,m=d-c,y=c>0?(m/c*100).toFixed(1):0,h=t.map(j=>({date:new Date(j.timestamp).toLocaleDateString("fr-FR",{month:"short",day:"numeric"}),fortune:j.fortune,timestamp:j.timestamp})),b=({active:j,payload:v})=>j&&v&&v.length?e.jsxs("div",{className:"bg-card border border-border p-3 rounded-lg shadow-lg",children:[e.jsxs("p",{className:"font-bold text-primary",children:[v[0].value,"‚Ç¨"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:v[0].payload.date})]}):null;return i?e.jsx(O,{children:e.jsx(B,{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):t.length===0?e.jsxs(O,{children:[e.jsx(he,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5 text-primary"}),"Historique de Fortune"]})}),e.jsxs(B,{className:"text-center py-8",children:[e.jsx(Un,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-muted-foreground",children:"Aucune donn√©e d'historique disponible"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Commence √† jouer pour voir ton √©volution !"})]})]}):e.jsxs(O,{children:[e.jsx(he,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5 text-primary"}),e.jsx(pe,{children:"Historique de Fortune"})]}),e.jsx("div",{className:"flex gap-2",children:[7,30].map(j=>e.jsxs("button",{onClick:()=>n(j),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${a===j?"bg-primary text-primary-foreground":"bg-surface-alt text-muted-foreground hover:bg-surface"}`,children:[j,"j"]},j))})]})}),e.jsxs(B,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-surface-alt",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"√âvolution"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:`text-xl font-bold ${m>=0?"text-green-500":"text-red-500"}`,children:[m>=0?"+":"",m,"‚Ç¨"]}),m>=0?e.jsx(Ze,{className:"h-4 w-4 text-green-500"}):e.jsx(Vn,{className:"h-4 w-4 text-red-500"})]}),e.jsxs("p",{className:`text-xs ${m>=0?"text-green-500":"text-red-500"}`,children:[m>=0?"+":"",y,"%"]})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-surface-alt",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Transactions"}),e.jsx("p",{className:"text-xl font-bold",children:t.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.filter(j=>j.change>0).length," ‚Üë / ",t.filter(j=>j.change<0).length," ‚Üì"]})]})]}),e.jsx("div",{className:"h-48 w-full",children:e.jsx(Zn,{width:"100%",height:"100%",children:e.jsxs(Gn,{data:h,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"fortuneGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),e.jsx(Wn,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),e.jsx(Hn,{dataKey:"date",stroke:"hsl(var(--muted-foreground))",style:{fontSize:"10px"},tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(Qn,{stroke:"hsl(var(--muted-foreground))",style:{fontSize:"10px"},tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(Jn,{content:e.jsx(b,{})}),e.jsx(Yn,{type:"monotone",dataKey:"fortune",stroke:"hsl(var(--primary))",strokeWidth:2,fill:"url(#fortuneGradient)"})]})})}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Transactions r√©centes"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:t.slice(-5).reverse().map((j,v)=>e.jsxs(L.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:v*.05},className:"flex items-center justify-between p-2 rounded-lg bg-surface-alt text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${j.change>0?"bg-green-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-xs",children:j.reason}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:new Date(j.timestamp).toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:`font-bold text-xs ${j.change>0?"text-green-500":"text-red-500"}`,children:[j.change>0?"+":"",j.change,"‚Ç¨"]})})]},v))})]})]})]})}function Sl({userId:s}){var m,y,h;const t=jt(),[r,a]=u.useState(null),[n,i]=u.useState(!0),[o,l]=u.useState(0);u.useEffect(()=>{d()},[s]);const d=async()=>{var b;i(!0);try{const p=E(R,`users/${s}`),x=await G(p);if(x.exists()){const j=x.val();if(j.clubId){const v=E(R,`clubs/${j.clubId}`),M=await G(v);if(M.exists()){const U=M.val();a({id:j.clubId,...U}),l(((b=U.members)==null?void 0:b.length)||0)}}}}catch(p){console.error("Erreur chargement club:",p)}finally{i(!1)}};if(n)return e.jsx(O,{children:e.jsx(B,{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})});if(!r)return e.jsxs(O,{children:[e.jsx(he,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-5 w-5 text-primary"}),"Mon Club"]})}),e.jsxs(B,{className:"text-center py-8",children:[e.jsx(Ae,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-muted-foreground mb-3",children:"Tu ne fais partie d'aucun club"}),e.jsx(A,{onClick:()=>t("/clubs"),variant:"neon",children:"Cr√©er ou rejoindre un club"})]})]});const c=r.bonuses?Object.values(r.bonuses).filter(Boolean).length:0;return e.jsxs(O,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1",style:{backgroundColor:r.color}}),e.jsx(he,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-5 w-5 text-primary"}),e.jsx(pe,{children:"Mon Club"})]}),e.jsx(A,{variant:"ghost",size:"sm",onClick:()=>t("/clubs"),children:e.jsx(Kn,{className:"h-4 w-4"})})]})}),e.jsx(B,{children:e.jsxs(L.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-surface-alt",children:[e.jsx("div",{className:"text-4xl w-14 h-14 flex items-center justify-center rounded-lg",style:{backgroundColor:r.color+"20"},children:r.logo}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg",children:r.name}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(Ae,{className:"h-3 w-3"}),o," membre",o>1?"s":""]}),r.founderId===s&&e.jsxs(ye,{variant:"outline",className:"text-xs",children:[e.jsx(Et,{className:"h-3 w-3 mr-1"}),"Fondateur"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-surface-alt",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tr√©sorerie"}),e.jsxs("p",{className:"text-xl font-bold text-primary",children:[r.treasury||0,"‚Ç¨"]})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-surface-alt",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total gagn√©"}),e.jsxs("p",{className:"text-xl font-bold text-green-500",children:[r.totalEarnings||0,"‚Ç¨"]})]})]}),c>0?e.jsxs("div",{className:"p-3 rounded-lg bg-primary/5 border border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ze,{className:"h-4 w-4 text-primary"}),e.jsx("p",{className:"text-sm font-semibold",children:"Bonus actifs"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[((m=r.bonuses)==null?void 0:m.xpBoost)&&e.jsx(ye,{variant:"default",className:"text-xs",children:"+20% ELO"}),((y=r.bonuses)==null?void 0:y.fortuneBoost)&&e.jsx(ye,{variant:"default",className:"text-xs",children:"+15% Fortune"}),((h=r.bonuses)==null?void 0:h.premiumCards)&&e.jsx(ye,{variant:"default",className:"text-xs",children:"x2 Cartes rares"})]})]}):e.jsx("div",{className:"p-3 rounded-lg bg-surface-alt",children:e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Aucun bonus actif ‚Ä¢ Contribuez pour d√©bloquer des avantages"})}),e.jsx(A,{onClick:()=>t("/clubs"),variant:"outline",className:"w-full",children:"Voir le club"})]})})]})}const we=u.forwardRef(({className:s,type:t,...r},a)=>e.jsx("input",{type:t,className:ie("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r}));we.displayName="Input";const $e=kn,Cr=Sn,El=Cn,Za=u.forwardRef(({className:s,...t},r)=>e.jsx(Xr,{ref:r,className:ie("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));Za.displayName=Xr.displayName;const Se=u.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(El,{children:[e.jsx(Za,{}),e.jsxs(ea,{ref:a,className:ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[t,e.jsxs(_n,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Se.displayName=ea.displayName;const Ee=({className:s,...t})=>e.jsx("div",{className:ie("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});Ee.displayName="DialogHeader";const Re=u.forwardRef(({className:s,...t},r)=>e.jsx(ta,{ref:r,className:ie("text-lg font-semibold leading-none tracking-tight",s),...t}));Re.displayName=ta.displayName;const Rl=u.forwardRef(({className:s,...t},r)=>e.jsx(sa,{ref:r,className:ie("text-sm text-muted-foreground",s),...t}));Rl.displayName=sa.displayName;const $l={common:"bg-gray-500",rare:"bg-blue-500",epic:"bg-purple-500",legendary:"bg-orange-500"};function Al({friendId:s,friendUsername:t,isOpen:r,onClose:a,onRemoveFriend:n,canRemove:i=!0}){const[o,l]=u.useState(null),[d,c]=u.useState([]),[m,y]=u.useState({totalCards:0,uniqueCards:0,rareCards:0}),[h,b]=u.useState(null),[p,x]=u.useState(!0);u.useEffect(()=>{!r||!s||j()},[r,s]);const j=async()=>{var I;x(!0);try{const H=E(R,`users/${s}`),k=await G(H);if(k.exists()){const F=k.val();l({username:F.username||t,role:F.role||"player",eloRating:F.eloRating||1e3,wins:F.wins||0,losses:F.losses||0,fortune:F.fortune||0,totalEarned:F.totalEarned||0,createdAt:F.createdAt||new Date().toISOString(),clubId:F.clubId});const J=await Ua(s);c(J||[]);const f=await za(s);if(y(f),F.clubId){const D=E(R,`clubs/${F.clubId}`),T=await G(D);if(T.exists()){const Z=T.val();b({name:Z.name,logo:Z.logo,color:Z.color,memberCount:((I=Z.members)==null?void 0:I.length)||0})}}else b(null)}}catch(H){console.error("Erreur chargement profil ami:",H),w({title:"Erreur",description:"Impossible de charger le profil",variant:"destructive"})}finally{x(!1)}},v=()=>{n&&o&&(n(s,o.username),a())};if(!r)return null;const M={player:{label:"Joueur",icon:Fe,color:"text-primary"},agent:{label:"Agent",icon:yt,color:"text-yellow-500"},admin:{label:"Admin",icon:Et,color:"text-gold"}},U=o&&o.wins+o.losses>0?Math.round(o.wins/(o.wins+o.losses)*100):0,V=Math.round(d.length/5*100);return e.jsx($e,{open:r,onOpenChange:a,children:e.jsxs(Se,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ee,{children:e.jsxs(Re,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Profil de ",t]}),i&&n&&e.jsxs(A,{variant:"ghost",size:"sm",onClick:v,className:"text-destructive hover:text-destructive",children:[e.jsx(Xn,{className:"h-4 w-4 mr-2"}),"Retirer"]})]})}),p?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ce,{className:"h-8 w-8 animate-spin text-primary"})}):o?e.jsxs("div",{className:"space-y-6",children:[e.jsx(O,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(L.div,{whileHover:{scale:1.05},className:"relative",children:e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-3xl font-bold shadow-lg",children:o.username.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold",children:o.username}),e.jsxs(ye,{variant:"outline",className:"gap-1",children:[(()=>{const I=M[o.role].icon;return I?e.jsx(I,{className:`h-3 w-3 ${M[o.role].color}`}):null})(),M[o.role].label]})]}),e.jsx("div",{className:"flex items-center gap-4 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-muted-foreground",children:"ELO:"}),e.jsx("span",{className:"font-bold text-primary",children:o.eloRating})]})})]})]})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(O,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg p-2 bg-primary/10",children:e.jsx(Fe,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Victoires"}),e.jsx("p",{className:"text-xl font-bold text-primary",children:o.wins})]})]})}),e.jsx(O,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg p-2 bg-secondary/10",children:e.jsx(ze,{className:"h-5 w-5 text-secondary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"D√©faites"}),e.jsx("p",{className:"text-xl font-bold text-secondary",children:o.losses})]})]})}),e.jsx(O,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg p-2 bg-gold/10",children:e.jsx(ga,{className:"h-5 w-5 text-gold"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Win Rate"}),e.jsxs("p",{className:"text-xl font-bold text-gold",children:[U,"%"]})]})]})}),e.jsx(O,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg p-2 bg-primary/10",children:e.jsx(Rt,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Fortune"}),e.jsxs("p",{className:"text-xl font-bold text-primary",children:[o.fortune,"‚Ç¨"]})]})]})})]}),e.jsx(O,{children:e.jsxs(B,{className:"p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[e.jsx(yt,{className:"h-4 w-4 text-primary"}),"Collection de Cartes"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"text-center p-3 rounded-lg bg-surface-alt",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:m.totalCards}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-surface-alt",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:m.uniqueCards}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Uniques"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-surface-alt",children:[e.jsx("p",{className:"text-2xl font-bold text-gold",children:m.rareCards}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Rares"})]})]})]})}),h&&e.jsx(O,{children:e.jsxs(B,{className:"p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Ae,{className:"h-4 w-4 text-primary"}),"Club"]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-surface-alt",children:[e.jsx("div",{className:"text-3xl w-12 h-12 flex items-center justify-center rounded-lg",style:{backgroundColor:h.color+"20"},children:h.logo}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold",children:h.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.memberCount," membre",h.memberCount>1?"s":""]})]})]})]})}),e.jsx(O,{children:e.jsxs(B,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx($t,{className:"h-4 w-4 text-primary"}),"Badges & Succ√®s"]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[V,"% complet"]})]}),e.jsx(Qs,{value:V,className:"mb-4"}),d.length>0?e.jsx("div",{className:"grid grid-cols-5 gap-2",children:d.map(I=>e.jsxs(L.div,{whileHover:{scale:1.05},className:"relative p-2 rounded-lg border-2 border-primary bg-primary/5",children:[e.jsx("div",{className:`absolute top-0.5 right-0.5 w-1.5 h-1.5 rounded-full ${$l[I.rarity]}`}),e.jsx("div",{className:"text-2xl text-center mb-1",children:I.icon}),e.jsx("p",{className:"text-[10px] font-bold text-center line-clamp-1",children:I.name})]},I.id))}):e.jsx("p",{className:"text-center text-muted-foreground text-sm py-4",children:"Aucun badge d√©bloqu√©"})]})}),e.jsx(O,{children:e.jsxs(B,{className:"p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[e.jsx(it,{className:"h-4 w-4 text-primary"}),"Informations"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Membre depuis"}),e.jsx("span",{className:"font-medium",children:new Date(o.createdAt).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total gagn√©"}),e.jsxs("span",{className:"font-medium text-green-500",children:[o.totalEarned,"‚Ç¨"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Matchs jou√©s"}),e.jsx("span",{className:"font-medium",children:o.wins+o.losses})]})]})]})})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Profil introuvable"})})]})})}const ht=u.forwardRef(({className:s,...t},r)=>e.jsx(ra,{className:ie("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",s),...t,ref:r,children:e.jsx(En,{className:ie("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ht.displayName=ra.displayName;const Tl=ps("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),pt=u.forwardRef(({className:s,...t},r)=>e.jsx(aa,{ref:r,className:ie(Tl(),s),...t}));pt.displayName=aa.displayName;async function Ml(s,t,r){try{const a=E(R,`users/${r}`);if(!(await G(a)).exists())throw new Error("Utilisateur introuvable");const i=E(R,`friendRequests/${s}_${r}`);if((await G(i)).exists())throw new Error("Demande d'ami d√©j√† envoy√©e");const l=E(R,`friends/${s}/${r}`);if((await G(l)).exists())throw new Error("Vous √™tes d√©j√† amis");const c=`${s}_${r}`,m={id:c,from:s,fromUsername:t,to:r,status:"pending",timestamp:Date.now()};await ut(E(R,`friendRequests/${c}`),m)}catch(a){throw console.error("Erreur lors de l'envoi de la demande:",a),a}}async function Ol(s){try{const t=E(R,`friendRequests/${s}`),r=await G(t);if(!r.exists())throw new Error("Demande introuvable");const a=r.val(),n=E(R,`users/${a.from}`),i=E(R,`users/${a.to}`),[o,l]=await Promise.all([G(n),G(i)]);if(!o.exists()||!l.exists())throw new Error("Utilisateur introuvable");const d=o.val(),c=l.val(),m={};m[`friends/${a.from}/${a.to}`]={id:a.to,username:c.username,eloRating:c.eloRating||1e3,avatar:c.avatar||null,addedAt:Date.now()},m[`friends/${a.to}/${a.from}`]={id:a.from,username:d.username,eloRating:d.eloRating||1e3,avatar:d.avatar||null,addedAt:Date.now()},m[`friendRequests/${s}/status`]="accepted",await fe(E(R),m)}catch(t){throw console.error("Erreur lors de l'acceptation:",t),t}}async function Pl(s){try{await fe(E(R,`friendRequests/${s}`),{status:"declined"})}catch(t){throw console.error("Erreur lors du refus:",t),t}}async function Dl(s,t){try{const r={};r[`friends/${s}/${t}`]=null,r[`friends/${t}/${s}`]=null,await fe(E(R),r)}catch(r){throw console.error("Erreur lors de la suppression:",r),r}}async function Il(s){try{const t=E(R,`friends/${s}`),r=await G(t);if(!r.exists())return[];const a=r.val(),n=[];for(const[i,o]of Object.entries(a)){const l=o,d=E(R,`userStatus/${i}`),c=await G(d),m=c.exists()?c.val().status:"offline",y=c.exists()?c.val().lastSeen:null;n.push({id:i,username:l.username,eloRating:l.eloRating,avatar:l.avatar,status:m,lastSeen:y})}return n}catch(t){return console.error("Erreur lors de la r√©cup√©ration des amis:",t),[]}}async function ws(s){try{const t=E(R,"friendRequests"),r=await G(t);if(!r.exists())return[];const a=r.val(),n=[];for(const[i,o]of Object.entries(a)){const l=o;l.to===s&&l.status==="pending"&&n.push({...l,id:i})}return n.sort((i,o)=>o.timestamp-i.timestamp)}catch(t){return console.error("Erreur lors de la r√©cup√©ration des demandes:",t),[]}}function Ll(s,t){const r=E(R,`friends/${s}`);return bt(r,async n=>{if(!n.exists()){t([]);return}const i=n.val(),o=[];for(const[l,d]of Object.entries(i)){const c=d,m=E(R,`userStatus/${l}`),y=await G(m),h=y.exists()?y.val().status:"offline",b=y.exists()?y.val().lastSeen:null;o.push({id:l,username:c.username,eloRating:c.eloRating,avatar:c.avatar,status:h,lastSeen:b})}t(o)})}const Cs={notifications:{enabled:!0,matchReminders:!0,friendRequests:!0,achievements:!0},sound:{enabled:!0,volume:50},privacy:{profilePublic:!0,showStats:!0,allowFriendRequests:!0,showOnlineStatus:!0},appearance:{darkMode:!0,language:"fr"}};async function Ga(s){try{const t=E(R,`userSettings/${s}`),r=await G(t);return r.exists()?r.val():(await ut(t,Cs),Cs)}catch(t){return console.error("Erreur lors de la r√©cup√©ration des param√®tres:",t),Cs}}async function zl(s,t){try{const r=E(R,`userSettings/${s}`),a=await Ga(s),n={...a,...t,notifications:{...a.notifications,...t.notifications},sound:{...a.sound,...t.sound},privacy:{...a.privacy,...t.privacy},appearance:{...a.appearance,...t.appearance}};await ut(r,n)}catch(r){throw console.error("Erreur lors de la mise √† jour des param√®tres:",r),r}}async function Fl(s,t){try{const r=E(R,"users"),a=await G(r);if(!a.exists())return[];const n=a.val(),i=[];for(const[o,l]of Object.entries(n)){const d=l;o!==t&&d.username.toLowerCase().includes(s.toLowerCase())&&i.push({id:o,username:d.username,eloRating:d.eloRating||1e3,avatar:d.avatar,status:"offline"})}return i}catch(r){return console.error("Erreur lors de la recherche:",r),[]}}function Ps(s=new Date){const t=s.getFullYear(),r=s.getMonth(),a=new Date(t,r+1,1),n=new Date(a.getTime()-1);let i=new Date(n);for(;i.getDay()!==6;)i.setDate(i.getDate()-1);let o=new Date(i);return o.setDate(o.getDate()+1),{start:i,end:o}}function Wa(){const s=new Date,t=Ps(s);return s>=t.start&&s<=t.end}function Zt(){const s=new Date,t=Ps(s);if(s>=t.start&&s<=t.end)return 0;if(s>t.end){const r=new Date(s.getFullYear(),s.getMonth()+1,15),a=Ps(r);return Math.ceil((a.start.getTime()-s.getTime())/(1e3*60*60*24))}return Math.ceil((t.start.getTime()-s.getTime())/(1e3*60*60*24))}function Ha(s){const t=Ms(s);return Math.round(s*t)}async function Bl(s){try{const t=E(R,`users/${s}`),r=await G(t);if(!r.exists())return{bettingGains:0,taxesDue:0,taxesPaid:!1,lastTaxPaymentDate:Date.now(),latePenalty:!1,daysUntilNextTax:Zt()};const a=r.val(),n=a.bettingGains||0,i=a.taxesPaidThisMonth||!1,o=a.lastTaxPaymentDate||0,l=Ha(n);return{bettingGains:n,taxesDue:l,taxesPaid:i,lastTaxPaymentDate:o,latePenalty:!1,daysUntilNextTax:Zt()}}catch(t){return console.error("Erreur r√©cup√©ration infos fiscales:",t),{bettingGains:0,taxesDue:0,taxesPaid:!1,lastTaxPaymentDate:Date.now(),latePenalty:!1,daysUntilNextTax:Zt()}}}async function ql(s){try{if(!Wa())return{success:!1,message:`Les taxes ne peuvent √™tre pay√©es que le dernier week-end du mois. ${Zt()} jour(s) restant(s).`};const t=E(R,`users/${s}`),r=await G(t);if(!r.exists())return{success:!1,message:"Utilisateur non trouv√©"};const a=r.val();if(a.taxesPaidThisMonth)return{success:!1,message:"Vous avez d√©j√† pay√© vos taxes ce mois-ci."};const n=a.bettingGains||0,i=a.fortune||0,o=Ha(n);if(i<o)return{success:!1,message:`Fonds insuffisants. Vous avez besoin de ${o}‚Ç¨ (vous en avez ${i}‚Ç¨)`};const l={};return l[`users/${s}/fortune`]=i-o,l[`users/${s}/taxesPaidThisMonth`]=!0,l[`users/${s}/lastTaxPaymentDate`]=Date.now(),l[`users/${s}/totalTaxesPaid`]=(a.totalTaxesPaid||0)+o,await fe(E(R),l),{success:!0,message:`${o}‚Ç¨ de taxes pay√©es avec succ√®s`}}catch(t){return console.error("Erreur paiement taxes:",t),{success:!1,message:t.message||"Erreur lors du paiement des taxes"}}}function Ul(s){const t=document.documentElement,a=(n=>{n=n.replace("#","");const i=parseInt(n.substring(0,2),16)/255,o=parseInt(n.substring(2,4),16)/255,l=parseInt(n.substring(4,6),16)/255,d=Math.max(i,o,l),c=Math.min(i,o,l);let m=0,y=0,h=(d+c)/2;if(d!==c){const b=d-c;switch(y=h>.5?b/(2-d-c):b/(d+c),d){case i:m=((o-l)/b+(o<l?6:0))/6;break;case o:m=((l-i)/b+2)/6;break;case l:m=((i-o)/b+4)/6;break}}return{h:Math.round(m*360),s:Math.round(y*100),l:Math.round(h*100)}})(s);t.style.setProperty("--primary",`${a.h} ${a.s}% ${a.l}%`),t.style.setProperty("--primary-foreground",`0 0% ${a.l>50?10:98}%`),t.style.setProperty("--primary-hover",`${a.h} ${a.s}% ${Math.max(a.l-10,0)}%`),t.style.setProperty("--primary-active",`${a.h} ${a.s}% ${Math.max(a.l-20,0)}%`),t.style.setProperty("--secondary",`${(a.h+180)%360} ${a.s}% ${a.l}%`),t.style.setProperty("--accent",`${(a.h+30)%360} ${a.s}% ${a.l}%`)}const Vl=({userId:s,fortune:t,bettingGains:r})=>{const[a,n]=u.useState(!1),[i,o]=u.useState(null),l=async()=>{n(!0);try{const v=await Bl(s);o(v)}catch(v){console.error("Erreur chargement taxes:",v)}finally{n(!1)}};!i&&!a&&l();const d=Ms(r),c=Math.round(r*d),m=Zt(),y=Wa(),h=i==null?void 0:i.taxesPaid,b=!h&&y&&t>=c,x=(v=>v>=2e3?{next:null,toNext:0,color:"text-red-500",bgColor:"bg-red-500/10",borderColor:"border-red-500/30"}:v>=1e3?{next:2e3,toNext:2e3-v,color:"text-orange-500",bgColor:"bg-orange-500/10",borderColor:"border-orange-500/30"}:v>=100?{next:1e3,toNext:1e3-v,color:"text-yellow-500",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/30"}:{next:100,toNext:100-v,color:"text-green-500",bgColor:"bg-green-500/10",borderColor:"border-green-500/30"})(r),j=async()=>{if(b){n(!0);try{const v=await ql(s);v.success?(w({title:"Paiement r√©ussi! üí∏",description:v.message}),l()):w({title:"Erreur",description:v.message,variant:"destructive"})}catch(v){w({title:"Erreur",description:v.message,variant:"destructive"})}finally{n(!1)}}};return i?e.jsxs(O,{className:`border-2 ${x.borderColor} bg-gradient-to-br from-secondary/5 to-transparent`,children:[e.jsx(he,{children:e.jsxs(pe,{className:"flex items-center gap-2 text-secondary",children:[e.jsx(ba,{className:"h-5 w-5"}),"Syst√®me Fiscal - Dernier Week-end du Mois"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-surface-alt border border-border",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Statut"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ce mois-ci"})]}),h?e.jsx(ye,{className:"bg-green-500/20 text-green-400 border border-green-500/50",children:"‚úì PAY√â"}):y?e.jsx(ye,{className:"bg-yellow-500/20 text-yellow-400 border border-yellow-500/50 animate-pulse",children:"‚è∞ EN COURS"}):e.jsx(ye,{className:"bg-muted text-muted-foreground",children:"‚è≥ NON DISPONIBLE"})]}),h&&e.jsx("div",{className:"p-3 rounded-lg bg-green-500/10 border border-green-500/30",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ts,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-green-400 mb-1",children:"‚úì Taxes Pay√©es"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vous avez d√©j√† pay√© vos taxes ce mois-ci. Prochain paiement possible le mois prochain."})]})]})}),e.jsxs("div",{className:`p-4 rounded-lg ${x.bgColor} border ${x.borderColor}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Taxes √† payer"}),e.jsxs("span",{className:`text-3xl font-bold ${x.color}`,children:[h?"0":c,"‚Ç¨"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Taux actuel"}),e.jsxs("span",{className:`font-bold ${x.color}`,children:[Math.round(d*100),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs mt-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Bas√© sur vos gains de paris"}),e.jsxs("span",{className:"font-medium",children:[r,"‚Ç¨"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs mt-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Fortune actuelle"}),e.jsxs("span",{className:"font-medium",children:[t,"‚Ç¨"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Prochaine p√©riode de paiement"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:y?"üî¥ EN COURS":`${m} jour(s)`})]}),y?e.jsxs("div",{className:"p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30",children:[e.jsx("p",{className:"text-xs font-semibold text-yellow-400",children:"‚è∞ Le dernier week-end du mois est ACTIF !"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Vous pouvez payer vos taxes maintenant jusqu'√† dimanche minuit."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative h-3 bg-gray-700 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-blue-500 via-cyan-500 to-blue-500 transition-all duration-500 rounded-full",style:{width:`${Math.max(5,(30-m)/30*100)}%`}})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Les taxes peuvent √™tre pay√©es le dernier week-end du mois (samedi-dimanche)."})]})]}),x.next&&e.jsxs("div",{className:"p-3 rounded-lg bg-surface-alt border border-border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ze,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:"Progression vers prochaine tranche"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Encore ",e.jsxs("span",{className:"font-bold text-primary",children:[x.toNext,"‚Ç¨"]})," de gains pour atteindre la tranche √† ",Math.round(Ms(x.next)*100),"%"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),"Bar√®me d'imposition"]}),e.jsx("div",{className:"space-y-1.5",children:[{range:"0‚Ç¨ - 99‚Ç¨",rate:10,current:r<100},{range:"100‚Ç¨ - 999‚Ç¨",rate:15,current:r>=100&&r<1e3},{range:"1000‚Ç¨ - 1999‚Ç¨",rate:19,current:r>=1e3&&r<2e3},{range:"2000‚Ç¨+",rate:23,current:r>=2e3}].map(v=>e.jsxs("div",{className:`flex justify-between p-2.5 rounded-lg text-sm transition-all ${v.current?"bg-secondary/20 border-2 border-secondary/40 font-bold":"bg-surface-alt border border-transparent"}`,children:[e.jsx("span",{className:v.current?"text-foreground":"text-muted-foreground",children:v.range}),e.jsxs("span",{className:v.current?"text-secondary":"text-muted-foreground",children:[v.rate,"%"]})]},v.range))})]}),!y&&e.jsx("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ts,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-400 mb-1",children:"‚ÑπÔ∏è Paiement indisponible"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Les taxes ne peuvent √™tre pay√©es que le dernier week-end du mois. Revenez dans ",m," jour(s)."]})]})]})}),b?e.jsx(A,{className:"w-full bg-green-600 hover:bg-green-700",onClick:j,disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-4 w-4 animate-spin mr-2"}),"Paiement en cours..."]}):e.jsxs(e.Fragment,{children:["üí∏ Payer ",c,"‚Ç¨ de taxes"]})}):h?e.jsx(A,{variant:"outline",className:"w-full opacity-50 cursor-not-allowed",disabled:!0,children:"‚úì D√©j√† pay√© ce mois-ci"}):y?t<c?e.jsxs(A,{variant:"outline",className:"w-full opacity-50 cursor-not-allowed",disabled:!0,children:["Fonds insuffisants (",t,"‚Ç¨ / ",c,"‚Ç¨)"]}):null:e.jsxs(A,{variant:"outline",className:"w-full opacity-50 cursor-not-allowed",disabled:!0,children:["‚è≥ Disponible le dernier week-end (",m,"j)"]})]})]}):e.jsx(O,{children:e.jsx(B,{className:"flex items-center justify-center p-8",children:e.jsx(ce,{className:"h-6 w-6 animate-spin text-primary"})})})},Zl=({equipped:s,inventory:t})=>{const r=d=>De.find(c=>c.id===d)||null,a=s.avatar?r(s.avatar):null,n=s.theme?r(s.theme):null,i=s.banner?r(s.banner):null,o=s.effect?r(s.effect):null,l=Object.keys(t||{}).reduce((d,c)=>typeof t[c]=="object"?d+Object.keys(t[c]).length:d,0);return e.jsxs(O,{className:"border-2 border-primary/20 bg-gradient-to-br from-primary/5 to-transparent",children:[e.jsx(he,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(ft,{className:"h-5 w-5 text-primary"}),"Items √âquip√©s"]})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-surface-alt border border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:(a==null?void 0:a.icon)||"üòä"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:(a==null?void 0:a.name)||"Avatar par d√©faut"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avatar"})]})]}),a&&e.jsx(ye,{variant:"outline",className:"bg-primary/10 text-primary border-primary/30",children:"√âquip√©"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-surface-alt border border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[n!=null&&n.preview?e.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-white/20",style:{backgroundColor:n.preview}}):e.jsx("div",{className:"text-3xl",children:"üé®"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:(n==null?void 0:n.name)||"Th√®me par d√©faut"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Th√®me"})]})]}),n&&e.jsx(ye,{variant:"outline",className:"bg-primary/10 text-primary border-primary/30",children:"√âquip√©"})]}),i&&e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-surface-alt border border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:i.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:i.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Banni√®re"})]})]}),e.jsx(ye,{variant:"outline",className:"bg-primary/10 text-primary border-primary/30",children:"√âquip√©"})]}),o&&e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-surface-alt border border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:o.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:o.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Effet"})]})]}),e.jsx(ye,{variant:"outline",className:"bg-primary/10 text-primary border-primary/30",children:"√âquip√©"})]}),e.jsx("div",{className:"pt-3 border-t border-border",children:e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Collection : ",l," items poss√©d√©s"]})})]})]})},Gl=()=>{const{user:s,userProfile:t,logout:r}=qe(),a=jt(),[n,i]=u.useState(!1),[o,l]=u.useState(!1),[d,c]=u.useState(!1),[m,y]=u.useState(!1),[h,b]=u.useState(!1),[p,x]=u.useState(null),[j,v]=u.useState([]),[M,U]=u.useState([]),[V,I]=u.useState(null),[H,k]=u.useState([]),[F,J]=u.useState(""),[f,D]=u.useState({fortune:0,bettingGains:0,equipped:{avatar:"",theme:"",banner:"",effect:""},inventory:{}}),[T,Z]=u.useState(!1),[le,ve]=u.useState(!1),[me,K]=u.useState(!0),[te,se]=u.useState(null),ue=t||{username:(s==null?void 0:s.displayName)||"Joueur",role:"player",eloRating:1e3,wins:0,losses:0};u.useEffect(()=>{if(!s)return;(async()=>{K(!0);try{const ee=E(R,`users/${s.uid}`),re=await G(ee);if(re.exists()){const Ce=re.val(),Ne={avatar:Ce.avatar||"",theme:Ce.theme||"",banner:Ce.banner||"",effect:Ce.effect||""};if(D({fortune:Ce.fortune||0,bettingGains:Ce.bettingGains||0,equipped:Ne,inventory:Ce.inventory||{}}),Ne.theme){const _e=De.find(Te=>Te.id===Ne.theme);_e&&_e.preview&&Ul(_e.preview)}}}catch(ee){console.error("Erreur chargement donn√©es utilisateur:",ee)}finally{K(!1)}})()},[s]),u.useEffect(()=>{if(!s)return;(async()=>{Z(!0);try{const[re,Ce]=await Promise.all([Il(s.uid),ws(s.uid)]);v(re),U(Ce)}catch(re){console.error("Erreur chargement amis:",re)}finally{Z(!1)}})();const ee=Ll(s.uid,re=>{v(re)});return()=>ee()},[s]),u.useEffect(()=>{if(!s)return;(async()=>{ve(!0);try{const ee=await Ga(s.uid);I(ee)}catch(ee){console.error("Erreur chargement param√®tres:",ee)}finally{ve(!1)}})()},[s]),u.useEffect(()=>{if(!s||F.length<2){k([]);return}const ee=setTimeout(async()=>{const re=await Fl(F,s.uid);k(re)},300);return()=>clearTimeout(ee)},[F,s]);const $=async()=>{try{await r(),w({title:"D√©connexion r√©ussie",description:"√Ä bient√¥t !"}),a("/auth")}catch{w({title:"Erreur",description:"Impossible de se d√©connecter.",variant:"destructive"})}},C=async()=>{if(!(!s||!V))try{await zl(s.uid,V),w({title:"Param√®tres sauvegard√©s! ‚öôÔ∏è",description:"Vos pr√©f√©rences ont √©t√© mises √† jour."}),l(!1)}catch{w({title:"Erreur",description:"Impossible de sauvegarder les param√®tres.",variant:"destructive"})}},g=async(_,ee)=>{if(!(!s||!t)){se(_);try{await Ml(s.uid,t.username,_),w({title:"Demande envoy√©e! ü§ù",description:`Demande d'ami envoy√©e √† ${ee}`}),J(""),k([])}catch(re){w({title:"Erreur",description:re.message,variant:"destructive"})}finally{se(null)}}},S=async(_,ee)=>{try{if(await Ol(_),w({title:"Ami ajout√©! ‚úÖ",description:`${ee} est maintenant votre ami`}),s){const re=await ws(s.uid);U(re)}}catch(re){w({title:"Erreur",description:re.message,variant:"destructive"})}},q=async _=>{try{if(await Pl(_),w({title:"Demande refus√©e",description:"La demande a √©t√© refus√©e"}),s){const ee=await ws(s.uid);U(ee)}}catch(ee){w({title:"Erreur",description:ee.message,variant:"destructive"})}},P=async(_,ee)=>{if(s)try{await Dl(s.uid,_),w({title:"Ami supprim√©",description:`${ee} a √©t√© retir√© de vos amis`}),(p==null?void 0:p.id)===_&&x(null)}catch(re){w({title:"Erreur",description:re.message,variant:"destructive"})}};return e.jsxs(Oe,{children:[e.jsxs(L.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6 flex justify-end gap-2",children:[e.jsxs(A,{variant:"ghost",size:"icon",onClick:()=>i(!0),className:"relative",children:[e.jsx(nr,{className:"h-5 w-5"}),M.length>0&&e.jsx("span",{className:"absolute right-1 top-1 flex h-4 w-4 items-center justify-center rounded-full bg-secondary text-[10px] font-bold animate-pulse",children:M.length})]}),e.jsx(A,{variant:"ghost",size:"icon",onClick:()=>l(!0),children:e.jsx(ir,{className:"h-5 w-5"})})]}),e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsx(wl,{username:ue.username,role:ue.role,eloRating:ue.eloRating,rank:1,equippedAvatar:f.equipped.avatar,equippedBanner:f.equipped.banner})}),e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-6",children:e.jsx(Cl,{wins:ue.wins,losses:ue.losses,fortune:f.fortune,totalEarned:f.bettingGains})}),e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"mb-6",children:me?e.jsx(O,{children:e.jsxs(B,{className:"flex items-center justify-center p-8",children:[e.jsx(ce,{className:"h-6 w-6 animate-spin text-primary"}),e.jsx("p",{className:"ml-3 text-muted-foreground",children:"Chargement..."})]})}):e.jsx(Zl,{equipped:f.equipped,inventory:f.inventory})}),e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-6",children:me?e.jsx(O,{children:e.jsxs(B,{className:"flex items-center justify-center p-8",children:[e.jsx(ce,{className:"h-6 w-6 animate-spin text-primary"}),e.jsx("p",{className:"ml-3 text-muted-foreground",children:"Chargement..."})]})}):s&&e.jsx(Vl,{userId:s.uid,fortune:f.fortune,bettingGains:f.bettingGains})}),s&&e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mb-6",children:e.jsx(_l,{userId:s.uid})}),s&&e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsx(kl,{userId:s.uid}),e.jsx(Sl,{userId:s.uid})]}),e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsxs(O,{children:[e.jsx(he,{children:e.jsx(pe,{className:"text-lg",children:"Actions rapides"})}),e.jsxs(B,{className:"space-y-2",children:[e.jsxs(A,{variant:"outline",className:"w-full justify-start gap-3",onClick:()=>a("/shop"),children:[e.jsx(kt,{className:"h-4 w-4 text-primary"}),"Boutique"]}),e.jsxs(A,{variant:"outline",className:"w-full justify-start gap-3",onClick:()=>a("/inventory"),children:[e.jsx(qt,{className:"h-4 w-4 text-primary"}),"Inventaire"]}),(t==null?void 0:t.role)==="admin"&&e.jsxs(A,{variant:"outline",className:"w-full justify-start gap-3 border-yellow-500/50 text-yellow-500 hover:bg-yellow-500/10",onClick:()=>a("/admin"),children:[e.jsx(it,{className:"h-4 w-4"}),"Panneau Admin"]}),e.jsxs(A,{variant:"outline",className:"w-full justify-start gap-3",onClick:()=>c(!0),children:[e.jsx(ss,{className:"h-4 w-4 text-primary"}),"G√©rer les amis",e.jsx("span",{className:"ml-auto rounded-full bg-primary/20 px-2 py-0.5 text-xs text-primary",children:j.length})]}),e.jsxs(A,{variant:"outline",className:"w-full justify-start gap-3",onClick:()=>y(!0),children:[e.jsx(it,{className:"h-4 w-4 text-muted-foreground"}),"Confidentialit√©"]}),e.jsxs(A,{variant:"outline",className:"w-full justify-start gap-3 text-secondary hover:text-secondary",onClick:$,children:[e.jsx(ya,{className:"h-4 w-4"}),"D√©connexion"]})]})]})}),e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-6",children:e.jsx(O,{children:e.jsx(B,{className:"p-4",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Connect√© en tant que: ",e.jsx("span",{className:"text-foreground",children:s==null?void 0:s.email})]})})})}),e.jsx($e,{open:n,onOpenChange:i,children:e.jsxs(Se,{children:[e.jsx(Ee,{children:e.jsxs(Re,{className:"flex items-center gap-2",children:[e.jsx(nr,{className:"h-5 w-5 text-primary"}),"Demandes d'ami (",M.length,")"]})}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:M.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Aucune demande en attente"}):M.map(_=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-surface-alt",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:_.fromUsername}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Demande d'ami"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(A,{size:"sm",variant:"default",onClick:()=>S(_.id,_.fromUsername),children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsx(A,{size:"sm",variant:"destructive",onClick:()=>q(_.id),children:e.jsx(ze,{className:"h-4 w-4"})})]})]},_.id))})]})}),e.jsx($e,{open:o,onOpenChange:l,children:e.jsxs(Se,{children:[e.jsx(Ee,{children:e.jsxs(Re,{className:"flex items-center gap-2",children:[e.jsx(ir,{className:"h-5 w-5 text-primary"}),"Param√®tres"]})}),le?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(ce,{className:"h-6 w-6 animate-spin text-primary"})}):V?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(pt,{children:"Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recevoir des notifications"})]}),e.jsx(ht,{checked:V.notifications.enabled,onCheckedChange:_=>I({...V,notifications:{...V.notifications,enabled:_}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(pt,{children:"Sons"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Activer les effets sonores"})]}),e.jsx(ht,{checked:V.sound.enabled,onCheckedChange:_=>I({...V,sound:{...V.sound,enabled:_}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(pt,{children:"Mode sombre"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Th√®me de l'application"})]}),e.jsx(ht,{checked:V.appearance.darkMode,onCheckedChange:_=>I({...V,appearance:{...V.appearance,darkMode:_}})})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(A,{onClick:()=>l(!1),variant:"outline",className:"flex-1",children:"Annuler"}),e.jsx(A,{onClick:C,variant:"default",className:"flex-1",children:"Sauvegarder"})]})]}):null]})}),e.jsx($e,{open:d,onOpenChange:c,children:e.jsxs(Se,{className:"max-w-md",children:[e.jsx(Ee,{children:e.jsxs(Re,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-5 w-5 text-primary"}),"Amis (",j.length,")"]})}),e.jsxs(A,{className:"w-full",onClick:()=>{c(!1),b(!0)},children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),"Ajouter un ami"]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:T?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(ce,{className:"h-6 w-6 animate-spin text-primary"})}):j.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Aucun ami pour le moment"}):j.map(_=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-surface-alt group hover:bg-surface-alt/80 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 cursor-pointer",onClick:()=>{x({id:_.id,username:_.username}),c(!1)},children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/20 flex items-center justify-center",children:e.jsx(Ae,{className:"h-5 w-5 text-primary"})}),e.jsx("div",{className:`absolute bottom-0 right-0 h-3 w-3 rounded-full border-2 border-background ${_.status==="online"?"bg-green-500":"bg-gray-500"}`})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium flex items-center gap-2",children:[_.username,e.jsx(hs,{className:"h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity text-muted-foreground"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ELO: ",_.eloRating]})]})]}),e.jsx(A,{variant:"ghost",size:"sm",onClick:ee=>{ee.stopPropagation(),P(_.id,_.username)},children:e.jsx(ze,{className:"h-4 w-4 text-destructive"})})]},_.id))})]})}),e.jsx($e,{open:h,onOpenChange:b,children:e.jsxs(Se,{children:[e.jsx(Ee,{children:e.jsxs(Re,{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"h-5 w-5 text-primary"}),"Rechercher un joueur"]})}),e.jsx(we,{placeholder:"Entrez un nom d'utilisateur...",value:F,onChange:_=>J(_.target.value),className:"w-full"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:H.length===0&&F.length>=2?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Aucun joueur trouv√©"}):H.map(_=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-surface-alt",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:_.username}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ELO: ",_.eloRating]})]}),e.jsx(A,{size:"sm",className:"bg-primary hover:bg-primary/90",onClick:()=>g(_.id,_.username),disabled:te===_.id,children:te===_.id?e.jsx(ce,{className:"h-4 w-4 animate-spin"}):e.jsx(ss,{className:"h-4 w-4"})})]},_.id))})]})}),e.jsx($e,{open:m,onOpenChange:y,children:e.jsxs(Se,{children:[e.jsx(Ee,{children:e.jsxs(Re,{className:"flex items-center gap-2",children:[e.jsx(it,{className:"h-5 w-5 text-primary"}),"Confidentialit√©"]})}),le?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(ce,{className:"h-6 w-6 animate-spin text-primary"})}):V?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(pt,{children:"Profil public"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tout le monde peut voir votre profil"})]}),e.jsx(ht,{checked:V.privacy.profilePublic,onCheckedChange:_=>I({...V,privacy:{...V.privacy,profilePublic:_}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(pt,{children:"Afficher les statistiques"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Montrer vos stats aux autres"})]}),e.jsx(ht,{checked:V.privacy.showStats,onCheckedChange:_=>I({...V,privacy:{...V.privacy,showStats:_}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(pt,{children:"Demandes d'amis"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Autoriser les demandes d'amis"})]}),e.jsx(ht,{checked:V.privacy.allowFriendRequests,onCheckedChange:_=>I({...V,privacy:{...V.privacy,allowFriendRequests:_}})})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(A,{onClick:()=>y(!1),variant:"outline",className:"flex-1",children:"Annuler"}),e.jsx(A,{onClick:C,variant:"default",className:"flex-1",children:"Sauvegarder"})]})]}):null]})}),e.jsx(Al,{isOpen:!!p,onClose:()=>{x(null),c(!0)},friendId:(p==null?void 0:p.id)||"",friendUsername:(p==null?void 0:p.username)||"",onRemoveFriend:P,canRemove:!0})]})};var be;(function(s){s.assertEqual=n=>{};function t(n){}s.assertIs=t;function r(n){throw new Error}s.assertNever=r,s.arrayToEnum=n=>{const i={};for(const o of n)i[o]=o;return i},s.getValidEnumValues=n=>{const i=s.objectKeys(n).filter(l=>typeof n[n[l]]!="number"),o={};for(const l of i)o[l]=n[l];return s.objectValues(o)},s.objectValues=n=>s.objectKeys(n).map(function(i){return n[i]}),s.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const i=[];for(const o in n)Object.prototype.hasOwnProperty.call(n,o)&&i.push(o);return i},s.find=(n,i)=>{for(const o of n)if(i(o))return o},s.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function a(n,i=" | "){return n.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}s.joinValues=a,s.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(be||(be={}));var _r;(function(s){s.mergeShapes=(t,r)=>({...t,...r})})(_r||(_r={}));const Y=be.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),at=s=>{switch(typeof s){case"undefined":return Y.undefined;case"string":return Y.string;case"number":return Number.isNaN(s)?Y.nan:Y.number;case"boolean":return Y.boolean;case"function":return Y.function;case"bigint":return Y.bigint;case"symbol":return Y.symbol;case"object":return Array.isArray(s)?Y.array:s===null?Y.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?Y.promise:typeof Map<"u"&&s instanceof Map?Y.map:typeof Set<"u"&&s instanceof Set?Y.set:typeof Date<"u"&&s instanceof Date?Y.date:Y.object;default:return Y.unknown}},z=be.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ge extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(i){return i.message},a={_errors:[]},n=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(n);else if(o.code==="invalid_return_type")n(o.returnTypeError);else if(o.code==="invalid_arguments")n(o.argumentsError);else if(o.path.length===0)a._errors.push(r(o));else{let l=a,d=0;for(;d<o.path.length;){const c=o.path[d];d===o.path.length-1?(l[c]=l[c]||{_errors:[]},l[c]._errors.push(r(o))):l[c]=l[c]||{_errors:[]},l=l[c],d++}}};return n(this),a}static assert(t){if(!(t instanceof Ge))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,be.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},a=[];for(const n of this.issues)if(n.path.length>0){const i=n.path[0];r[i]=r[i]||[],r[i].push(t(n))}else a.push(t(n));return{formErrors:a,fieldErrors:r}}get formErrors(){return this.flatten()}}Ge.create=s=>new Ge(s);const Ds=(s,t)=>{let r;switch(s.code){case z.invalid_type:s.received===Y.undefined?r="Required":r=`Expected ${s.expected}, received ${s.received}`;break;case z.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(s.expected,be.jsonStringifyReplacer)}`;break;case z.unrecognized_keys:r=`Unrecognized key(s) in object: ${be.joinValues(s.keys,", ")}`;break;case z.invalid_union:r="Invalid input";break;case z.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${be.joinValues(s.options)}`;break;case z.invalid_enum_value:r=`Invalid enum value. Expected ${be.joinValues(s.options)}, received '${s.received}'`;break;case z.invalid_arguments:r="Invalid function arguments";break;case z.invalid_return_type:r="Invalid function return type";break;case z.invalid_date:r="Invalid date";break;case z.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(r=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?r=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?r=`Invalid input: must end with "${s.validation.endsWith}"`:be.assertNever(s.validation):s.validation!=="regex"?r=`Invalid ${s.validation}`:r="Invalid";break;case z.too_small:s.type==="array"?r=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?r=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?r=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="bigint"?r=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?r=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:r="Invalid input";break;case z.too_big:s.type==="array"?r=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?r=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?r=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?r=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?r=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:r="Invalid input";break;case z.custom:r="Invalid input";break;case z.invalid_intersection_types:r="Intersection results could not be merged";break;case z.not_multiple_of:r=`Number must be a multiple of ${s.multipleOf}`;break;case z.not_finite:r="Number must be finite";break;default:r=t.defaultError,be.assertNever(s)}return{message:r}};let Wl=Ds;function Hl(){return Wl}const Ql=s=>{const{data:t,path:r,errorMaps:a,issueData:n}=s,i=[...r,...n.path||[]],o={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let l="";const d=a.filter(c=>!!c).slice().reverse();for(const c of d)l=c(o,{data:t,defaultError:l}).message;return{...n,path:i,message:l}};function W(s,t){const r=Hl(),a=Ql({issueData:t,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,r,r===Ds?void 0:Ds].filter(n=>!!n)});s.common.issues.push(a)}class Be{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const a=[];for(const n of r){if(n.status==="aborted")return ae;n.status==="dirty"&&t.dirty(),a.push(n.value)}return{status:t.value,value:a}}static async mergeObjectAsync(t,r){const a=[];for(const n of r){const i=await n.key,o=await n.value;a.push({key:i,value:o})}return Be.mergeObjectSync(t,a)}static mergeObjectSync(t,r){const a={};for(const n of r){const{key:i,value:o}=n;if(i.status==="aborted"||o.status==="aborted")return ae;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||n.alwaysSet)&&(a[i.value]=o.value)}return{status:t.value,value:a}}}const ae=Object.freeze({status:"aborted"}),Ut=s=>({status:"dirty",value:s}),Ue=s=>({status:"valid",value:s}),kr=s=>s.status==="aborted",Sr=s=>s.status==="dirty",Mt=s=>s.status==="valid",ls=s=>typeof Promise<"u"&&s instanceof Promise;var X;(function(s){s.errToObj=t=>typeof t=="string"?{message:t}:t||{},s.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(X||(X={}));class ct{constructor(t,r,a,n){this._cachedPath=[],this.parent=t,this.data=r,this._path=a,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Er=(s,t)=>{if(Mt(t))return{success:!0,data:t.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Ge(s.common.issues);return this._error=r,this._error}}};function de(s){if(!s)return{};const{errorMap:t,invalid_type_error:r,required_error:a,description:n}=s;if(t&&(r||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:n}:{errorMap:(o,l)=>{const{message:d}=s;return o.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:d??a??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:d??r??l.defaultError}},description:n}}class ge{get description(){return this._def.description}_getType(t){return at(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:at(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Be,ctx:{common:t.parent.common,data:t.data,parsedType:at(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(ls(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const a=this.safeParse(t,r);if(a.success)return a.data;throw a.error}safeParse(t,r){const a={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:at(t)},n=this._parseSync({data:t,path:a.path,parent:a});return Er(a,n)}"~validate"(t){var a,n;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:at(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:r});return Mt(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(n=(a=i==null?void 0:i.message)==null?void 0:a.toLowerCase())!=null&&n.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(i=>Mt(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(t,r){const a=await this.safeParseAsync(t,r);if(a.success)return a.data;throw a.error}async safeParseAsync(t,r){const a={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:at(t)},n=this._parse({data:t,path:a.path,parent:a}),i=await(ls(n)?n:Promise.resolve(n));return Er(a,i)}refine(t,r){const a=n=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,i)=>{const o=t(n),l=()=>i.addIssue({code:z.custom,...a(n)});return typeof Promise<"u"&&o instanceof Promise?o.then(d=>d?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((a,n)=>t(a)?!0:(n.addIssue(typeof r=="function"?r(a,n):r),!1))}_refinement(t){return new Pt({schema:this,typeName:ne.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return lt.create(this,this._def)}nullable(){return Dt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Qe.create(this)}promise(){return ms.create(this,this._def)}or(t){return ds.create([this,t],this._def)}and(t){return us.create(this,t,this._def)}transform(t){return new Pt({...de(this._def),schema:this,typeName:ne.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new Ls({...de(this._def),innerType:this,defaultValue:r,typeName:ne.ZodDefault})}brand(){return new yc({typeName:ne.ZodBranded,type:this,...de(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new zs({...de(this._def),innerType:this,catchValue:r,typeName:ne.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return Js.create(this,t)}readonly(){return Fs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Jl=/^c[^\s-]{8,}$/i,Yl=/^[0-9a-z]+$/,Kl=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Xl=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ec=/^[a-z0-9_-]{21}$/i,tc=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,sc=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,rc=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ac="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let _s;const nc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ic=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,oc=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,lc=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cc=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dc=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Qa="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",uc=new RegExp(`^${Qa}$`);function Ja(s){let t="[0-5]\\d";s.precision?t=`${t}\\.\\d{${s.precision}}`:s.precision==null&&(t=`${t}(\\.\\d+)?`);const r=s.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function mc(s){return new RegExp(`^${Ja(s)}$`)}function xc(s){let t=`${Qa}T${Ja(s)}`;const r=[];return r.push(s.local?"Z?":"Z"),s.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function hc(s,t){return!!((t==="v4"||!t)&&nc.test(s)||(t==="v6"||!t)&&oc.test(s))}function pc(s,t){if(!tc.test(s))return!1;try{const[r]=s.split(".");if(!r)return!1;const a=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(a));return!(typeof n!="object"||n===null||"typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||t&&n.alg!==t)}catch{return!1}}function fc(s,t){return!!((t==="v4"||!t)&&ic.test(s)||(t==="v6"||!t)&&lc.test(s))}class nt extends ge{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Y.string){const i=this._getOrReturnCtx(t);return W(i,{code:z.invalid_type,expected:Y.string,received:i.parsedType}),ae}const a=new Be;let n;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(n=this._getOrReturnCtx(t,n),W(n,{code:z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),a.dirty());else if(i.kind==="max")t.data.length>i.value&&(n=this._getOrReturnCtx(t,n),W(n,{code:z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),a.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(n=this._getOrReturnCtx(t,n),o?W(n,{code:z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&W(n,{code:z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),a.dirty())}else if(i.kind==="email")rc.test(t.data)||(n=this._getOrReturnCtx(t,n),W(n,{validation:"email",code:z.invalid_string,message:i.message}),a.dirty());else if(i.kind==="emoji")_s||(_s=new RegExp(ac,"u")),_s.test(t.data)||(n=this._getOrReturnCtx(t,n),W(n,{validation:"emoji",code:z.invalid_string,message:i.message}),a.dirty());else if(i.kind==="uuid")Xl.test(t.data)||(n=this._getOrReturnCtx(t,n),W(n,{validation:"uuid",code:z.invalid_string,message:i.message}),a.dirty());else if(i.kind==="nanoid")ec.test(t.data)||(n=this._getOrReturnCtx(t,n),W(n,{validation:"nanoid",code:z.invalid_string,message:i.message}),a.dirty());else if(i.kind==="cuid")Jl.test(t.data)||(n=this._getOrReturnCtx(t,n),W(n,{validation:"cuid",code:z.invalid_string,message:i.message}),a.dirty());else if(i.kind==="cuid2")Yl.test(t.data)||(n=this._getOrReturnCtx(t,n),W(n,{validation:"cuid2",code:z.invalid_string,message:i.message}),a.dirty());else if(i.kind==="ulid")Kl.test(t.data)||(n=this._getOrReturnCtx(t,n),W(n,{validation:"ulid",code:z.invalid_string,message:i.message}),a.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{n=this._getOrReturnCtx(t,n),W(n,{validation:"url",code:z.invalid_string,message:i.message}),a.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(n=this._getOrReturnCtx(t,n),W(n,{validation:"regex",code:z.invalid_string,message:i.message}),a.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(t,n),W(n,{code:z.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),a.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(n=this._getOrReturnCtx(t,n),W(n,{code:z.invalid_string,validation:{startsWith:i.value},message:i.message}),a.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(n=this._getOrReturnCtx(t,n),W(n,{code:z.invalid_string,validation:{endsWith:i.value},message:i.message}),a.dirty()):i.kind==="datetime"?xc(i).test(t.data)||(n=this._getOrReturnCtx(t,n),W(n,{code:z.invalid_string,validation:"datetime",message:i.message}),a.dirty()):i.kind==="date"?uc.test(t.data)||(n=this._getOrReturnCtx(t,n),W(n,{code:z.invalid_string,validation:"date",message:i.message}),a.dirty()):i.kind==="time"?mc(i).test(t.data)||(n=this._getOrReturnCtx(t,n),W(n,{code:z.invalid_string,validation:"time",message:i.message}),a.dirty()):i.kind==="duration"?sc.test(t.data)||(n=this._getOrReturnCtx(t,n),W(n,{validation:"duration",code:z.invalid_string,message:i.message}),a.dirty()):i.kind==="ip"?hc(t.data,i.version)||(n=this._getOrReturnCtx(t,n),W(n,{validation:"ip",code:z.invalid_string,message:i.message}),a.dirty()):i.kind==="jwt"?pc(t.data,i.alg)||(n=this._getOrReturnCtx(t,n),W(n,{validation:"jwt",code:z.invalid_string,message:i.message}),a.dirty()):i.kind==="cidr"?fc(t.data,i.version)||(n=this._getOrReturnCtx(t,n),W(n,{validation:"cidr",code:z.invalid_string,message:i.message}),a.dirty()):i.kind==="base64"?cc.test(t.data)||(n=this._getOrReturnCtx(t,n),W(n,{validation:"base64",code:z.invalid_string,message:i.message}),a.dirty()):i.kind==="base64url"?dc.test(t.data)||(n=this._getOrReturnCtx(t,n),W(n,{validation:"base64url",code:z.invalid_string,message:i.message}),a.dirty()):be.assertNever(i);return{status:a.value,value:t.data}}_regex(t,r,a){return this.refinement(n=>t.test(n),{validation:r,code:z.invalid_string,...X.errToObj(a)})}_addCheck(t){return new nt({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...X.errToObj(t)})}url(t){return this._addCheck({kind:"url",...X.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...X.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...X.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...X.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...X.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...X.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...X.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...X.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...X.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...X.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...X.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...X.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...X.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...X.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...X.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...X.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...X.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...X.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...X.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...X.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...X.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...X.errToObj(r)})}nonempty(t){return this.min(1,X.errToObj(t))}trim(){return new nt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new nt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new nt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}nt.create=s=>new nt({checks:[],typeName:ne.ZodString,coerce:(s==null?void 0:s.coerce)??!1,...de(s)});function gc(s,t){const r=(s.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,n=r>a?r:a,i=Number.parseInt(s.toFixed(n).replace(".","")),o=Number.parseInt(t.toFixed(n).replace(".",""));return i%o/10**n}class Wt extends ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Y.number){const i=this._getOrReturnCtx(t);return W(i,{code:z.invalid_type,expected:Y.number,received:i.parsedType}),ae}let a;const n=new Be;for(const i of this._def.checks)i.kind==="int"?be.isInteger(t.data)||(a=this._getOrReturnCtx(t,a),W(a,{code:z.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(a=this._getOrReturnCtx(t,a),W(a,{code:z.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(a=this._getOrReturnCtx(t,a),W(a,{code:z.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?gc(t.data,i.value)!==0&&(a=this._getOrReturnCtx(t,a),W(a,{code:z.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(a=this._getOrReturnCtx(t,a),W(a,{code:z.not_finite,message:i.message}),n.dirty()):be.assertNever(i);return{status:n.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,X.toString(r))}gt(t,r){return this.setLimit("min",t,!1,X.toString(r))}lte(t,r){return this.setLimit("max",t,!0,X.toString(r))}lt(t,r){return this.setLimit("max",t,!1,X.toString(r))}setLimit(t,r,a,n){return new Wt({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:a,message:X.toString(n)}]})}_addCheck(t){return new Wt({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:X.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:X.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:X.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:X.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:X.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:X.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:X.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:X.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:X.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&be.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(r===null||a.value>r)&&(r=a.value):a.kind==="max"&&(t===null||a.value<t)&&(t=a.value)}return Number.isFinite(r)&&Number.isFinite(t)}}Wt.create=s=>new Wt({checks:[],typeName:ne.ZodNumber,coerce:(s==null?void 0:s.coerce)||!1,...de(s)});class Ht extends ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Y.bigint)return this._getInvalidInput(t);let a;const n=new Be;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(a=this._getOrReturnCtx(t,a),W(a,{code:z.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(a=this._getOrReturnCtx(t,a),W(a,{code:z.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(a=this._getOrReturnCtx(t,a),W(a,{code:z.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):be.assertNever(i);return{status:n.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return W(r,{code:z.invalid_type,expected:Y.bigint,received:r.parsedType}),ae}gte(t,r){return this.setLimit("min",t,!0,X.toString(r))}gt(t,r){return this.setLimit("min",t,!1,X.toString(r))}lte(t,r){return this.setLimit("max",t,!0,X.toString(r))}lt(t,r){return this.setLimit("max",t,!1,X.toString(r))}setLimit(t,r,a,n){return new Ht({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:a,message:X.toString(n)}]})}_addCheck(t){return new Ht({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:X.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:X.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:X.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:X.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:X.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Ht.create=s=>new Ht({checks:[],typeName:ne.ZodBigInt,coerce:(s==null?void 0:s.coerce)??!1,...de(s)});class Rr extends ge{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Y.boolean){const a=this._getOrReturnCtx(t);return W(a,{code:z.invalid_type,expected:Y.boolean,received:a.parsedType}),ae}return Ue(t.data)}}Rr.create=s=>new Rr({typeName:ne.ZodBoolean,coerce:(s==null?void 0:s.coerce)||!1,...de(s)});class cs extends ge{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Y.date){const i=this._getOrReturnCtx(t);return W(i,{code:z.invalid_type,expected:Y.date,received:i.parsedType}),ae}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return W(i,{code:z.invalid_date}),ae}const a=new Be;let n;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(n=this._getOrReturnCtx(t,n),W(n,{code:z.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),a.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(n=this._getOrReturnCtx(t,n),W(n,{code:z.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),a.dirty()):be.assertNever(i);return{status:a.value,value:new Date(t.data.getTime())}}_addCheck(t){return new cs({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:X.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:X.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}cs.create=s=>new cs({checks:[],coerce:(s==null?void 0:s.coerce)||!1,typeName:ne.ZodDate,...de(s)});class $r extends ge{_parse(t){if(this._getType(t)!==Y.symbol){const a=this._getOrReturnCtx(t);return W(a,{code:z.invalid_type,expected:Y.symbol,received:a.parsedType}),ae}return Ue(t.data)}}$r.create=s=>new $r({typeName:ne.ZodSymbol,...de(s)});class Ar extends ge{_parse(t){if(this._getType(t)!==Y.undefined){const a=this._getOrReturnCtx(t);return W(a,{code:z.invalid_type,expected:Y.undefined,received:a.parsedType}),ae}return Ue(t.data)}}Ar.create=s=>new Ar({typeName:ne.ZodUndefined,...de(s)});class Tr extends ge{_parse(t){if(this._getType(t)!==Y.null){const a=this._getOrReturnCtx(t);return W(a,{code:z.invalid_type,expected:Y.null,received:a.parsedType}),ae}return Ue(t.data)}}Tr.create=s=>new Tr({typeName:ne.ZodNull,...de(s)});class Mr extends ge{constructor(){super(...arguments),this._any=!0}_parse(t){return Ue(t.data)}}Mr.create=s=>new Mr({typeName:ne.ZodAny,...de(s)});class Or extends ge{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Ue(t.data)}}Or.create=s=>new Or({typeName:ne.ZodUnknown,...de(s)});class dt extends ge{_parse(t){const r=this._getOrReturnCtx(t);return W(r,{code:z.invalid_type,expected:Y.never,received:r.parsedType}),ae}}dt.create=s=>new dt({typeName:ne.ZodNever,...de(s)});class Pr extends ge{_parse(t){if(this._getType(t)!==Y.undefined){const a=this._getOrReturnCtx(t);return W(a,{code:z.invalid_type,expected:Y.void,received:a.parsedType}),ae}return Ue(t.data)}}Pr.create=s=>new Pr({typeName:ne.ZodVoid,...de(s)});class Qe extends ge{_parse(t){const{ctx:r,status:a}=this._processInputParams(t),n=this._def;if(r.parsedType!==Y.array)return W(r,{code:z.invalid_type,expected:Y.array,received:r.parsedType}),ae;if(n.exactLength!==null){const o=r.data.length>n.exactLength.value,l=r.data.length<n.exactLength.value;(o||l)&&(W(r,{code:o?z.too_big:z.too_small,minimum:l?n.exactLength.value:void 0,maximum:o?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),a.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(W(r,{code:z.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),a.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(W(r,{code:z.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),a.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>n.type._parseAsync(new ct(r,o,r.path,l)))).then(o=>Be.mergeArray(a,o));const i=[...r.data].map((o,l)=>n.type._parseSync(new ct(r,o,r.path,l)));return Be.mergeArray(a,i)}get element(){return this._def.type}min(t,r){return new Qe({...this._def,minLength:{value:t,message:X.toString(r)}})}max(t,r){return new Qe({...this._def,maxLength:{value:t,message:X.toString(r)}})}length(t,r){return new Qe({...this._def,exactLength:{value:t,message:X.toString(r)}})}nonempty(t){return this.min(1,t)}}Qe.create=(s,t)=>new Qe({type:s,minLength:null,maxLength:null,exactLength:null,typeName:ne.ZodArray,...de(t)});function _t(s){if(s instanceof ke){const t={};for(const r in s.shape){const a=s.shape[r];t[r]=lt.create(_t(a))}return new ke({...s._def,shape:()=>t})}else return s instanceof Qe?new Qe({...s._def,type:_t(s.element)}):s instanceof lt?lt.create(_t(s.unwrap())):s instanceof Dt?Dt.create(_t(s.unwrap())):s instanceof vt?vt.create(s.items.map(t=>_t(t))):s}class ke extends ge{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=be.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==Y.object){const c=this._getOrReturnCtx(t);return W(c,{code:z.invalid_type,expected:Y.object,received:c.parsedType}),ae}const{status:a,ctx:n}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof dt&&this._def.unknownKeys==="strip"))for(const c in n.data)o.includes(c)||l.push(c);const d=[];for(const c of o){const m=i[c],y=n.data[c];d.push({key:{status:"valid",value:c},value:m._parse(new ct(n,y,n.path,c)),alwaysSet:c in n.data})}if(this._def.catchall instanceof dt){const c=this._def.unknownKeys;if(c==="passthrough")for(const m of l)d.push({key:{status:"valid",value:m},value:{status:"valid",value:n.data[m]}});else if(c==="strict")l.length>0&&(W(n,{code:z.unrecognized_keys,keys:l}),a.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const m of l){const y=n.data[m];d.push({key:{status:"valid",value:m},value:c._parse(new ct(n,y,n.path,m)),alwaysSet:m in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const c=[];for(const m of d){const y=await m.key,h=await m.value;c.push({key:y,value:h,alwaysSet:m.alwaysSet})}return c}).then(c=>Be.mergeObjectSync(a,c)):Be.mergeObjectSync(a,d)}get shape(){return this._def.shape()}strict(t){return X.errToObj,new ke({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,a)=>{var i,o;const n=((o=(i=this._def).errorMap)==null?void 0:o.call(i,r,a).message)??a.defaultError;return r.code==="unrecognized_keys"?{message:X.errToObj(t).message??n}:{message:n}}}:{}})}strip(){return new ke({...this._def,unknownKeys:"strip"})}passthrough(){return new ke({...this._def,unknownKeys:"passthrough"})}extend(t){return new ke({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new ke({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ne.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new ke({...this._def,catchall:t})}pick(t){const r={};for(const a of be.objectKeys(t))t[a]&&this.shape[a]&&(r[a]=this.shape[a]);return new ke({...this._def,shape:()=>r})}omit(t){const r={};for(const a of be.objectKeys(this.shape))t[a]||(r[a]=this.shape[a]);return new ke({...this._def,shape:()=>r})}deepPartial(){return _t(this)}partial(t){const r={};for(const a of be.objectKeys(this.shape)){const n=this.shape[a];t&&!t[a]?r[a]=n:r[a]=n.optional()}return new ke({...this._def,shape:()=>r})}required(t){const r={};for(const a of be.objectKeys(this.shape))if(t&&!t[a])r[a]=this.shape[a];else{let i=this.shape[a];for(;i instanceof lt;)i=i._def.innerType;r[a]=i}return new ke({...this._def,shape:()=>r})}keyof(){return Ya(be.objectKeys(this.shape))}}ke.create=(s,t)=>new ke({shape:()=>s,unknownKeys:"strip",catchall:dt.create(),typeName:ne.ZodObject,...de(t)});ke.strictCreate=(s,t)=>new ke({shape:()=>s,unknownKeys:"strict",catchall:dt.create(),typeName:ne.ZodObject,...de(t)});ke.lazycreate=(s,t)=>new ke({shape:s,unknownKeys:"strip",catchall:dt.create(),typeName:ne.ZodObject,...de(t)});class ds extends ge{_parse(t){const{ctx:r}=this._processInputParams(t),a=this._def.options;function n(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new Ge(l.ctx.common.issues));return W(r,{code:z.invalid_union,unionErrors:o}),ae}if(r.common.async)return Promise.all(a.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(n);{let i;const o=[];for(const d of a){const c={...r,common:{...r.common,issues:[]},parent:null},m=d._parseSync({data:r.data,path:r.path,parent:c});if(m.status==="valid")return m;m.status==="dirty"&&!i&&(i={result:m,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(d=>new Ge(d));return W(r,{code:z.invalid_union,unionErrors:l}),ae}}get options(){return this._def.options}}ds.create=(s,t)=>new ds({options:s,typeName:ne.ZodUnion,...de(t)});function Is(s,t){const r=at(s),a=at(t);if(s===t)return{valid:!0,data:s};if(r===Y.object&&a===Y.object){const n=be.objectKeys(t),i=be.objectKeys(s).filter(l=>n.indexOf(l)!==-1),o={...s,...t};for(const l of i){const d=Is(s[l],t[l]);if(!d.valid)return{valid:!1};o[l]=d.data}return{valid:!0,data:o}}else if(r===Y.array&&a===Y.array){if(s.length!==t.length)return{valid:!1};const n=[];for(let i=0;i<s.length;i++){const o=s[i],l=t[i],d=Is(o,l);if(!d.valid)return{valid:!1};n.push(d.data)}return{valid:!0,data:n}}else return r===Y.date&&a===Y.date&&+s==+t?{valid:!0,data:s}:{valid:!1}}class us extends ge{_parse(t){const{status:r,ctx:a}=this._processInputParams(t),n=(i,o)=>{if(kr(i)||kr(o))return ae;const l=Is(i.value,o.value);return l.valid?((Sr(i)||Sr(o))&&r.dirty(),{status:r.value,value:l.data}):(W(a,{code:z.invalid_intersection_types}),ae)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([i,o])=>n(i,o)):n(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}us.create=(s,t,r)=>new us({left:s,right:t,typeName:ne.ZodIntersection,...de(r)});class vt extends ge{_parse(t){const{status:r,ctx:a}=this._processInputParams(t);if(a.parsedType!==Y.array)return W(a,{code:z.invalid_type,expected:Y.array,received:a.parsedType}),ae;if(a.data.length<this._def.items.length)return W(a,{code:z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ae;!this._def.rest&&a.data.length>this._def.items.length&&(W(a,{code:z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...a.data].map((o,l)=>{const d=this._def.items[l]||this._def.rest;return d?d._parse(new ct(a,o,a.path,l)):null}).filter(o=>!!o);return a.common.async?Promise.all(i).then(o=>Be.mergeArray(r,o)):Be.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new vt({...this._def,rest:t})}}vt.create=(s,t)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new vt({items:s,typeName:ne.ZodTuple,rest:null,...de(t)})};class Dr extends ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:a}=this._processInputParams(t);if(a.parsedType!==Y.map)return W(a,{code:z.invalid_type,expected:Y.map,received:a.parsedType}),ae;const n=this._def.keyType,i=this._def.valueType,o=[...a.data.entries()].map(([l,d],c)=>({key:n._parse(new ct(a,l,a.path,[c,"key"])),value:i._parse(new ct(a,d,a.path,[c,"value"]))}));if(a.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const d of o){const c=await d.key,m=await d.value;if(c.status==="aborted"||m.status==="aborted")return ae;(c.status==="dirty"||m.status==="dirty")&&r.dirty(),l.set(c.value,m.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const d of o){const c=d.key,m=d.value;if(c.status==="aborted"||m.status==="aborted")return ae;(c.status==="dirty"||m.status==="dirty")&&r.dirty(),l.set(c.value,m.value)}return{status:r.value,value:l}}}}Dr.create=(s,t,r)=>new Dr({valueType:t,keyType:s,typeName:ne.ZodMap,...de(r)});class Qt extends ge{_parse(t){const{status:r,ctx:a}=this._processInputParams(t);if(a.parsedType!==Y.set)return W(a,{code:z.invalid_type,expected:Y.set,received:a.parsedType}),ae;const n=this._def;n.minSize!==null&&a.data.size<n.minSize.value&&(W(a,{code:z.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&a.data.size>n.maxSize.value&&(W(a,{code:z.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());const i=this._def.valueType;function o(d){const c=new Set;for(const m of d){if(m.status==="aborted")return ae;m.status==="dirty"&&r.dirty(),c.add(m.value)}return{status:r.value,value:c}}const l=[...a.data.values()].map((d,c)=>i._parse(new ct(a,d,a.path,c)));return a.common.async?Promise.all(l).then(d=>o(d)):o(l)}min(t,r){return new Qt({...this._def,minSize:{value:t,message:X.toString(r)}})}max(t,r){return new Qt({...this._def,maxSize:{value:t,message:X.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}Qt.create=(s,t)=>new Qt({valueType:s,minSize:null,maxSize:null,typeName:ne.ZodSet,...de(t)});class Ir extends ge{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Ir.create=(s,t)=>new Ir({getter:s,typeName:ne.ZodLazy,...de(t)});class Lr extends ge{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return W(r,{received:r.data,code:z.invalid_literal,expected:this._def.value}),ae}return{status:"valid",value:t.data}}get value(){return this._def.value}}Lr.create=(s,t)=>new Lr({value:s,typeName:ne.ZodLiteral,...de(t)});function Ya(s,t){return new Ot({values:s,typeName:ne.ZodEnum,...de(t)})}class Ot extends ge{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),a=this._def.values;return W(r,{expected:be.joinValues(a),received:r.parsedType,code:z.invalid_type}),ae}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),a=this._def.values;return W(r,{received:r.data,code:z.invalid_enum_value,options:a}),ae}return Ue(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return Ot.create(t,{...this._def,...r})}exclude(t,r=this._def){return Ot.create(this.options.filter(a=>!t.includes(a)),{...this._def,...r})}}Ot.create=Ya;class zr extends ge{_parse(t){const r=be.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(t);if(a.parsedType!==Y.string&&a.parsedType!==Y.number){const n=be.objectValues(r);return W(a,{expected:be.joinValues(n),received:a.parsedType,code:z.invalid_type}),ae}if(this._cache||(this._cache=new Set(be.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const n=be.objectValues(r);return W(a,{received:a.data,code:z.invalid_enum_value,options:n}),ae}return Ue(t.data)}get enum(){return this._def.values}}zr.create=(s,t)=>new zr({values:s,typeName:ne.ZodNativeEnum,...de(t)});class ms extends ge{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Y.promise&&r.common.async===!1)return W(r,{code:z.invalid_type,expected:Y.promise,received:r.parsedType}),ae;const a=r.parsedType===Y.promise?r.data:Promise.resolve(r.data);return Ue(a.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}}ms.create=(s,t)=>new ms({type:s,typeName:ne.ZodPromise,...de(t)});class Pt extends ge{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ne.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:a}=this._processInputParams(t),n=this._def.effect||null,i={addIssue:o=>{W(a,o),o.fatal?r.abort():r.dirty()},get path(){return a.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){const o=n.transform(a.data,i);if(a.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return ae;const d=await this._def.schema._parseAsync({data:l,path:a.path,parent:a});return d.status==="aborted"?ae:d.status==="dirty"||r.value==="dirty"?Ut(d.value):d});{if(r.value==="aborted")return ae;const l=this._def.schema._parseSync({data:o,path:a.path,parent:a});return l.status==="aborted"?ae:l.status==="dirty"||r.value==="dirty"?Ut(l.value):l}}if(n.type==="refinement"){const o=l=>{const d=n.refinement(l,i);if(a.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(a.common.async===!1){const l=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return l.status==="aborted"?ae:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(l=>l.status==="aborted"?ae:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(n.type==="transform")if(a.common.async===!1){const o=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!Mt(o))return ae;const l=n.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(o=>Mt(o)?Promise.resolve(n.transform(o.value,i)).then(l=>({status:r.value,value:l})):ae);be.assertNever(n)}}Pt.create=(s,t,r)=>new Pt({schema:s,typeName:ne.ZodEffects,effect:t,...de(r)});Pt.createWithPreprocess=(s,t,r)=>new Pt({schema:t,effect:{type:"preprocess",transform:s},typeName:ne.ZodEffects,...de(r)});class lt extends ge{_parse(t){return this._getType(t)===Y.undefined?Ue(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}lt.create=(s,t)=>new lt({innerType:s,typeName:ne.ZodOptional,...de(t)});class Dt extends ge{_parse(t){return this._getType(t)===Y.null?Ue(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Dt.create=(s,t)=>new Dt({innerType:s,typeName:ne.ZodNullable,...de(t)});class Ls extends ge{_parse(t){const{ctx:r}=this._processInputParams(t);let a=r.data;return r.parsedType===Y.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Ls.create=(s,t)=>new Ls({innerType:s,typeName:ne.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...de(t)});class zs extends ge{_parse(t){const{ctx:r}=this._processInputParams(t),a={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return ls(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ge(a.common.issues)},input:a.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Ge(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}zs.create=(s,t)=>new zs({innerType:s,typeName:ne.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...de(t)});class Fr extends ge{_parse(t){if(this._getType(t)!==Y.nan){const a=this._getOrReturnCtx(t);return W(a,{code:z.invalid_type,expected:Y.nan,received:a.parsedType}),ae}return{status:"valid",value:t.data}}}Fr.create=s=>new Fr({typeName:ne.ZodNaN,...de(s)});class yc extends ge{_parse(t){const{ctx:r}=this._processInputParams(t),a=r.data;return this._def.type._parse({data:a,path:r.path,parent:r})}unwrap(){return this._def.type}}class Js extends ge{_parse(t){const{status:r,ctx:a}=this._processInputParams(t);if(a.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return i.status==="aborted"?ae:i.status==="dirty"?(r.dirty(),Ut(i.value)):this._def.out._parseAsync({data:i.value,path:a.path,parent:a})})();{const n=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return n.status==="aborted"?ae:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:a.path,parent:a})}}static create(t,r){return new Js({in:t,out:r,typeName:ne.ZodPipeline})}}class Fs extends ge{_parse(t){const r=this._def.innerType._parse(t),a=n=>(Mt(n)&&(n.value=Object.freeze(n.value)),n);return ls(r)?r.then(n=>a(n)):a(r)}unwrap(){return this._def.innerType}}Fs.create=(s,t)=>new Fs({innerType:s,typeName:ne.ZodReadonly,...de(t)});var ne;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(ne||(ne={}));const Xe=nt.create;dt.create;Qe.create;const Ys=ke.create;ds.create;us.create;vt.create;Ot.create;ms.create;lt.create;Dt.create;const bc=Ys({email:Xe().email("Adresse email invalide"),password:Xe().min(6,"Le mot de passe doit contenir au moins 6 caract√®res")}),vc=Ys({username:Xe().min(3,"Le pseudo doit contenir au moins 3 caract√®res").max(20,"Le pseudo ne peut pas d√©passer 20 caract√®res"),email:Xe().email("Adresse email invalide"),password:Xe().min(6,"Le mot de passe doit contenir au moins 6 caract√®res"),confirmPassword:Xe()}).refine(s=>s.password===s.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),jc=()=>{const[s,t]=u.useState(!0),[r,a]=u.useState(!1),[n,i]=u.useState(!1),[o,l]=u.useState(null),[d,c]=u.useState({}),[m,y]=u.useState(""),[h,b]=u.useState(""),[p,x]=u.useState(""),[j,v]=u.useState(""),[M,U]=u.useState(!1),[V,I]=u.useState(""),[H,k]=u.useState(!1),{user:F,login:J,signup:f}=qe(),D=jt(),T=qs();u.useEffect(()=>{var te,se;if(F){const ue=((se=(te=T.state)==null?void 0:te.from)==null?void 0:se.pathname)||"/";D(ue,{replace:!0})}},[F,D,T]);const Z=()=>{y(""),b(""),x(""),v(""),l(null),c({}),U(!1),I(""),k(!1)},le=async te=>{te.preventDefault(),l(null),c({});try{s?bc.parse({email:m,password:h}):vc.parse({username:j,email:m,password:h,confirmPassword:p})}catch(se){if(se instanceof Ge){const ue={};se.errors.forEach($=>{$.path[0]&&(ue[$.path[0]]=$.message)}),c(ue);return}}i(!0);try{if(s){const se=await J(m,h);se.error&&l(se.error)}else{const se=await f(m,h,j);se.error&&l(se.error)}}finally{i(!1)}},ve=async()=>{if(confirm(`‚ö†Ô∏è Cr√©er un compte administrateur de test ?

Email: admin@test.com
Password: admin123`)){i(!0);try{const te=await f("admin@test.com","admin123","Admin");if(te.error){w({title:"Erreur",description:te.error,variant:"destructive"});return}await new Promise($=>setTimeout($,2e3));const ue=os().currentUser;if(ue){const $=E(R,`users/${ue.uid}`);await fe($,{role:"admin"}),w({title:"‚úÖ Compte admin cr√©√©!",description:"Email: admin@test.com | Password: admin123"}),setTimeout(()=>{D("/admin")},1500)}}catch(te){console.error("Erreur cr√©ation admin:",te),w({title:"Erreur",description:te.message||"Impossible de cr√©er le compte admin",variant:"destructive"})}finally{i(!1)}}},me=()=>{t(!s),Z()},K=async te=>{te.preventDefault(),l(null),c({});try{Xe().email().parse(V)}catch{c({resetEmail:"Adresse email invalide"});return}i(!0);try{const se=os();await Ni(se,V),k(!0)}catch(se){se.code==="auth/user-not-found"?l("Aucun compte avec cet email"):l("Une erreur est survenue. Veuillez r√©essayer.")}finally{i(!1)}};return e.jsxs("div",{className:"flex min-h-screen items-center justify-center bg-background p-4",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute left-1/4 top-1/4 h-64 w-64 rounded-full bg-primary/5 blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 h-64 w-64 rounded-full bg-secondary/5 blur-3xl"})]}),e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative z-10 w-full max-w-md",children:[e.jsxs(L.div,{initial:{scale:.8},animate:{scale:1},className:"mb-8 text-center",children:[e.jsx(L.span,{animate:{rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0},className:"mb-4 inline-block text-6xl",children:"‚öΩ"}),e.jsxs("h1",{className:"text-3xl font-bold text-foreground",children:["Baby-Foot ",e.jsx("span",{className:"text-primary text-glow-cyan",children:"App"})]})]}),e.jsxs(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"mb-4",children:[e.jsxs(A,{onClick:ve,disabled:n,className:"w-full bg-yellow-600 hover:bg-yellow-700",size:"sm",children:[e.jsx(it,{className:"mr-2 h-4 w-4"}),"üîß Cr√©er un compte admin de test"]}),e.jsx("p",{className:"text-xs text-center text-muted-foreground mt-1",children:"‚ö†Ô∏è Bouton de d√©veloppement - √Ä supprimer en production"})]}),e.jsxs(O,{className:"border-border/50 bg-card/80 backdrop-blur-xl",children:[e.jsxs(he,{className:"text-center",children:[e.jsx(pe,{className:"text-2xl",children:M?"Mot de passe oubli√©":s?"Connexion":"Inscription"}),e.jsx(Zs,{children:M?"Entrez votre email pour r√©initialiser votre mot de passe":s?"Connectez-vous pour acc√©der √† votre compte":"Cr√©ez votre compte pour rejoindre la communaut√©"})]}),e.jsxs(B,{children:[M?e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[H?e.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"rounded-lg bg-green-500/10 p-4 text-center",children:[e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400",children:["‚úì Un email de r√©initialisation a √©t√© envoy√© √† ",V]}),e.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"V√©rifiez votre bo√Æte mail (et les spams)"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(or,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(we,{type:"email",placeholder:"Email",value:V,onChange:te=>I(te.target.value),className:"pl-10",disabled:n})]}),d.resetEmail&&e.jsx("p",{className:"text-xs text-destructive",children:d.resetEmail})]}),o&&e.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 rounded-lg bg-destructive/10 p-3 text-sm text-destructive",children:[e.jsx(is,{className:"h-4 w-4 shrink-0"}),o]}),e.jsx(A,{type:"submit",className:"w-full",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi en cours..."]}):"Envoyer le lien de r√©initialisation"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{type:"button",onClick:()=>{U(!1),I(""),k(!1),l(null),c({})},className:"text-sm text-muted-foreground hover:text-foreground",disabled:n,children:"‚Üê Retour √† la connexion"})})]}):e.jsxs("form",{onSubmit:le,className:"space-y-4",children:[e.jsx(He,{mode:"wait",children:!s&&e.jsxs(L.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ha,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(we,{type:"text",placeholder:"Pseudo",value:j,onChange:te=>v(te.target.value),className:"pl-10",disabled:n})]}),d.username&&e.jsx("p",{className:"text-xs text-destructive",children:d.username})]},"username")}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(or,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(we,{type:"email",placeholder:"Email",value:m,onChange:te=>y(te.target.value),className:"pl-10",disabled:n})]}),d.email&&e.jsx("p",{className:"text-xs text-destructive",children:d.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(gt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(we,{type:r?"text":"password",placeholder:"Mot de passe",value:h,onChange:te=>b(te.target.value),className:"pl-10 pr-10",disabled:n}),e.jsx("button",{type:"button",onClick:()=>a(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:r?e.jsx(va,{className:"h-4 w-4"}):e.jsx(hs,{className:"h-4 w-4"})})]}),d.password&&e.jsx("p",{className:"text-xs text-destructive",children:d.password})]}),e.jsx(He,{mode:"wait",children:!s&&e.jsxs(L.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(gt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(we,{type:r?"text":"password",placeholder:"Confirmer le mot de passe",value:p,onChange:te=>x(te.target.value),className:"pl-10",disabled:n})]}),d.confirmPassword&&e.jsx("p",{className:"text-xs text-destructive",children:d.confirmPassword})]},"confirmPassword")}),e.jsx(He,{children:o&&e.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center gap-2 rounded-lg bg-destructive/10 p-3 text-sm text-destructive",children:[e.jsx(is,{className:"h-4 w-4 shrink-0"}),o]})}),e.jsx(A,{type:"submit",className:"w-full",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}),s?"Connexion...":"Inscription..."]}):e.jsx(e.Fragment,{children:s?"Se connecter":"S'inscrire"})}),s&&e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>U(!0),className:"text-sm text-muted-foreground hover:text-primary hover:underline",disabled:n,children:"Mot de passe oubli√© ?"})})]}),!M&&e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s?"Pas encore de compte ?":"D√©j√† un compte ?"}),e.jsx("button",{type:"button",onClick:me,className:"mt-1 text-sm font-medium text-primary hover:underline",disabled:n,children:s?"Cr√©er un compte":"Se connecter"})]})]})]}),e.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>D("/"),className:"text-sm text-muted-foreground hover:text-foreground",children:"‚Üê Retour √† l'accueil"})})]})]})},Nc=()=>{const s=qs();return u.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",s.pathname)},[s.pathname]),e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),e.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),e.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},wc=Ys({password:Xe().min(6,"Le mot de passe doit contenir au moins 6 caract√®res"),confirmPassword:Xe()}).refine(s=>s.password===s.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),Cc=()=>{const{token:s}=mi(),t=jt(),[r,a]=u.useState(""),[n,i]=u.useState(""),[o,l]=u.useState(!1),[d,c]=u.useState(!1),[m,y]=u.useState(null),[h,b]=u.useState({}),[p,x]=u.useState(!1),j=async v=>{v.preventDefault(),y(null),b({});try{wc.parse({password:r,confirmPassword:n})}catch(M){if(M instanceof Ge){const U={};M.errors.forEach(V=>{V.path[0]&&(U[V.path[0]]=V.message)}),b(U);return}}c(!0);try{const M=await fetch(`/api/auth/reset-password/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:r})}),U=await M.json();if(!M.ok)throw new Error(U.error||"Une erreur est survenue");x(!0),setTimeout(()=>{t("/auth")},3e3)}catch(M){y(M instanceof Error?M.message:"Une erreur est survenue. Veuillez r√©essayer.")}finally{c(!1)}};return e.jsxs("div",{className:"flex min-h-screen items-center justify-center bg-background p-4",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute left-1/4 top-1/4 h-64 w-64 rounded-full bg-primary/5 blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 h-64 w-64 rounded-full bg-secondary/5 blur-3xl"})]}),e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative z-10 w-full max-w-md",children:[e.jsxs(L.div,{initial:{scale:.8},animate:{scale:1},className:"mb-8 text-center",children:[e.jsx(L.span,{animate:{rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0},className:"mb-4 inline-block text-6xl",children:"‚öΩ"}),e.jsxs("h1",{className:"text-3xl font-bold text-foreground",children:["Baby-Foot ",e.jsx("span",{className:"text-primary text-glow-cyan",children:"App"})]})]}),e.jsxs(O,{className:"border-border/50 bg-card/80 backdrop-blur-xl",children:[e.jsxs(he,{className:"text-center",children:[e.jsx(pe,{className:"text-2xl",children:p?"Mot de passe modifi√© !":"Nouveau mot de passe"}),e.jsx(Zs,{children:p?"Vous allez √™tre redirig√© vers la page de connexion":"Choisissez un nouveau mot de passe pour votre compte"})]}),e.jsx(B,{children:p?e.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"space-y-4 text-center",children:[e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-green-500/10",children:e.jsx(ei,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre mot de passe a √©t√© r√©initialis√© avec succ√®s."}),e.jsx(A,{onClick:()=>t("/auth"),className:"w-full",children:"Se connecter maintenant"})]}):e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(gt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(we,{type:o?"text":"password",placeholder:"Nouveau mot de passe",value:r,onChange:v=>a(v.target.value),className:"pl-10 pr-10",disabled:d}),e.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:o?e.jsx(va,{className:"h-4 w-4"}):e.jsx(hs,{className:"h-4 w-4"})})]}),h.password&&e.jsx("p",{className:"text-xs text-destructive",children:h.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(gt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(we,{type:o?"text":"password",placeholder:"Confirmer le mot de passe",value:n,onChange:v=>i(v.target.value),className:"pl-10",disabled:d})]}),h.confirmPassword&&e.jsx("p",{className:"text-xs text-destructive",children:h.confirmPassword})]}),m&&e.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 rounded-lg bg-destructive/10 p-3 text-sm text-destructive",children:[e.jsx(is,{className:"h-4 w-4 shrink-0"}),m]}),e.jsx(A,{type:"submit",className:"w-full",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}),"R√©initialisation..."]}):"R√©initialiser le mot de passe"})]})})]}),!p&&e.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>t("/auth"),className:"text-sm text-muted-foreground hover:text-foreground",children:"‚Üê Retour √† la connexion"})})]})]})},_c=()=>{const{user:s,userProfile:t}=qe(),r=jt(),[a,n]=u.useState([]),[i,o]=u.useState([]),[l,d]=u.useState(!0),[c,m]=u.useState(!1),[y,h]=u.useState(0),[b,p]=u.useState(!1),[x,j]=u.useState([]),[v,M]=u.useState([]),[U,V]=u.useState({}),[I,H]=u.useState({}),[k,F]=u.useState(null),[J,f]=u.useState(0),[D,T]=u.useState(0);u.useEffect(()=>{le(),Z()},[s]);const Z=async()=>{if(s)try{const $=E(R,`users/${s.uid}`),C=await G($);C.exists()&&h(C.val().fortune||0)}catch($){console.error("Erreur chargement fortune:",$)}},le=async()=>{d(!0);try{const[$,C]=await Promise.all([Ho(),Qo()]);n($),o(C)}catch{w({title:"Erreur",description:"Impossible de charger les donn√©es",variant:"destructive"})}finally{d(!1)}},ve=async()=>{if(!s||x.length===0||v.length===0){w({title:"Erreur",description:"S√©lectionnez au moins 1 joueur par √©quipe",variant:"destructive"});return}m(!0);try{await qo(x,v,s.uid),w({title:"Match cr√©√©! üéÆ",description:"Les paris sont ouverts"}),p(!1),j([]),M([]),le()}catch($){w({title:"Erreur",description:$.message,variant:"destructive"})}finally{m(!1)}},me=async $=>{if(!s||!t)return;const C=U[$],g=I[$];if(!C||C<=0||!g){w({title:"Erreur",description:"Montant ou √©quipe invalide",variant:"destructive"});return}try{await Uo($,s.uid,t.username,C,g),w({title:"Pari plac√©! üí∞",description:`${C}‚Ç¨ sur l'√©quipe ${g}`}),le(),Z()}catch(S){w({title:"Erreur",description:S.message,variant:"destructive"})}},K=async $=>{try{await Vo($),w({title:"Match d√©marr√©! ‚öΩ",description:"Les paris sont ferm√©s"}),le()}catch(C){w({title:"Erreur",description:C.message,variant:"destructive"})}},te=async()=>{if(k){if(J===D){w({title:"Erreur",description:"Match nul interdit",variant:"destructive"});return}try{const $=await Wo(k,J,D);w({title:"Match termin√©! üèÜ",description:`${Object.keys($.winnings).length} gagnants`}),F(null),f(0),T(0),le(),Z()}catch($){w({title:"Erreur",description:$.message,variant:"destructive"})}}},se=($,C)=>{const g=C===1?x:v,S=C===1?v:x,q=C===1?j:M,P=C===1?M:j;S.includes($)&&P(S.filter(_=>_!==$)),g.includes($)?q(g.filter(_=>_!==$)):g.length<2&&q([...g,$])},ue=$=>{const C=$.totalBetsTeam1+$.totalBetsTeam2;if(C===0)return{odds1:"2.00",odds2:"2.00"};const g=$.totalBetsTeam1===0?C.toFixed(2):(C/$.totalBetsTeam1).toFixed(2),S=$.totalBetsTeam2===0?C.toFixed(2):(C/$.totalBetsTeam2).toFixed(2);return{odds1:g,odds2:S}};return l?e.jsx(Oe,{children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(ce,{className:"h-8 w-8 animate-spin text-primary"})})}):e.jsxs(Oe,{children:[e.jsxs(L.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{variant:"ghost",size:"icon",onClick:()=>r("/match"),className:"rounded-xl",children:e.jsx(ti,{className:"h-5 w-5"})}),e.jsx("div",{className:"rounded-xl bg-primary/20 p-3",children:e.jsx(Rt,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Paris"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[y.toLocaleString(),"‚Ç¨ disponibles"]})]})]}),e.jsxs($e,{open:b,onOpenChange:p,children:[e.jsx(Cr,{asChild:!0,children:e.jsxs(A,{variant:"neon",children:[e.jsx(St,{className:"h-4 w-4 mr-2"}),"Cr√©er Match"]})}),e.jsxs(Se,{className:"max-w-2xl",children:[e.jsx(Ee,{children:e.jsx(Re,{children:"Cr√©er un match avec paris"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"font-semibold text-primary",children:["√âquipe 1 (",x.length,"/2)"]}),e.jsx("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:i.map($=>e.jsxs("div",{onClick:()=>se($.id,1),className:`p-2 rounded cursor-pointer transition ${x.includes($.id)?"bg-primary text-primary-foreground":"bg-surface-alt hover:bg-surface-alt/70"}`,children:[$.username," (",$.eloRating,")"]},$.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"font-semibold text-red-500",children:["√âquipe 2 (",v.length,"/2)"]}),e.jsx("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:i.map($=>e.jsxs("div",{onClick:()=>se($.id,2),className:`p-2 rounded cursor-pointer transition ${v.includes($.id)?"bg-red-500 text-white":"bg-surface-alt hover:bg-surface-alt/70"}`,children:[$.username," (",$.eloRating,")"]},$.id))})]})]}),e.jsx(A,{onClick:ve,disabled:c||x.length===0||v.length===0,className:"w-full mt-4",variant:"neon",children:c?e.jsx(ce,{className:"h-4 w-4 animate-spin"}):"Cr√©er"})]})]})]}),e.jsx("div",{className:"space-y-4",children:a.length===0?e.jsx(O,{children:e.jsx(B,{className:"p-8 text-center text-muted-foreground",children:"Aucun match disponible"})}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"border-primary/30 bg-primary/5",children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/20 p-2",children:e.jsx(Ze,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm text-foreground mb-1",children:"üí° Syst√®me de cotes"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Distribution proportionnelle: vous r√©cup√©rez votre mise + votre part des pertes adverses. Plus l'√©quipe est favorite (plus de mises), plus la cote est basse. Pariez sur l'outsider pour des gains maximums !"})]})]})})}),a.map(($,C)=>{var q;const g=ue($),S=s?(q=$.bets)==null?void 0:q[s.uid]:null;return e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:C*.1},children:e.jsxs(O,{children:[e.jsx(he,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(pe,{className:"text-lg flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-primary"}),$.team1Names.join(" & ")," vs ",$.team2Names.join(" & ")]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${$.status==="open"?"bg-green-500/20 text-green-500":$.status==="playing"?"bg-yellow-500/20 text-yellow-500":"bg-gray-500/20 text-gray-500"}`,children:$.status==="open"?"Paris ouverts":$.status==="playing"?"En cours":"Termin√©"})]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-primary/10",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"√âquipe 1"}),e.jsxs("p",{className:"text-2xl font-bold text-primary",children:[$.totalBetsTeam1,"‚Ç¨"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Cote: x",g.odds1]})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-red-500/10",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"√âquipe 2"}),e.jsxs("p",{className:"text-2xl font-bold text-red-500",children:[$.totalBetsTeam2,"‚Ç¨"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Cote: x",g.odds2]})]})]}),S&&e.jsx("div",{className:"p-3 rounded-lg bg-accent/10 border border-accent",children:e.jsxs("p",{className:"text-sm",children:["Votre pari: ",e.jsxs("span",{className:"font-bold",children:[S.amount,"‚Ç¨"]})," sur"," ",e.jsxs("span",{className:"font-bold",children:["√âquipe ",S.teamBet]})]})}),$.status==="open"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(we,{type:"number",placeholder:"Montant (‚Ç¨)",value:U[$.id]||"",onChange:P=>V({...U,[$.id]:Number(P.target.value)})}),e.jsx(A,{variant:I[$.id]===1?"default":"outline",onClick:()=>{H({...I,[$.id]:1}),me($.id)},children:"√âquipe 1"}),e.jsx(A,{variant:I[$.id]===2?"destructive":"outline",onClick:()=>{H({...I,[$.id]:2}),me($.id)},children:"√âquipe 2"})]}),$.status==="open"&&$.createdBy===(s==null?void 0:s.uid)&&e.jsxs(A,{onClick:()=>K($.id),variant:"neon",className:"w-full",children:[e.jsx(fa,{className:"h-4 w-4 mr-2"}),"D√©marrer le match"]}),$.status==="playing"&&$.createdBy===(s==null?void 0:s.uid)&&e.jsxs($e,{open:k===$.id,onOpenChange:P=>F(P?$.id:null),children:[e.jsx(Cr,{asChild:!0,children:e.jsxs(A,{variant:"neon",className:"w-full",children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),"Terminer le match"]})}),e.jsxs(Se,{children:[e.jsx(Ee,{children:e.jsx(Re,{children:"Entrer les scores"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-primary",children:"Score √âquipe 1"}),e.jsx(we,{type:"number",value:J,onChange:P=>f(Number(P.target.value)),min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-red-500",children:"Score √âquipe 2"}),e.jsx(we,{type:"number",value:D,onChange:P=>T(Number(P.target.value)),min:"0"})]})]}),e.jsx(A,{onClick:te,variant:"neon",className:"w-full mt-4",children:"Valider"})]})]})]})]})},$.id)})]})})]})},kc={common:{label:"Commun",color:"bg-gray-500",textColor:"text-gray-400",borderColor:"border-gray-500/50",bgGlow:"bg-gray-500/10"},rare:{label:"Rare",color:"bg-blue-500",textColor:"text-blue-400",borderColor:"border-blue-500/50",bgGlow:"bg-blue-500/10"},epic:{label:"√âpique",color:"bg-purple-500",textColor:"text-purple-400",borderColor:"border-purple-500/50",bgGlow:"bg-purple-500/10"},legendary:{label:"L√©gendaire",color:"bg-orange-500",textColor:"text-orange-400",borderColor:"border-orange-500/50",bgGlow:"bg-orange-500/10"},mythic:{label:"Mythique",color:"bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-500",textColor:"text-transparent bg-clip-text bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400",borderColor:"border-pink-500/50",bgGlow:"bg-gradient-to-br from-pink-500/10 via-purple-500/10 to-cyan-500/10"}},ks={all:{label:"Tout",icon:kt},avatar:{label:"Avatars",icon:yt},theme:{label:"Th√®mes",icon:ft},banner:{label:"Banni√®res",icon:Ze},effect:{label:"Effets",icon:Gt},lootbox:{label:"Lootboxes",icon:Ke}},Sc=()=>{const{user:s}=qe(),[t,r]=u.useState(0),[a,n]=u.useState({}),[i,o]=u.useState({avatar:"",theme:"",banner:"",effect:""}),[l,d]=u.useState(!1),[c,m]=u.useState("all"),[y,h]=u.useState(""),[b,p]=u.useState("price-asc"),[x,j]=u.useState(!1);u.useEffect(()=>{if(!s)return;(async()=>{try{const F=E(R,`users/${s.uid}`),J=await G(F);if(J.exists()){const f=J.val();r(f.fortune||0),n(f.inventory||{}),o({avatar:f.avatar||f.equippedAvatar||"",theme:f.theme||f.equippedTheme||"",banner:f.banner||f.equippedBanner||"",effect:f.effect||f.equippedEffect||""})}}catch(F){console.error("Erreur chargement donn√©es:",F)}})()},[s]);const v=De.filter(k=>{const F=c==="all"||k.type===c,J=y===""||k.name.toLowerCase().includes(y.toLowerCase())||k.description.toLowerCase().includes(y.toLowerCase());return F&&J}).sort((k,F)=>{if(b==="price-asc")return k.price-F.price;if(b==="price-desc")return F.price-k.price;if(b==="rarity"){const J={common:0,rare:1,epic:2,legendary:3,mythic:4};return J[F.rarity||"common"]-J[k.rarity||"common"]}return 0}),M=async k=>{if(s){if(t<k.price){w({title:"Fonds insuffisants üí∏",description:`Il vous faut ${k.price}‚Ç¨ (vous avez ${t}‚Ç¨)`,variant:"destructive"});return}if(k.type==="lootbox"){d(!0);try{await ul(s.uid,k.id,k.price);const F=E(R,`users/${s.uid}`),J=await G(F);if(J.exists()){const f=J.val();r(f.fortune||0),n(f.inventory||{})}w({title:"üéÅ Lootbox achet√©e!",description:`${k.name} a √©t√© ajout√©e √† votre inventaire`})}catch(F){w({title:"Erreur",description:F.message,variant:"destructive"})}finally{d(!1)}return}if(V(k)){w({title:"D√©j√† poss√©d√©",description:"Vous poss√©dez d√©j√† cet item",variant:"destructive"});return}d(!0);try{await Nl(s.uid,k.id,k.type,k.price);const F=E(R,`users/${s.uid}`),J=await G(F);if(J.exists()){const f=J.val();r(f.fortune||0),n(f.inventory||{}),o({avatar:f.avatar||"",theme:f.theme||"",banner:f.banner||"",effect:f.effect||""})}w({title:"Achat r√©ussi! üéâ",description:`${k.name} a √©t√© ajout√© √† votre inventaire`}),k.type==="theme"&&Object.keys(a.theme||{}).length===0&&setTimeout(()=>window.location.reload(),1500)}catch(F){w({title:"Erreur",description:F.message,variant:"destructive"})}finally{d(!1)}}},U=async k=>{if(s){if(!V(k)){w({title:"Item non poss√©d√©",description:"Vous devez d'abord acheter cet item",variant:"destructive"});return}d(!0);try{await Va(s.uid,k.id,k.type),o(F=>({...F,[k.type]:k.id})),w({title:"√âquip√©! ‚úÖ",description:`${k.name} est maintenant actif`}),k.type==="theme"&&setTimeout(()=>{window.location.reload()},1e3)}catch(F){w({title:"Erreur",description:F.message,variant:"destructive"})}finally{d(!1)}}},V=k=>k.type==="lootbox"?!1:a[k.type]&&typeof a[k.type]=="object"?!!a[k.type][k.id]:!!a[k.id],I=k=>a.lootbox&&a.lootbox[k]?a.lootbox[k]:a[k]?a[k]:0,H={total:De.filter(k=>k.type!=="lootbox").length,owned:De.filter(k=>k.type!=="lootbox"&&V(k)).length,affordable:v.filter(k=>t>=k.price).length};return e.jsx(Oe,{children:e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(kt,{className:"h-8 w-8 text-primary"}),"Boutique Premium"]}),e.jsx("p",{className:"mt-1 text-muted-foreground",children:"Personnalisez votre exp√©rience de jeu"})]}),e.jsxs(O,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre fortune"}),e.jsxs("p",{className:"text-3xl font-bold text-primary",children:[t,"‚Ç¨"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[H.affordable," item(s) disponible(s)"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(O,{className:"bg-gradient-to-br from-primary/10 to-transparent border-primary/20",children:e.jsxs(B,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/20 flex items-center justify-center",children:e.jsx(kt,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold",children:[H.owned,"/",H.total]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Items poss√©d√©s"})]})]})}),e.jsx(O,{className:"bg-gradient-to-br from-green-500/10 to-transparent border-green-500/20",children:e.jsxs(B,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-green-500/20 flex items-center justify-center",children:e.jsx(ot,{className:"h-6 w-6 text-green-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:H.affordable}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"√Ä votre port√©e"})]})]})}),e.jsx(O,{className:"bg-gradient-to-br from-orange-500/10 to-transparent border-orange-500/20",children:e.jsxs(B,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-orange-500/20 flex items-center justify-center",children:e.jsx(yt,{className:"h-6 w-6 text-orange-500"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(H.owned/H.total*100),"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Collection"})]})]})})]}),e.jsx(O,{className:"mb-6",children:e.jsxs(B,{className:"p-4",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{placeholder:"Rechercher un item...",value:y,onChange:k=>h(k.target.value),className:"pl-10"}),y&&e.jsx(A,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-7 w-7 p-0",onClick:()=>h(""),children:e.jsx(ze,{className:"h-4 w-4"})})]}),e.jsx(A,{variant:"outline",size:"icon",onClick:()=>j(!x),children:e.jsx(As,{className:"h-4 w-4"})})]}),e.jsx(He,{children:x&&e.jsx(L.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"pt-4 border-t space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Cat√©gories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(ks).map(k=>{const F=ks[k].icon;return e.jsxs(A,{variant:c===k?"default":"outline",size:"sm",onClick:()=>m(k),children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),ks[k].label]},k)})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Trier par"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(A,{variant:b==="price-asc"?"default":"outline",size:"sm",onClick:()=>p("price-asc"),children:"Prix ‚Üë"}),e.jsx(A,{variant:b==="price-desc"?"default":"outline",size:"sm",onClick:()=>p("price-desc"),children:"Prix ‚Üì"}),e.jsx(A,{variant:b==="rarity"?"default":"outline",size:"sm",onClick:()=>p("rarity"),children:"Raret√©"})]})]})]})})})]})}),v.length===0?e.jsx(O,{children:e.jsxs(B,{className:"p-12 text-center",children:[e.jsx(kt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium text-muted-foreground",children:"Aucun item trouv√©"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Essayez de modifier vos filtres ou votre recherche"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:v.map((k,F)=>{const J=V(k),f=i[k.type]===k.id,D=t>=k.price,T=kc[k.rarity||"common"],Z=k.type==="lootbox"?I(k.id):0;return e.jsx(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:F*.05},whileHover:{scale:1.03,y:-5},children:e.jsxs(O,{className:`relative overflow-hidden h-full transition-all ${f?`border-2 ${T.borderColor} shadow-lg`:"border-border hover:border-primary/50"} ${T.bgGlow}`,children:[e.jsx("div",{className:`absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-bold text-white ${T.color} shadow-lg z-10`,children:T.label}),f&&e.jsxs("div",{className:"absolute top-2 left-2 px-2 py-1 rounded-full text-xs font-bold bg-primary text-primary-foreground shadow-lg z-10 flex items-center gap-1",children:[e.jsx(ot,{className:"h-3 w-3"}),"√âquip√©"]}),Z>0&&e.jsx("div",{className:"absolute top-2 left-2 bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm z-10 shadow-lg",children:Z}),e.jsxs(he,{className:"pb-3",children:[e.jsx("div",{className:"flex items-center justify-center h-24 text-6xl mb-2",children:k.type==="theme"&&k.preview?e.jsx("div",{className:"w-20 h-20 rounded-lg shadow-xl border-2 border-white/20",style:{backgroundColor:k.preview}}):e.jsx("span",{children:k.icon||k.preview||"üéÅ"})}),e.jsx(pe,{className:"text-center text-lg",children:k.name}),e.jsx("p",{className:"text-sm text-muted-foreground text-center line-clamp-2",children:k.description})]}),e.jsxs(B,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:`text-2xl font-bold ${T.textColor}`,children:[k.price,"‚Ç¨"]}),k.type!=="lootbox"&&e.jsx(ye,{variant:J?"default":"outline",children:J?"Poss√©d√©":"Non poss√©d√©"})]}),k.type==="lootbox"?e.jsx(A,{className:"w-full",onClick:()=>M(k),disabled:!D||l,variant:D?"default":"secondary",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Acheter"]}):e.jsxs(e.Fragment,{children:[e.jsx(gt,{className:"h-4 w-4 mr-2"}),"Fonds insuffisants"]})}):J?f?e.jsxs(A,{className:"w-full",variant:"outline",disabled:!0,children:[e.jsx(ot,{className:"h-4 w-4 mr-2"}),"√âquip√©"]}):e.jsxs(A,{className:"w-full",onClick:()=>U(k),disabled:l,children:[e.jsx(ft,{className:"h-4 w-4 mr-2"}),"√âquiper"]}):e.jsx(A,{className:"w-full",onClick:()=>M(k),disabled:!D||l,variant:D?"default":"secondary",children:D?e.jsxs(e.Fragment,{children:[e.jsx(kt,{className:"h-4 w-4 mr-2"}),"Acheter"]}):e.jsxs(e.Fragment,{children:[e.jsx(gt,{className:"h-4 w-4 mr-2"}),"Fonds insuffisants"]})})]})]})},k.id)})})]})})},Ss=["‚öΩ","üèÜ","üî•","‚ö°","üéØ","üåü","üíé","üëë"],Es=["#3b82f6","#8b5cf6","#ec4899","#f59e0b","#10b981","#06b6d4"],Ec=[{id:"xpBoost",name:"Boost XP",description:"+20% d'ELO gagn√©",cost:500,icon:"üìà"},{id:"fortuneBoost",name:"Boost Fortune",description:"+15% de gains",cost:750,icon:"üí∞"},{id:"premiumCards",name:"Cartes Premium",description:"Double chance de cartes rares",cost:1e3,icon:"üé¥"}],Rc=()=>{var ue,$,C;const{user:s,userProfile:t}=qe(),[r,a]=u.useState(!1),[n,i]=u.useState(!1),[o,l]=u.useState(!1),[d,c]=u.useState(null),[m,y]=u.useState([]),[h,b]=u.useState(0),[p,x]=u.useState([]),[j,v]=u.useState(""),[M,U]=u.useState(!1),[V,I]=u.useState(!0),[H,k]=u.useState(""),[F,J]=u.useState(Ss[0]),[f,D]=u.useState(Es[0]),[T,Z]=u.useState("");u.useEffect(()=>{if(!s){I(!1);return}const g=E(R,`users/${s.uid}`),S=bt(g,async q=>{if(!q.exists()){I(!1);return}const P=q.val();if(b(P.fortune||0),P.clubId){const _=E(R,`clubs/${P.clubId}`),ee=await G(_);if(ee.exists()){const re=ee.val();c({id:P.clubId,...re,bonuses:re.bonuses||{},treasury:re.treasury||0,totalEarnings:re.totalEarnings||0,members:re.members||[]});const Ce=E(R,`clubMembers/${P.clubId}`),Ne=await G(Ce);if(Ne.exists()){const _e=Ne.val(),Te=Object.values(_e);y(Te)}else y([])}else c(null)}else c(null);I(!1)},q=>{console.error("Erreur chargement donn√©es utilisateur:",q),I(!1)});return()=>S()},[s]);const le=async()=>{U(!0);try{const g=E(R,"clubs"),S=await G(g);if(!S.exists()){x([]),U(!1);return}const q=S.val(),P=Object.entries(q).map(([ee,re])=>({id:ee,name:re.name||"Club sans nom",logo:re.logo||"üèÜ",color:re.color||"#3b82f6",founderId:re.founderId||"",treasury:re.treasury||0,totalEarnings:re.totalEarnings||0,members:re.members||[],bonuses:re.bonuses||{},createdAt:re.createdAt||new Date().toISOString()}));let _=P;j.trim()&&(_=P.filter(ee=>ee.name.toLowerCase().includes(j.toLowerCase()))),x(_)}catch(g){console.error("Erreur chargement clubs:",g),w({title:"Erreur",description:"Impossible de charger les clubs",variant:"destructive"})}finally{U(!1)}};u.useEffect(()=>{n&&le()},[n,j]);const ve=async()=>{if(!(!s||!t)){if(!H.trim()){w({title:"Erreur",description:"Veuillez entrer un nom de club",variant:"destructive"});return}try{await tl(s.uid,t.username,H,F,f),w({title:"Club cr√©√©! üéâ",description:`${H} a √©t√© cr√©√© avec succ√®s`}),a(!1),k(""),J(Ss[0]),D(Es[0]),window.location.reload()}catch(g){console.error("Erreur cr√©ation club:",g),w({title:"Erreur",description:g.message||"Impossible de cr√©er le club",variant:"destructive"})}}},me=async(g,S)=>{if(!s||!t){w({title:"Erreur",description:"Vous devez √™tre connect√©",variant:"destructive"});return}try{const q=E(R,`clubs/${g}`);if(!(await G(q)).exists()){w({title:"Erreur",description:"Ce club n'existe plus",variant:"destructive"}),await le();return}const _=E(R,`users/${s.uid}`),ee=await G(_);if(ee.exists()&&ee.val().clubId){w({title:"Erreur",description:"Vous √™tes d√©j√† dans un club. Quittez-le d'abord.",variant:"destructive"});return}await sl(g,s.uid,t.username),w({title:"Club rejoint! üéâ",description:`Vous avez rejoint ${S}`}),i(!1),v(""),window.location.reload()}catch(q){console.error("Erreur rejoindre club:",q),w({title:"Erreur",description:q.message||"Impossible de rejoindre le club",variant:"destructive"})}},K=async()=>{if(!s||!d)return;if(d.founderId===s.uid){w({title:"Action impossible",description:"Le fondateur ne peut pas quitter le club",variant:"destructive"});return}if(window.confirm("√ätes-vous s√ªr de vouloir quitter ce club ? Vos contributions resteront dans la tr√©sorerie."))try{await hl(d.id,s.uid),w({title:"Club quitt√©",description:"Vous avez quitt√© le club avec succ√®s"}),window.location.reload()}catch(S){console.error("Erreur quitter club:",S),w({title:"Erreur",description:S.message||"Impossible de quitter le club",variant:"destructive"})}},te=async()=>{if(!s||!d)return;const g=parseInt(T);if(isNaN(g)||g<=0){w({title:"Erreur",description:"Montant invalide",variant:"destructive"});return}if(g>h){w({title:"Erreur",description:"Fonds insuffisants",variant:"destructive"});return}try{await ml(s.uid,d.id,g),w({title:"Contribution ajout√©e! üí∞",description:`${g}‚Ç¨ ajout√©s √† la tr√©sorerie`}),l(!1),Z("")}catch(S){console.error("Erreur contribution:",S),w({title:"Erreur",description:S.message||"Impossible de contribuer",variant:"destructive"})}},se=async(g,S)=>{if(d){if((d.treasury||0)<S){w({title:"Fonds insuffisants",description:"La tr√©sorerie du club est insuffisante",variant:"destructive"});return}try{await xl(d.id,g,S),w({title:"Bonus achet√©! üéÅ",description:"Le bonus est maintenant actif pour tous les membres"})}catch(q){console.error("Erreur achat bonus:",q),w({title:"Erreur",description:q.message||"Impossible d'acheter le bonus",variant:"destructive"})}}};return V?e.jsx(Oe,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ce,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Chargement..."})]})})}):d?e.jsx(Oe,{children:e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx(O,{className:"mb-6",style:{borderColor:d.color},children:e.jsx(he,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-6xl w-20 h-20 flex items-center justify-center rounded-lg",style:{backgroundColor:d.color+"20"},children:d.logo}),e.jsxs("div",{children:[e.jsx(pe,{className:"text-2xl",children:d.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[((ue=d.members)==null?void 0:ue.length)||0," membre",((($=d.members)==null?void 0:$.length)||0)>1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tr√©sorerie"}),e.jsxs("p",{className:"text-3xl font-bold text-primary",children:[d.treasury||0,"‚Ç¨"]})]}),d.founderId!==(s==null?void 0:s.uid)&&e.jsxs(A,{variant:"destructive",size:"sm",onClick:K,children:[e.jsx(ya,{className:"h-4 w-4 mr-2"}),"Quitter"]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs(O,{children:[e.jsx(he,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5 text-primary"}),"Contribuer"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Votre fortune: ",e.jsxs("span",{className:"font-bold text-foreground",children:[h,"‚Ç¨"]})]}),e.jsxs(A,{onClick:()=>l(!0),className:"w-full",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Faire un don"]})]})]}),e.jsxs(O,{children:[e.jsx(he,{children:e.jsx(pe,{children:"Statistiques"})}),e.jsxs(B,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total gagn√©"}),e.jsxs("span",{className:"font-bold",children:[d.totalEarnings||0,"‚Ç¨"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Membres actifs"}),e.jsx("span",{className:"font-bold",children:((C=d.members)==null?void 0:C.length)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Bonus actifs"}),e.jsx("span",{className:"font-bold",children:d.bonuses?Object.values(d.bonuses).filter(Boolean).length:0})]})]})]})]}),e.jsxs(O,{className:"mb-6",children:[e.jsx(he,{children:e.jsx(pe,{children:"Bonus du club"})}),e.jsx(B,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Ec.map(g=>{const S=d.bonuses&&d.bonuses[g.id],q=(d.treasury||0)>=g.cost;return e.jsx(O,{className:S?"border-primary":"",children:e.jsxs(B,{className:"p-4",children:[e.jsx("div",{className:"text-4xl mb-2 text-center",children:g.icon}),e.jsx("h3",{className:"font-bold text-center mb-1",children:g.name}),e.jsx("p",{className:"text-xs text-muted-foreground text-center mb-3",children:g.description}),S?e.jsx(A,{size:"sm",className:"w-full",variant:"outline",disabled:!0,children:"Actif ‚úì"}):e.jsxs(A,{size:"sm",className:"w-full",onClick:()=>se(g.id,g.cost),disabled:!q,variant:q?"default":"secondary",children:[g.cost,"‚Ç¨"]})]})},g.id)})})})]}),e.jsxs(O,{children:[e.jsx(he,{children:e.jsxs(pe,{children:["Membres (",m.length,")"]})}),e.jsx(B,{children:m.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Aucun membre"}):e.jsx("div",{className:"space-y-2",children:m.sort((g,S)=>S.contributions-g.contributions).map(g=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-surface-alt",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[g.role==="founder"&&e.jsx(Et,{className:"h-5 w-5 text-gold"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:g.username}),e.jsx("p",{className:"text-xs text-muted-foreground",children:g.role==="founder"?"Fondateur":"Membre"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-primary",children:[g.contributions,"‚Ç¨"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Contributions"})]})]},g.userId))})})]}),e.jsx($e,{open:o,onOpenChange:l,children:e.jsxs(Se,{children:[e.jsxs("button",{onClick:()=>l(!1),className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none z-50",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Fermer"})]}),e.jsx(Ee,{children:e.jsx(Re,{children:"Contribuer √† la tr√©sorerie"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Votre fortune: ",e.jsxs("span",{className:"font-bold text-foreground",children:[h,"‚Ç¨"]})]}),e.jsx(we,{type:"number",value:T,onChange:g=>Z(g.target.value),placeholder:"Montant",min:"1",max:h}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(A,{onClick:()=>l(!1),variant:"outline",className:"flex-1",children:"Annuler"}),e.jsx(A,{onClick:te,className:"flex-1",children:"Contribuer"})]})]})]})})]})}):e.jsx(Oe,{children:e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto",children:[e.jsxs(O,{className:"text-center p-12",children:[e.jsx(Ae,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Vous n'avez pas de club"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Cr√©ez ou rejoignez un club pour profiter des bonus collectifs"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsxs(A,{onClick:()=>a(!0),size:"lg",children:[e.jsx(St,{className:"h-5 w-5 mr-2"}),"Cr√©er un club"]}),e.jsxs(A,{onClick:()=>i(!0),size:"lg",variant:"outline",children:[e.jsx(Tt,{className:"h-5 w-5 mr-2"}),"Rejoindre un club"]})]})]}),e.jsx($e,{open:r,onOpenChange:a,children:e.jsxs(Se,{children:[e.jsxs("button",{onClick:()=>a(!1),className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none z-50",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Fermer"})]}),e.jsx(Ee,{children:e.jsx(Re,{children:"Cr√©er un club"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Nom du club"}),e.jsx(we,{value:H,onChange:g=>k(g.target.value),placeholder:"Les Champions",maxLength:20})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Logo"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:Ss.map(g=>e.jsx("button",{onClick:()=>J(g),className:`text-4xl p-4 rounded-lg border-2 transition-all ${F===g?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:g},g))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Couleur"}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:Es.map(g=>e.jsx("button",{onClick:()=>D(g),className:`h-12 rounded-lg border-2 transition-all ${f===g?"border-white scale-110":"border-transparent"}`,style:{backgroundColor:g}},g))})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(A,{onClick:()=>a(!1),variant:"outline",className:"flex-1",children:"Annuler"}),e.jsx(A,{onClick:ve,className:"flex-1",children:"Cr√©er le club"})]})]})]})}),e.jsx($e,{open:n,onOpenChange:i,children:e.jsxs(Se,{className:"max-w-2xl max-h-[80vh]",children:[e.jsxs("button",{onClick:()=>i(!1),className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none z-50",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Fermer"})]}),e.jsx(Ee,{children:e.jsx(Re,{children:"Rejoindre un club"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{placeholder:"Rechercher un club...",value:j,onChange:g=>v(g.target.value),className:"pl-10"})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:M?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ce,{className:"h-6 w-6 animate-spin text-primary"})}):p.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ae,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:j?"Aucun club trouv√©":"Aucun club disponible"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Soyez le premier √† cr√©er un club !"})]}):p.map(g=>{var S,q;return e.jsx(O,{className:"hover:border-primary/50 transition-colors",children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-4xl w-14 h-14 flex items-center justify-center rounded-lg",style:{backgroundColor:g.color+"20"},children:g.logo}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:g.name}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[((S=g.members)==null?void 0:S.length)||0," membre",(((q=g.members)==null?void 0:q.length)||0)>1?"s":""]}),e.jsx("span",{children:"‚Ä¢"}),e.jsxs("span",{children:[g.treasury||0,"‚Ç¨ de tr√©sorerie"]})]})]})]}),e.jsx(A,{onClick:()=>me(g.id,g.name),size:"sm",children:"Rejoindre"})]})})},g.id)})}),e.jsx(A,{onClick:()=>{i(!1),v("")},variant:"outline",className:"w-full mt-4",children:"Fermer"})]})]})})]})})},Rs={common:{label:"Commun",color:"bg-gray-500",textColor:"text-gray-400",borderColor:"border-gray-500/50",glowColor:"shadow-gray-500/50"},rare:{label:"Rare",color:"bg-blue-500",textColor:"text-blue-400",borderColor:"border-blue-500/50",glowColor:"shadow-blue-500/50"},epic:{label:"√âpique",color:"bg-purple-500",textColor:"text-purple-400",borderColor:"border-purple-500/50",glowColor:"shadow-purple-500/50"},legendary:{label:"L√©gendaire",color:"bg-orange-500",textColor:"text-orange-400",borderColor:"border-orange-500/50",glowColor:"shadow-orange-500/50"},mythic:{label:"Mythique",color:"bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-500",textColor:"text-transparent bg-clip-text bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400",borderColor:"border-pink-500/50",glowColor:"shadow-pink-500/50"}},$c=()=>{const{user:s}=qe(),[t,r]=u.useState({}),[a,n]=u.useState({avatar:"",theme:"",banner:"",effect:""}),[i,o]=u.useState(!0),[l,d]=u.useState(!1),[c,m]=u.useState("items"),[y,h]=u.useState(!1),[b,p]=u.useState(null),[x,j]=u.useState(!1);u.useEffect(()=>{s&&v()},[s]);const v=async()=>{if(s){o(!0);try{const f=E(R,`users/${s.uid}`),D=await G(f);if(D.exists()){const T=D.val();r(T.inventory||{}),n({avatar:T.avatar||"",theme:T.theme||"",banner:T.banner||"",effect:T.effect||""})}}catch(f){console.error("Erreur chargement inventaire:",f),w({title:"Erreur",description:"Impossible de charger l'inventaire",variant:"destructive"})}finally{o(!1)}}},M=async(f,D)=>{if(s){d(!0);try{await Va(s.uid,f,D),n(Z=>({...Z,[D]:f}));const T=De.find(Z=>Z.id===f);w({title:"√âquip√©! ‚úÖ",description:`${(T==null?void 0:T.name)||f} est maintenant actif`}),D==="theme"&&setTimeout(()=>window.location.reload(),1e3)}catch(T){w({title:"Erreur",description:T.message,variant:"destructive"})}finally{d(!1)}}},U=async f=>{if(s){h(!0);try{const D=await dl(s.uid,f);p(D),j(!0),await v(),w({title:"üéâ Lootbox ouverte!",description:`Vous avez re√ßu ${D.rewards.length} items et ${D.fortuneBonus}‚Ç¨!`})}catch(D){w({title:"Erreur",description:D.message,variant:"destructive"})}finally{h(!1)}}},V=()=>{const f=[];return De.forEach(D=>{t[D.type]&&typeof t[D.type]=="object"?t[D.type][D.id]&&f.push(D):t[D.id]&&f.push(D)}),f},I=()=>{const f=[];return De.forEach(D=>{if(D.type==="lootbox"){let T=0;t.lootbox&&t.lootbox[D.id]?T=t.lootbox[D.id]:t[D.id]&&(T=t[D.id]),T>0&&f.push({...D,count:T})}}),f},H=V().filter(f=>f.type!=="lootbox"),k=I(),F={avatar:H.filter(f=>f.type==="avatar"),theme:H.filter(f=>f.type==="theme"),banner:H.filter(f=>f.type==="banner"),effect:H.filter(f=>f.type==="effect")},J={total:H.length,avatars:F.avatar.length,themes:F.theme.length,banners:F.banner.length,effects:F.effect.length,lootboxes:k.reduce((f,D)=>f+D.count,0)};return i?e.jsx(Oe,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ce,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Chargement de l'inventaire..."})]})})}):e.jsx(Oe,{children:e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(qt,{className:"h-8 w-8 text-primary"}),"Mon Inventaire"]}),e.jsx("p",{className:"mt-1 text-muted-foreground",children:"G√©rez vos items et √©quipements"})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[e.jsx(O,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx(qt,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:J.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Items"})]})}),e.jsx(O,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx(yt,{className:"h-6 w-6 mx-auto mb-2 text-blue-500"}),e.jsx("p",{className:"text-2xl font-bold",children:J.avatars}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avatars"})]})}),e.jsx(O,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx(ft,{className:"h-6 w-6 mx-auto mb-2 text-purple-500"}),e.jsx("p",{className:"text-2xl font-bold",children:J.themes}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Th√®mes"})]})}),e.jsx(O,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl mx-auto mb-2",children:"üéØ"}),e.jsx("p",{className:"text-2xl font-bold",children:J.banners}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Banni√®res"})]})}),e.jsx(O,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl mx-auto mb-2",children:"‚ö°"}),e.jsx("p",{className:"text-2xl font-bold",children:J.effects}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Effets"})]})}),e.jsx(O,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx(Ke,{className:"h-6 w-6 mx-auto mb-2 text-orange-500"}),e.jsx("p",{className:"text-2xl font-bold",children:J.lootboxes}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Lootboxes"})]})})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsxs(A,{variant:c==="items"?"default":"outline",onClick:()=>m("items"),children:[e.jsx(qt,{className:"h-4 w-4 mr-2"}),"Items (",J.total,")"]}),e.jsxs(A,{variant:c==="lootboxes"?"default":"outline",onClick:()=>m("lootboxes"),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Lootboxes (",J.lootboxes,")"]})]}),e.jsx(He,{mode:"wait",children:c==="items"?e.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:H.length===0?e.jsx(O,{children:e.jsxs(B,{className:"p-12 text-center",children:[e.jsx(qt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Inventaire vide"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Achetez des items dans la boutique pour les voir ici"})]})}):e.jsx("div",{className:"space-y-6",children:Object.entries(F).map(([f,D])=>D.length>0&&e.jsxs(O,{children:[e.jsx(he,{children:e.jsxs(pe,{className:"flex items-center gap-2 capitalize",children:[f==="avatar"&&e.jsx(yt,{className:"h-5 w-5 text-primary"}),f==="theme"&&e.jsx(ft,{className:"h-5 w-5 text-primary"}),f==="banner"&&e.jsx("div",{className:"text-xl",children:"üéØ"}),f==="effect"&&e.jsx("div",{className:"text-xl",children:"‚ö°"}),f,"s (",D.length,")"]})}),e.jsx(B,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:D.map(T=>{const Z=a[f]===T.id,le=Rs[T.rarity||"common"];return e.jsxs(L.div,{whileHover:{scale:1.05},className:`p-3 rounded-lg border-2 transition-all text-center ${Z?`${le.borderColor} bg-primary/5`:"border-border hover:border-primary/50"}`,children:[T.type==="theme"&&T.preview?e.jsx("div",{className:"w-16 h-16 rounded-lg mx-auto mb-2 border-2 border-white/20",style:{backgroundColor:T.preview}}):e.jsx("div",{className:"text-4xl mb-2",children:T.icon||T.preview}),e.jsx("p",{className:"text-xs font-medium mb-2 line-clamp-1",children:T.name}),Z?e.jsx(ye,{variant:"default",className:"w-full text-xs",children:"√âquip√© ‚úì"}):e.jsx(A,{size:"sm",variant:"outline",className:"w-full text-xs",onClick:()=>M(T.id,T.type),disabled:l,children:"√âquiper"})]},T.id)})})})]},f))})},"items"):e.jsx(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:k.length===0?e.jsx(O,{children:e.jsxs(B,{className:"p-12 text-center",children:[e.jsx(Ke,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Aucune lootbox"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Achetez des lootboxes dans la boutique"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map(f=>{const D=Rs[f.rarity||"common"];return e.jsx(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.03},children:e.jsxs(O,{className:`border-2 ${D.borderColor} relative overflow-hidden`,children:[f.count>1&&e.jsx("div",{className:"absolute top-2 right-2 bg-primary text-primary-foreground rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm z-10",children:f.count}),e.jsxs(he,{children:[e.jsx(L.div,{className:"text-6xl text-center mb-2",animate:{rotate:[0,-10,10,-10,0]},transition:{duration:2,repeat:1/0,repeatDelay:1},children:f.icon||"üéÅ"}),e.jsx(pe,{className:"text-center",children:f.name}),e.jsx(ye,{className:`${D.color} text-white mx-auto`,children:D.label})]}),e.jsxs(B,{children:[e.jsx("p",{className:"text-sm text-muted-foreground text-center mb-4",children:f.description}),e.jsx(A,{className:"w-full",onClick:()=>U(f.id),disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-4 w-4 mr-2 animate-spin"}),"Ouverture..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Ouvrir"]})})]})]})},f.id)})})},"lootboxes")}),e.jsx(He,{children:x&&b&&e.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",onClick:()=>j(!1),children:e.jsx(L.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},className:"max-w-2xl w-full",onClick:f=>f.stopPropagation(),children:e.jsxs(O,{className:"border-2 border-primary shadow-2xl",children:[e.jsxs(he,{className:"text-center pb-4",children:[e.jsx(L.div,{animate:{rotate:[0,360]},transition:{duration:1,ease:"easeInOut"},className:"text-6xl mb-4",children:"üéâ"}),e.jsx(pe,{className:"text-3xl",children:"R√©compenses obtenues!"}),e.jsxs("p",{className:"text-muted-foreground mt-2",children:["Bonus de fortune: ",e.jsxs("span",{className:"text-primary font-bold",children:[b.fortuneBonus,"‚Ç¨"]})]})]}),e.jsxs(B,{children:[e.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:b.rewards.map((f,D)=>{const T=De.find(le=>le.id===f.itemId),Z=Rs[f.rarity];return e.jsxs(L.div,{initial:{opacity:0,scale:0,rotateY:180},animate:{opacity:1,scale:1,rotateY:0},transition:{delay:D*.2,duration:.5},className:`p-4 rounded-lg border-2 ${Z.borderColor} ${Z.color} bg-opacity-10 text-center`,children:[e.jsx("div",{className:"text-5xl mb-2",children:(T==null?void 0:T.icon)||(T==null?void 0:T.preview)||"üéÅ"}),e.jsx("p",{className:"text-sm font-medium mb-1",children:T==null?void 0:T.name}),e.jsx(ye,{className:`${Z.color} text-white text-xs`,children:Z.label})]},D)})}),e.jsxs(A,{className:"w-full",size:"lg",onClick:()=>j(!1),children:[e.jsx(si,{className:"h-4 w-4 mr-2"}),"G√©nial!"]})]})]})})})})]})})},$s=13,Br=14.25,Ac=5,es=50,rt=25,Tc=()=>{const{user:s,userProfile:t}=qe(),[r,a]=u.useState(null),[n,i]=u.useState(!1),[o,l]=u.useState(!1),[d,c]=u.useState(!1),[m,y]=u.useState("solo"),[h,b]=u.useState(""),[p,x]=u.useState([]),[j,v]=u.useState(!1),[M,U]=u.useState(!1),[V,I]=u.useState(0),[H,k]=u.useState(""),[F,J]=u.useState(!1);u.useEffect(()=>{if(!s)return;f();const C=setInterval(D,1e3);return()=>clearInterval(C)},[s]),u.useEffect(()=>{const g=setTimeout(async()=>{if(h.length<2){x([]),U(!1);return}v(!0);try{const q=(await al(h)).filter(P=>P.id!==(s==null?void 0:s.uid));x(q),U(q.length>0)}catch(S){console.error("Erreur recherche partenaires:",S),x([])}finally{v(!1)}},300);return()=>clearTimeout(g)},[h,s]);const f=async()=>{if(s)try{const C=E(R,`users/${s.uid}`),g=await G(C);g.exists()&&I(g.val().fortune||0);const S=E(R,"tournaments/active"),q=await G(S);if(q.exists()){const P=q.val();a(P);const _=P.players.some(ee=>ee.userId===s.uid);i(_)}else a(null),i(!1)}catch(C){console.error("Erreur chargement tournoi:",C),w({title:"Erreur",description:"Impossible de charger les donn√©es du tournoi",variant:"destructive"})}},D=()=>{const C=new Date,g=C.getHours()+C.getMinutes()/60;if(g>=$s&&g<Br){const S=Br-g,q=Math.floor(S*60);k(`En cours - ${q} min restantes`)}else if(g<$s){const S=$s-g,q=Math.floor(S),P=Math.floor((S-q)*60);k(`D√©bute dans ${q}h ${P}min`)}else k("Termin√© pour aujourd'hui")},T=C=>{b(C.username),U(!1),x([])},Z=async()=>{if(!s||!t)return;const C=m==="duo"?rt:es;if(V<C){w({title:"Fonds insuffisants",description:`Il vous faut ${C}‚Ç¨ pour participer (vous avez ${V}‚Ç¨)`,variant:"destructive"});return}if(m==="duo"&&!h.trim()){w({title:"Partenaire requis",description:"Entrez le nom de votre partenaire",variant:"destructive"});return}J(!0);try{let g,S;if(m==="duo"){const _e=E(R,"users"),Te=await G(_e);if(Te.exists()){const et=Te.val(),Ve=Object.entries(et).find(([fs,Pe])=>{var Jt;return((Jt=Pe.username)==null?void 0:Jt.toLowerCase())===h.toLowerCase()});if(!Ve){w({title:"Partenaire introuvable",description:"Aucun joueur avec ce nom",variant:"destructive"}),J(!1);return}g=Ve[0],S=Ve[1].username;const Lt=Ve[1].fortune||0;if(Lt<rt){w({title:"Partenaire sans fonds",description:`${S} n'a pas assez de fortune (${Lt}‚Ç¨ / ${rt}‚Ç¨)`,variant:"destructive"}),J(!1);return}}}const q=E(R,"tournaments/active"),P=await G(q);let _;if(P.exists())_=P.val();else{const _e=Date.now();_={id:`tournament_${_e}`,startTime:_e,endTime:_e+75*60*1e3,isActive:!0,players:[],matches:{},winners:[],prizePool:0,currentRound:0}}if(_.players.some(_e=>_e.userId===s.uid)){w({title:"D√©j√† inscrit",description:"Vous √™tes d√©j√† inscrit √† ce tournoi",variant:"destructive"}),J(!1);return}const re={userId:s.uid,username:t.username,eloRating:t.eloRating||1e3,partnerId:g,partnerUsername:S};_.players.push(re);let Ce=C;m==="duo"&&g&&(Ce+=rt),_.prizePool+=Ce;const Ne={};if(Ne[`users/${s.uid}/fortune`]=V-C,m==="duo"&&g){const _e=E(R,`users/${g}`),Te=await G(_e);if(Te.exists()){const et=Te.val();Ne[`users/${g}/fortune`]=(et.fortune||0)-rt}}Ne["tournaments/active"]=_,await fe(E(R),Ne),w({title:"Inscription r√©ussie! üéâ",description:`Vous √™tes inscrit ${m==="duo"?`en duo (${Ce}‚Ç¨ total)`:`en solo (${C}‚Ç¨)`}`}),c(!1),b(""),y("solo"),f()}catch(g){console.error("Erreur inscription:",g),w({title:"Erreur",description:g.message||"Impossible de s'inscrire au tournoi",variant:"destructive"})}finally{J(!1)}},le=async(C,g,S)=>{if(r)try{const q={},P=g==="team1"?"score1":"score2";q[`tournaments/active/matches/${C}/${P}`]=S,await fe(E(R),q),await f(),w({title:"Score mis √† jour",description:`${g==="team1"?"√âquipe 1":"√âquipe 2"}: ${S} points`})}catch(q){console.error("Erreur mise √† jour score:",q),w({title:"Erreur",description:q.message,variant:"destructive"})}},ve=async C=>{if(!r)return;const g=r.matches[C];if(g&&confirm(`‚úÖ Terminer le match ${g.team1.playerNames[0]} vs ${g.team2.playerNames[0]} ?`))try{const S=g.score1>g.score2?g.team1.playerIds[0]:g.team2.playerIds[0],q={};q[`tournaments/active/matches/${C}/status`]="completed",q[`tournaments/active/matches/${C}/winnerId`]=S,await fe(E(R),q),await f(),w({title:"Match termin√©! üèÅ",description:`Score final: ${g.score1} - ${g.score2}`}),await me()}catch(S){console.error("Erreur fin de match:",S),w({title:"Erreur",description:S.message,variant:"destructive"})}},me=async()=>{if(!r)return;const C=Object.values(r.matches),g=r.currentRound||1,S=C.filter(_=>_.round===g);if(!S.every(_=>_.status==="completed"))return;const P=S.map(_=>_.score1>_.score2?{userId:_.team1.playerIds[0],username:_.team1.playerNames[0],partnerId:_.team1.partnerId,partnerName:_.team1.partnerName}:{userId:_.team2.playerIds[0],username:_.team2.playerNames[0],partnerId:_.team2.partnerId,partnerName:_.team2.partnerName});if(P.length===1){await te(P[0].userId);return}w({title:"üéä Round termin√©!",description:`${P.length} gagnants passent au prochain round`}),setTimeout(()=>{K(P)},2e3)},K=async C=>{if(r)try{const g=(r.currentRound||1)+1,S={...r.matches};for(let P=C.length-1;P>0;P--){const _=Math.floor(Math.random()*(P+1));[C[P],C[_]]=[C[_],C[P]]}for(let P=0;P<C.length-1;P+=2){const _=C[P],ee=C[P+1];if(_&&ee){const re=`match_round${g}_${P}`;S[re]={id:re,round:g,team1:{playerIds:[_.userId],playerNames:[_.username],partnerId:_.partnerId||null,partnerName:_.partnerName||null},team2:{playerIds:[ee.userId],playerNames:[ee.username],partnerId:ee.partnerId||null,partnerName:ee.partnerName||null},status:"pending",startTime:Date.now(),score1:0,score2:0}}}const q={};q["tournaments/active/matches"]=S,q["tournaments/active/currentRound"]=g,await fe(E(R),q),await f(),w({title:`üéÆ Round ${g} cr√©√©!`,description:`${Math.floor(C.length/2)} nouveaux matchs`})}catch(g){console.error("Erreur cr√©ation round:",g),w({title:"Erreur",description:g.message,variant:"destructive"})}},te=async C=>{if(r)try{const g=r.players.find(re=>re.userId===C);if(!g)return;const S=r.prizePool,q=Math.floor(S*.5),P={},_=E(R,`users/${C}`),ee=await G(_);if(ee.exists()){const re=ee.val().fortune||0;P[`users/${C}/fortune`]=re+q}P["tournaments/active/status"]="completed",P["tournaments/active/winners"]=[C],P["tournaments/active/isActive"]=!1,await fe(E(R),P),await f(),w({title:"üèÜ TOURNOI TERMIN√â!",description:`${g.username} remporte ${q}‚Ç¨!`})}catch(g){console.error("Erreur fin tournoi:",g),w({title:"Erreur",description:g.message,variant:"destructive"})}},se=async()=>{if(!r){w({title:"Erreur",description:"Aucun tournoi actif",variant:"destructive"});return}if(r.players.length<2){w({title:"Erreur",description:"Il faut au moins 2 joueurs",variant:"destructive"});return}if(confirm(`‚ö†Ô∏è Lancer le tournoi avec ${r.players.length} joueurs ?`)){J(!0);try{const C=[...r.players],g=[];for(let P=C.length-1;P>0;P--){const _=Math.floor(Math.random()*(P+1));[C[P],C[_]]=[C[_],C[P]]}for(let P=0;P<C.length-1;P+=2){const _=C[P],ee=C[P+1];_&&ee&&g.push({id:`match_round1_${P}`,round:1,team1:{playerIds:[_.userId],playerNames:[_.username],partnerId:_.partnerId||null,partnerName:_.partnerUsername||null},team2:{playerIds:[ee.userId],playerNames:[ee.username],partnerId:ee.partnerId||null,partnerName:ee.partnerUsername||null},status:"pending",startTime:Date.now(),score1:0,score2:0})}if(g.length===0){w({title:"Erreur",description:"Impossible de cr√©er les matchs",variant:"destructive"}),J(!1);return}const S={};g.forEach(P=>{S[P.id]=P});const q={};q["tournaments/active/matches"]=S,q["tournaments/active/status"]="in_progress",q["tournaments/active/currentRound"]=1,await fe(E(R),q),w({title:"üéÆ Tournoi lanc√©!",description:`${g.length} matchs cr√©√©s pour le Round 1`}),await f()}catch(C){console.error("Erreur lancement tournoi:",C),w({title:"Erreur",description:C.message,variant:"destructive"})}finally{J(!1)}}},ue=async()=>{if(confirm("‚ö†Ô∏è Inscrire TOUS les joueurs au tournoi ?")){J(!0);try{const C=E(R,"users"),S=(await G(C)).val();if(!S){w({title:"Erreur",description:"Aucun utilisateur trouv√©",variant:"destructive"});return}const q=E(R,"tournaments/active"),P=await G(q);let _;if(P.exists())_=P.val();else{const Ne=Date.now();_={id:`tournament_${Ne}`,startTime:Ne,endTime:Ne+75*60*1e3,isActive:!0,players:[],matches:{},winners:[],prizePool:0,currentRound:0}}const ee=50;let re=0;const Ce={};Object.keys(S).forEach(Ne=>{const _e=S[Ne];if(_.players.some(et=>et.userId===Ne))return;const Te=_e.fortune||0;Te<ee||(_.players.push({userId:Ne,username:_e.username,eloRating:_e.eloRating||1e3}),Ce[`users/${Ne}/fortune`]=Te-ee,_.prizePool+=ee,re++)}),Ce["tournaments/active"]=_,await fe(E(R),Ce),w({title:"‚úÖ Inscription r√©ussie!",description:`${re} joueurs inscrits - Cagnotte: ${_.prizePool}‚Ç¨`}),await f()}catch(C){w({title:"Erreur",description:C.message,variant:"destructive"})}finally{J(!1)}}},$=()=>{if(!(r!=null&&r.matches))return{};const C={};return Object.values(r.matches).forEach(g=>{C[g.round]||(C[g.round]=[]),C[g.round].push(g)}),C};return e.jsx(Oe,{children:e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx(L.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"mb-4 text-6xl",children:"üèÜ"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Tournoi Quotidien"}),e.jsx("p",{className:"text-muted-foreground",children:H}),(r==null?void 0:r.status)&&e.jsx(ye,{className:"mt-2",variant:r.status==="completed"?"default":"secondary",children:r.status==="in_progress"?"üéÆ En cours":r.status==="completed"?"‚úÖ Termin√©":"‚è≥ En attente"}),e.jsxs("div",{className:"flex gap-2 justify-center mt-2",children:[e.jsx(A,{onClick:ue,variant:"outline",size:"sm",className:"border-yellow-500 text-yellow-500 hover:bg-yellow-500/10",disabled:F,children:F?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-4 w-4 animate-spin mr-2"}),"Inscription..."]}):e.jsx(e.Fragment,{children:"üß™ Inscrire tous"})}),r&&r.players.length>=2&&!r.status&&e.jsx(A,{onClick:se,variant:"outline",size:"sm",className:"border-green-500 text-green-500 hover:bg-green-500/10",disabled:F,children:F?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-4 w-4 animate-spin mr-2"}),"Lancement..."]}):e.jsx(e.Fragment,{children:"üéÆ Lancer tournoi"})})]})]}),e.jsxs(O,{className:"mb-6 border-primary/50",children:[e.jsx(he,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-5 w-5 text-primary"}),"Informations du Tournoi"]})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Horaires"}),e.jsx("span",{className:"font-bold",children:"13h00 - 14h15"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Dur√©e des matchs"}),e.jsxs("span",{className:"font-bold",children:[Ac," minutes"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Frais d'inscription"}),e.jsx("span",{className:"font-bold text-primary",children:"50‚Ç¨ solo / 25‚Ç¨ duo"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Cagnotte"}),e.jsxs("span",{className:"font-bold text-yellow-500",children:[(r==null?void 0:r.prizePool)||0,"‚Ç¨"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Joueurs inscrits"}),e.jsx("span",{className:"font-bold",children:(r==null?void 0:r.players.length)||0})]}),(r==null?void 0:r.currentRound)&&r.currentRound>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Round actuel"}),e.jsxs("span",{className:"font-bold text-primary",children:["Round ",r.currentRound]})]})]})]}),!n&&(r==null?void 0:r.status)!=="in_progress"&&(r==null?void 0:r.status)!=="completed"?e.jsx(O,{className:"mb-6",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx(Fe,{className:"h-16 w-16 mx-auto mb-4 text-yellow-500"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Rejoindre le tournoi"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Participez seul ou en duo au tournoi quotidien"}),e.jsxs("div",{className:"flex gap-3 justify-center mb-4",children:[e.jsx(A,{onClick:()=>l(!0),variant:"outline",children:"Voir les r√®gles"}),e.jsx(A,{onClick:()=>c(!0),variant:"default",className:"bg-primary hover:bg-primary/90",disabled:F,children:F?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-4 w-4 animate-spin mr-2"}),"Inscription..."]}):"S'inscrire"})]}),!1]})}):n?e.jsx(O,{className:"mb-6 border-primary",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx(yt,{className:"h-16 w-16 mx-auto mb-4 text-primary"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Vous √™tes inscrit! ‚úÖ"}),e.jsx("p",{className:"text-muted-foreground",children:"Bonne chance pour le tournoi"})]})}):null,r&&r.players.length>0&&e.jsxs(O,{className:"mb-6",children:[e.jsx(he,{children:e.jsxs(pe,{children:["Participants (",r.players.length,")"]})}),e.jsx(B,{children:e.jsx("div",{className:"space-y-2",children:r.players.map((C,g)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg transition-colors ${C.userId===(s==null?void 0:s.uid)?"bg-primary/20 border border-primary/50":"bg-surface-alt"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ye,{variant:"outline",children:["#",g+1]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:C.username}),C.partnerUsername&&e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(Ae,{className:"h-3 w-3"}),"avec ",C.partnerUsername]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-bold",children:C.eloRating})]})]},C.userId))})})]}),r&&r.matches&&Object.keys(r.matches).length>0&&e.jsx("div",{className:"space-y-6",children:Object.entries($()).sort(([C],[g])=>Number(g)-Number(C)).map(([C,g])=>e.jsxs(O,{children:[e.jsx(he,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:["üéÆ Round ",C,e.jsxs(ye,{variant:"secondary",children:[g.length," match",g.length>1?"s":""]}),Number(C)===r.currentRound&&e.jsx(ye,{variant:"default",className:"ml-2",children:"En cours"})]})}),e.jsx(B,{children:e.jsx("div",{className:"space-y-4",children:g.map((S,q)=>{const P=Object.keys(r.matches).find(_=>r.matches[_].id===S.id);return e.jsxs("div",{className:"p-4 rounded-lg bg-surface-alt border border-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs(ye,{variant:"outline",children:["Match #",q+1]}),e.jsx(ye,{variant:S.status==="completed"?"default":S.status==="in_progress"?"secondary":"outline",children:S.status==="completed"?"‚úÖ Termin√©":S.status==="in_progress"?"üéÆ En cours":"‚è≥ En attente"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded bg-surface border border-border",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"font-bold text-foreground",children:[S.team1.playerNames.join(" & "),S.team1.partnerName&&` & ${S.team1.partnerName}`]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[S.status!=="completed"&&P&&e.jsxs(e.Fragment,{children:[e.jsx(A,{size:"sm",variant:"outline",onClick:()=>le(P,"team1",Math.max(0,S.score1-1)),disabled:S.score1<=0,children:"-"}),e.jsx("span",{className:"text-2xl font-bold w-12 text-center",children:S.score1}),e.jsx(A,{size:"sm",variant:"outline",onClick:()=>le(P,"team1",S.score1+1),children:"+"})]}),S.status==="completed"&&e.jsx("span",{className:`text-3xl font-bold ${S.winnerId===S.team1.playerIds[0]?"text-primary":"text-muted-foreground"}`,children:S.score1})]})]}),e.jsx("div",{className:"text-center text-muted-foreground font-bold",children:"VS"}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded bg-surface border border-border",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"font-bold text-foreground",children:[S.team2.playerNames.join(" & "),S.team2.partnerName&&` & ${S.team2.partnerName}`]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[S.status!=="completed"&&P&&e.jsxs(e.Fragment,{children:[e.jsx(A,{size:"sm",variant:"outline",onClick:()=>le(P,"team2",Math.max(0,S.score2-1)),disabled:S.score2<=0,children:"-"}),e.jsx("span",{className:"text-2xl font-bold w-12 text-center",children:S.score2}),e.jsx(A,{size:"sm",variant:"outline",onClick:()=>le(P,"team2",S.score2+1),children:"+"})]}),S.status==="completed"&&e.jsx("span",{className:`text-3xl font-bold ${S.winnerId===S.team2.playerIds[0]?"text-primary":"text-muted-foreground"}`,children:S.score2})]})]}),S.status!=="completed"&&P&&e.jsx(A,{onClick:()=>ve(P),className:"w-full",variant:"default",children:"üèÅ Terminer le match"}),S.status==="completed"&&e.jsx("div",{className:"text-center p-2 bg-primary/10 rounded",children:e.jsxs("p",{className:"text-sm font-bold text-primary",children:["üèÜ Vainqueur: ",S.winnerId===S.team1.playerIds[0]?S.team1.playerNames[0]:S.team2.playerNames[0]]})})]})]},S.id)})})})]},C))}),(r==null?void 0:r.status)==="completed"&&r.winners.length>0&&e.jsx(O,{className:"mb-6 border-yellow-500 bg-gradient-to-br from-yellow-500/10 to-transparent",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx(L.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:1,repeat:1/0},className:"text-6xl mb-4",children:"üèÜ"}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Tournoi termin√©!"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"F√©licitations au gagnant! üéâ"}),e.jsxs("div",{className:"text-3xl font-bold text-yellow-500",children:[Math.floor(r.prizePool*.5),"‚Ç¨"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Gain du vainqueur"})]})}),e.jsx($e,{open:o,onOpenChange:l,children:e.jsxs(Se,{className:"max-w-2xl",children:[e.jsx(Ee,{children:e.jsxs(Re,{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-5 w-5 text-primary"}),"R√®gles du Tournoi"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-2",children:"‚è∞ Horaires"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Le tournoi se d√©roule tous les jours de ",e.jsx("strong",{children:"13h00 √† 14h15"})," (1h15 de comp√©tition)"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-2",children:"üë• Modes de jeu"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Solo :"})," Affrontez les autres joueurs individuellement"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Duo :"})," Formez une √©quipe avec un partenaire"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-2",children:"üéÆ D√©roulement"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("li",{children:["‚Ä¢ Chaque match dure exactement ",e.jsx("strong",{children:"5 minutes"})]}),e.jsxs("li",{children:["‚Ä¢ Les matchs sont organis√©s en ",e.jsx("strong",{children:"√©limination directe"})]}),e.jsx("li",{children:"‚Ä¢ Le gagnant de chaque match passe au round suivant"}),e.jsx("li",{children:"‚Ä¢ Le tournoi continue jusqu'√† ce qu'il ne reste qu'un seul vainqueur"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-2",children:"üí∞ R√©compenses"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("li",{children:["‚Ä¢ Frais d'inscription : ",e.jsx("strong",{children:"50‚Ç¨ en solo"})," ou ",e.jsx("strong",{children:"25‚Ç¨ par personne en duo"})]}),e.jsx("li",{children:"‚Ä¢ La cagnotte totale est redistribu√©e aux gagnants"}),e.jsx("li",{children:"‚Ä¢ ü•á 1er : 50% de la cagnotte"}),e.jsx("li",{children:"‚Ä¢ ü•à 2√®me : 30% de la cagnotte"}),e.jsx("li",{children:"‚Ä¢ ü•â 3√®me : 20% de la cagnotte"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-2",children:"üéÅ Bonus"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Les bonus de club sont actifs pendant le tournoi !"})]})]})]})}),e.jsx($e,{open:d,onOpenChange:c,children:e.jsxs(Se,{children:[e.jsx(Ee,{children:e.jsx(Re,{children:"Inscription au Tournoi"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:["Votre fortune : ",e.jsxs("span",{className:"font-bold text-foreground",children:[V,"‚Ç¨"]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Frais d'inscription : ",e.jsxs("span",{className:"font-bold text-primary",children:[m==="duo"?rt:es,"‚Ç¨"]})]}),V<(m==="duo"?rt:es)&&e.jsx("p",{className:"text-xs text-destructive mb-4",children:"‚ö†Ô∏è Vous n'avez pas assez de fortune pour participer"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(A,{variant:m==="solo"?"default":"outline",onClick:()=>y("solo"),className:"h-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fe,{className:"h-6 w-6 mx-auto mb-1"}),e.jsx("p",{className:"font-bold",children:"Solo"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"50‚Ç¨"})]})}),e.jsx(A,{variant:m==="duo"?"default":"outline",onClick:()=>y("duo"),className:"h-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ae,{className:"h-6 w-6 mx-auto mb-1"}),e.jsx("p",{className:"font-bold",children:"Duo"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"25‚Ç¨"})]})})]}),m==="duo"&&e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Nom du partenaire"}),e.jsxs("div",{className:"relative",children:[e.jsx(ss,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground z-10"}),j&&e.jsx(ce,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 animate-spin text-muted-foreground z-10"}),e.jsx("input",{type:"text",value:h,onChange:C=>b(C.target.value),onFocus:()=>h.length>=2&&p.length>0&&U(!0),placeholder:"Tapez au moins 2 lettres...",className:"w-full pl-10 pr-4 py-2 bg-surface border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsx(He,{children:M&&p.length>0&&e.jsx(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute z-50 w-full mt-1 bg-surface border border-border rounded-lg shadow-lg max-h-60 overflow-y-auto",children:p.map(C=>e.jsxs("button",{onClick:()=>T(C),className:"w-full px-4 py-3 text-left hover:bg-surface-alt transition-colors flex items-center justify-between group",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground group-hover:text-primary",children:C.username}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-2 mt-0.5",children:[e.jsx(Gt,{className:"h-3 w-3"}),C.eloRating," ELO",e.jsxs("span",{className:"ml-2",children:["üí∞ ",C.fortune,"‚Ç¨"]})]})]}),e.jsx(Tt,{className:"h-4 w-4 text-muted-foreground group-hover:text-primary"})]},C.id))})}),h.length>0&&h.length<2&&e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Tapez au moins 2 lettres pour rechercher"})]}),e.jsx(A,{onClick:Z,className:"w-full",disabled:V<(m==="duo"?rt:es)||F,children:F?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-4 w-4 animate-spin mr-2"}),"Inscription en cours..."]}):"Confirmer l'inscription"})]})]})})]})})},Mc=On,Oc=Pn,Ka=u.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(na,{ref:a,className:ie("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[t,e.jsx(Rn,{asChild:!0,children:e.jsx(ja,{className:"h-4 w-4 opacity-50"})})]}));Ka.displayName=na.displayName;const Xa=u.forwardRef(({className:s,...t},r)=>e.jsx(ia,{ref:r,className:ie("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(ri,{className:"h-4 w-4"})}));Xa.displayName=ia.displayName;const en=u.forwardRef(({className:s,...t},r)=>e.jsx(oa,{ref:r,className:ie("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(ja,{className:"h-4 w-4"})}));en.displayName=oa.displayName;const tn=u.forwardRef(({className:s,children:t,position:r="popper",...a},n)=>e.jsx($n,{children:e.jsxs(la,{ref:n,className:ie("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...a,children:[e.jsx(Xa,{}),e.jsx(An,{className:ie("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(en,{})]})}));tn.displayName=la.displayName;const Pc=u.forwardRef(({className:s,...t},r)=>e.jsx(ca,{ref:r,className:ie("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));Pc.displayName=ca.displayName;const Bs=u.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(da,{ref:a,className:ie("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Tn,{children:e.jsx(ot,{className:"h-4 w-4"})})}),e.jsx(Mn,{children:t})]}));Bs.displayName=da.displayName;const Dc=u.forwardRef(({className:s,...t},r)=>e.jsx(ua,{ref:r,className:ie("-mx-1 my-1 h-px bg-muted",s),...t}));Dc.displayName=ua.displayName;const Ic=()=>{var Xs,er;const{user:s,userProfile:t}=qe(),r=jt(),[a,n]=u.useState(!1),[i,o]=u.useState(!1),[l,d]=u.useState([]),[c,m]=u.useState([]),[y,h]=u.useState([]),[b,p]=u.useState([]),[x,j]=u.useState(""),[v,M]=u.useState({totalUsers:0,totalMatches:0,totalTournaments:0,totalBets:0,totalFortune:0,activeUsers:0}),[U,V]=u.useState(!1),[I,H]=u.useState(!1),[k,F]=u.useState(!1),[J,f]=u.useState(!1),[D,T]=u.useState(!1),[Z,le]=u.useState(null),[ve,me]=u.useState(null),[K,te]=u.useState(""),[se,ue]=u.useState(""),[$,C]=u.useState(""),[g,S]=u.useState("1000"),[q,P]=u.useState(""),[_,ee]=u.useState(""),[re,Ce]=u.useState(""),[Ne,_e]=u.useState(""),[Te,et]=u.useState("add"),[Ve,Lt]=u.useState(""),fs=[{id:"founder",name:"Fondateur",icon:"üëë",color:"gold"},{id:"veteran",name:"V√©t√©ran",icon:"‚öîÔ∏è",color:"silver"},{id:"champion",name:"Champion",icon:"üèÜ",color:"gold"},{id:"collector",name:"Collectionneur",icon:"üé¥",color:"purple"},{id:"millionaire",name:"Millionnaire",icon:"üí∞",color:"green"}];u.useEffect(()=>{s&&t&&(n(t.role==="admin"),t.role==="admin"&&Pe())},[s,t]);const Pe=async()=>{o(!0);try{const N=E(R,"users"),Q=await G(N);if(Q.exists()){const xe=Q.val(),Ie=Object.entries(xe).map(([mt,xt])=>({id:mt,...xt}));d(Ie);const zt=Ie.reduce((mt,xt)=>mt+(xt.fortune||0),0),hn=Ie.filter(mt=>{const xt=mt.lastActive||0;return Date.now()-xt<24*60*60*1e3}).length,pn=E(R,"matches"),tr=await G(pn);let sr=0,gs=[];if(tr.exists()){const mt=tr.val();gs=Object.entries(mt).map(([xt,gn])=>({id:xt,...gn})),sr=gs.length}m(gs);const fn=E(R,"tournaments"),rr=await G(fn);let ar=0;rr.exists()&&(ar=Object.keys(rr.val()).length),M({totalUsers:Ie.length,totalMatches:sr,totalTournaments:ar,totalBets:0,totalFortune:zt,activeUsers:hn})}o(!1)}catch(N){console.error("Erreur chargement donn√©es admin:",N),w({title:"Erreur",description:"Impossible de charger les donn√©es",variant:"destructive"}),o(!1)}},Jt=async()=>{if(!K||!se||!$){w({title:"Erreur",description:"Remplissez tous les champs",variant:"destructive"});return}o(!0);try{const N=os(),xe=(await Na(N,K,se)).user.uid,Ie=E(R,`users/${xe}`);await ut(Ie,{username:$,email:K,eloRating:parseInt(g),fortune:100,wins:0,losses:0,role:"player",banned:!1,createdAt:new Date().toISOString()}),w({title:"‚úÖ Utilisateur cr√©√©",description:`${$} a √©t√© ajout√©`}),V(!1),te(""),ue(""),C(""),S("1000"),Pe()}catch(N){console.error("Erreur cr√©ation utilisateur:",N),w({title:"Erreur",description:N.message,variant:"destructive"})}finally{o(!1)}},rn=async()=>{if(Z){o(!0);try{const N=E(R,`users/${Z.id}`),Q={};q&&(Q.eloRating=parseInt(q)),_&&(Q.fortune=parseInt(_)),re&&(Q.role=re),await fe(N,Q),w({title:"‚úÖ Utilisateur modifi√©",description:"Les modifications ont √©t√© sauvegard√©es"}),H(!1),le(null),P(""),ee(""),Ce(""),Pe()}catch(N){console.error("Erreur modification utilisateur:",N),w({title:"Erreur",description:N.message,variant:"destructive"})}finally{o(!1)}}},an=async(N,Q)=>{if(confirm(`‚ö†Ô∏è Supprimer d√©finitivement ${Q} ?

Cette action est irr√©versible.`)){o(!0);try{const xe=E(R,`users/${N}`);await rs(xe),w({title:"üóëÔ∏è Utilisateur supprim√©",description:`${Q} a √©t√© retir√© de la base de donn√©es`}),Pe()}catch(xe){console.error("Erreur suppression utilisateur:",xe),w({title:"Erreur",description:xe.message,variant:"destructive"})}finally{o(!1)}}},nn=async()=>{if(!Z||!Ne)return;const N=parseInt(Ne);if(isNaN(N)||N<=0){w({title:"Erreur",description:"Montant invalide",variant:"destructive"});return}o(!0);try{const Q=E(R,`users/${Z.id}`),xe=await G(Q);if(xe.exists()){const Ie=xe.val().fortune||0,zt=Te==="add"?Ie+N:Math.max(0,Ie-N);await fe(Q,{fortune:zt}),w({title:"üí∞ Fortune mise √† jour",description:`${Te==="add"?"+":"-"}${N}‚Ç¨`}),F(!1),_e(""),Pe()}}catch(Q){console.error("Erreur gestion fortune:",Q),w({title:"Erreur",description:Q.message,variant:"destructive"})}finally{o(!1)}},on=async()=>{var N;if(!(!Z||!Ve)){o(!0);try{const Q=E(R,`users/${Z.id}`),xe=await G(Q);if(xe.exists()){const Ie=xe.val().badges||[];Ie.includes(Ve)?w({title:"Badge d√©j√† poss√©d√©",description:"L'utilisateur a d√©j√† ce badge",variant:"destructive"}):(await fe(Q,{badges:[...Ie,Ve]}),w({title:"üèÖ Badge attribu√©",description:`Badge "${(N=fs.find(zt=>zt.id===Ve))==null?void 0:N.name}" donn√© √† ${Z.username}`})),f(!1),Lt(""),Pe()}}catch(Q){console.error("Erreur attribution badge:",Q),w({title:"Erreur",description:Q.message,variant:"destructive"})}finally{o(!1)}}},ln=async(N,Q)=>{if(confirm(`‚ö†Ô∏è Bannir ${Q} ?

L'utilisateur ne pourra plus se connecter.`)){o(!0);try{const xe=E(R,`users/${N}`);if(!(await G(xe)).exists()){w({title:"Erreur",description:"Utilisateur introuvable",variant:"destructive"});return}await fe(xe,{banned:!0,bannedAt:new Date().toISOString(),bannedBy:(s==null?void 0:s.uid)||"admin"}),w({title:"üö´ Utilisateur banni",description:`${Q} a √©t√© banni et ne peut plus se connecter`}),await Pe()}catch(xe){console.error("Erreur bannissement:",xe),w({title:"Erreur",description:xe.message||"Impossible de bannir l'utilisateur",variant:"destructive"})}finally{o(!1)}}},cn=async(N,Q)=>{if(confirm(`‚úÖ D√©bannir ${Q} ?

L'utilisateur pourra √† nouveau se connecter.`)){o(!0);try{const xe=E(R,`users/${N}`);if(!(await G(xe)).exists()){w({title:"Erreur",description:"Utilisateur introuvable",variant:"destructive"});return}await fe(xe,{banned:!1,unbannedAt:new Date().toISOString(),unbannedBy:(s==null?void 0:s.uid)||"admin"}),w({title:"‚úÖ Utilisateur d√©banni",description:`${Q} peut maintenant se reconnecter`}),await Pe()}catch(xe){console.error("Erreur d√©bannissement:",xe),w({title:"Erreur",description:xe.message||"Impossible de d√©bannir l'utilisateur",variant:"destructive"})}finally{o(!1)}}},dn=async N=>{if(confirm(`‚ö†Ô∏è Supprimer ce match ?

Cette action est irr√©versible.`)){o(!0);try{const Q=E(R,`matches/${N}`);await rs(Q),w({title:"üóëÔ∏è Match supprim√©",description:"Le match a √©t√© supprim√©"}),Pe()}catch(Q){console.error("Erreur suppression match:",Q),w({title:"Erreur",description:Q.message,variant:"destructive"})}finally{o(!1)}}},un=async()=>{if(confirm(`‚ö†Ô∏è ATTENTION : Remettre tous les ELO √† 1000 ?

Cette action est irr√©versible.`)){o(!0);try{const N={};l.forEach(Q=>{N[`users/${Q.id}/eloRating`]=1e3}),await fe(E(R),N),w({title:"üîÑ ELO reset",description:"Tous les joueurs sont √† 1000 ELO"}),Pe()}catch(N){console.error("Erreur reset ELO:",N),w({title:"Erreur",description:N.message,variant:"destructive"})}finally{o(!1)}}},mn=async()=>{if(confirm("üí∞ Ajouter 500‚Ç¨ √† tous les joueurs ?")){o(!0);try{const N={};l.forEach(Q=>{N[`users/${Q.id}/fortune`]=(Q.fortune||0)+500}),await fe(E(R),N),w({title:"üí∞ Fortune distribu√©e",description:"500‚Ç¨ ajout√©s √† tous les joueurs"}),Pe()}catch(N){console.error("Erreur ajout fortune:",N),w({title:"Erreur",description:N.message,variant:"destructive"})}finally{o(!1)}}},Ks=async()=>{if(confirm(`‚ö†Ô∏è DANGER : Supprimer TOUS les matchs ?

Cette action est IRR√âVERSIBLE.`)){o(!0);try{const N=E(R,"matches");await rs(N),w({title:"üóëÔ∏è Matchs supprim√©s",description:"Tous les matchs ont √©t√© effac√©s"}),Pe()}catch(N){console.error("Erreur suppression matchs:",N),w({title:"Erreur",description:N.message,variant:"destructive"})}finally{o(!1)}}},xn=l.filter(N=>{var Q,xe;return((Q=N.username)==null?void 0:Q.toLowerCase().includes(x.toLowerCase()))||((xe=N.email)==null?void 0:xe.toLowerCase().includes(x.toLowerCase()))});return t?a?i&&l.length===0?e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:e.jsx(ce,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto p-4 max-w-7xl",children:[e.jsx(L.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"rounded-xl bg-primary/20 p-3",children:e.jsx(it,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Panneau d'Administration"}),e.jsx("p",{className:"text-muted-foreground",children:"Gestion compl√®te de l'application"})]})]}),e.jsxs(A,{variant:"outline",onClick:()=>r("/"),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),"Retour"]})]})}),e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsx(O,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx(Ae,{className:"mx-auto mb-2 h-6 w-6 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:v.totalUsers}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Utilisateurs"})]})}),e.jsx(O,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx(lr,{className:"mx-auto mb-2 h-6 w-6 text-green-500"}),e.jsx("p",{className:"text-2xl font-bold",children:v.activeUsers}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Actifs 24h"})]})}),e.jsx(O,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx(Fe,{className:"mx-auto mb-2 h-6 w-6 text-yellow-500"}),e.jsx("p",{className:"text-2xl font-bold",children:v.totalMatches}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Matchs"})]})}),e.jsx(O,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx($t,{className:"mx-auto mb-2 h-6 w-6 text-purple-500"}),e.jsx("p",{className:"text-2xl font-bold",children:v.totalTournaments}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tournois"})]})}),e.jsx(O,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx(ai,{className:"mx-auto mb-2 h-6 w-6 text-blue-500"}),e.jsx("p",{className:"text-2xl font-bold",children:v.totalBets}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Paris"})]})}),e.jsx(O,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx(Rt,{className:"mx-auto mb-2 h-6 w-6 text-green-500"}),e.jsxs("p",{className:"text-2xl font-bold",children:[v.totalFortune,"‚Ç¨"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Fortune totale"})]})})]}),e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(Fa,{defaultValue:"users",className:"space-y-4",children:[e.jsxs(Hs,{className:"grid w-full grid-cols-2 md:grid-cols-5",children:[e.jsx(Ye,{value:"users",children:"üë§ Utilisateurs"}),e.jsx(Ye,{value:"matches",children:"‚öΩ Matchs"}),e.jsx(Ye,{value:"stats",children:"üìä Statistiques"}),e.jsx(Ye,{value:"actions",children:"‚ö° Actions"}),e.jsx(Ye,{value:"logs",children:"üìã Logs"})]}),e.jsxs(Ct,{value:"users",className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 justify-between items-start md:items-center",children:[e.jsxs("div",{className:"relative flex-1 w-full md:max-w-sm",children:[e.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{placeholder:"Rechercher un utilisateur...",value:x,onChange:N=>j(N.target.value),className:"pl-10"})]}),e.jsxs(A,{onClick:()=>V(!0),children:[e.jsx(St,{className:"mr-2 h-4 w-4"}),"Ajouter un utilisateur"]})]}),e.jsx("div",{className:"space-y-2",children:xn.map(N=>e.jsx(O,{className:N.banned?"opacity-50 border-destructive border-2":"",children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[e.jsx("div",{className:"rounded-full bg-primary/20 p-3 flex-shrink-0",children:e.jsx(Ae,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:"font-bold truncate",children:N.username}),N.role==="admin"&&e.jsx(ye,{variant:"default",children:"Admin"}),N.banned&&e.jsx(ye,{variant:"destructive",children:"Banni"})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:N.email}),e.jsxs("div",{className:"flex gap-3 text-xs text-muted-foreground mt-1 flex-wrap",children:[e.jsxs("span",{children:["‚ö° ",N.eloRating||1e3," ELO"]}),e.jsxs("span",{children:["üí∞ ",N.fortune||0,"‚Ç¨"]}),e.jsxs("span",{children:["üèÜ ",N.wins||0,"W - ",N.losses||0,"L"]})]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[e.jsx(A,{size:"sm",variant:"outline",onClick:()=>{le(N),F(!0)},title:"G√©rer la fortune",children:e.jsx(Rt,{className:"h-4 w-4"})}),e.jsx(A,{size:"sm",variant:"outline",onClick:()=>{le(N),f(!0)},title:"Donner un badge",children:e.jsx($t,{className:"h-4 w-4"})}),e.jsx(A,{size:"sm",variant:"outline",onClick:()=>{var Q,xe;le(N),P(((Q=N.eloRating)==null?void 0:Q.toString())||"1000"),ee(((xe=N.fortune)==null?void 0:xe.toString())||"0"),Ce(N.role||"player"),H(!0)},title:"Modifier",children:e.jsx(ni,{className:"h-4 w-4"})}),N.banned?e.jsx(A,{size:"sm",variant:"default",onClick:()=>cn(N.id,N.username),disabled:N.role==="admin",title:"D√©bannir",className:"bg-green-600 hover:bg-green-700",children:e.jsx(ot,{className:"h-4 w-4"})}):e.jsx(A,{size:"sm",variant:"destructive",onClick:()=>ln(N.id,N.username),disabled:N.role==="admin",title:"Bannir",children:e.jsx(ii,{className:"h-4 w-4"})}),e.jsx(A,{size:"sm",variant:"destructive",onClick:()=>an(N.id,N.username),disabled:N.role==="admin",title:"Supprimer",children:e.jsx(Yt,{className:"h-4 w-4"})})]})]})})},N.id))})]}),e.jsxs(Ct,{value:"matches",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Historique des matchs (",c.length,")"]}),e.jsxs(A,{variant:"destructive",onClick:Ks,disabled:i||c.length===0,children:[e.jsx(Yt,{className:"mr-2 h-4 w-4"}),"Tout supprimer"]})]}),e.jsx("div",{className:"space-y-2",children:c.length===0?e.jsx(O,{children:e.jsx(B,{className:"p-8 text-center text-muted-foreground",children:"Aucun match enregistr√©"})}):c.slice(0,50).map(N=>{var Q,xe;return e.jsx(O,{children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"√âquipe 1"}),e.jsx("p",{className:"font-bold",children:((Q=N.team1Names)==null?void 0:Q.join(" & "))||"?"}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:N.score1||0})]}),e.jsx("div",{className:"text-muted-foreground",children:"VS"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"√âquipe 2"}),e.jsx("p",{className:"font-bold",children:((xe=N.team2Names)==null?void 0:xe.join(" & "))||"?"}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:N.score2||0})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:new Date(N.date||N.timestamp).toLocaleString("fr-FR")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(A,{size:"sm",variant:"outline",onClick:()=>{me(N),T(!0)},children:e.jsx(hs,{className:"h-4 w-4"})}),e.jsx(A,{size:"sm",variant:"destructive",onClick:()=>dn(N.id),children:e.jsx(Yt,{className:"h-4 w-4"})})]})]})})},N.id)})})]}),e.jsxs(Ct,{value:"stats",className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Statistiques d√©taill√©es"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(O,{children:[e.jsx(he,{children:e.jsxs(pe,{className:"text-lg flex items-center gap-2",children:[e.jsx(oi,{className:"h-5 w-5 text-primary"}),"Top 5 Joueurs (ELO)"]})}),e.jsx(B,{className:"space-y-2",children:l.sort((N,Q)=>(Q.eloRating||1e3)-(N.eloRating||1e3)).slice(0,5).map((N,Q)=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-surface-alt",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ye,{variant:"outline",children:["#",Q+1]}),e.jsx("span",{className:"font-medium",children:N.username})]}),e.jsx("span",{className:"font-bold text-primary",children:N.eloRating||1e3})]},N.id))})]}),e.jsxs(O,{children:[e.jsx(he,{children:e.jsxs(pe,{className:"text-lg flex items-center gap-2",children:[e.jsx(Rt,{className:"h-5 w-5 text-green-500"}),"Top 5 Fortunes"]})}),e.jsx(B,{className:"space-y-2",children:l.sort((N,Q)=>(Q.fortune||0)-(N.fortune||0)).slice(0,5).map((N,Q)=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-surface-alt",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ye,{variant:"outline",children:["#",Q+1]}),e.jsx("span",{className:"font-medium",children:N.username})]}),e.jsxs("span",{className:"font-bold text-green-500",children:[N.fortune||0,"‚Ç¨"]})]},N.id))})]}),e.jsxs(O,{children:[e.jsx(he,{children:e.jsxs(pe,{className:"text-lg flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-yellow-500"}),"Top 5 Victoires"]})}),e.jsx(B,{className:"space-y-2",children:l.sort((N,Q)=>(Q.wins||0)-(N.wins||0)).slice(0,5).map((N,Q)=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-surface-alt",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ye,{variant:"outline",children:["#",Q+1]}),e.jsx("span",{className:"font-medium",children:N.username})]}),e.jsxs("span",{className:"font-bold text-yellow-500",children:[N.wins||0,"W"]})]},N.id))})]}),e.jsxs(O,{children:[e.jsx(he,{children:e.jsxs(pe,{className:"text-lg flex items-center gap-2",children:[e.jsx(lr,{className:"h-5 w-5 text-blue-500"}),"Activit√© r√©cente"]})}),e.jsx(B,{className:"space-y-2",children:l.filter(N=>N.lastActive).sort((N,Q)=>(Q.lastActive||0)-(N.lastActive||0)).slice(0,5).map(N=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-surface-alt",children:[e.jsx("span",{className:"font-medium",children:N.username}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(N.lastActive).toLocaleString("fr-FR")})]},N.id))})]})]})]}),e.jsxs(Ct,{value:"actions",className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Actions rapides"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(O,{children:[e.jsx(he,{children:e.jsxs(pe,{className:"text-lg flex items-center gap-2",children:[e.jsx(ba,{className:"h-5 w-5 text-yellow-500"}),"Actions dangereuses"]})}),e.jsxs(B,{className:"space-y-2",children:[e.jsxs(A,{variant:"destructive",className:"w-full",onClick:un,children:[e.jsx(Ze,{className:"mr-2 h-4 w-4"}),"Reset tous les ELO √† 1000"]}),e.jsxs(A,{variant:"destructive",className:"w-full",onClick:Ks,children:[e.jsx(Yt,{className:"mr-2 h-4 w-4"}),"Supprimer tous les matchs"]})]})]}),e.jsxs(O,{children:[e.jsx(he,{children:e.jsxs(pe,{className:"text-lg flex items-center gap-2",children:[e.jsx(ot,{className:"h-5 w-5 text-green-500"}),"Actions s√©curis√©es"]})}),e.jsxs(B,{className:"space-y-2",children:[e.jsxs(A,{variant:"outline",className:"w-full",onClick:mn,children:[e.jsx(cr,{className:"mr-2 h-4 w-4"}),"Ajouter 500‚Ç¨ √† tous"]}),e.jsxs(A,{variant:"outline",className:"w-full",onClick:Pe,children:[e.jsx($t,{className:"mr-2 h-4 w-4"}),"Recharger les donn√©es"]})]})]})]})]}),e.jsxs(Ct,{value:"logs",className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Logs d'activit√©"}),e.jsx(O,{children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx(xs,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Syst√®me de logs en d√©veloppement"})]})})]})]})}),e.jsx($e,{open:U,onOpenChange:V,children:e.jsxs(Se,{children:[e.jsx(Ee,{children:e.jsx(Re,{children:"Ajouter un utilisateur"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(we,{type:"text",placeholder:"Nom d'utilisateur",value:$,onChange:N=>C(N.target.value)}),e.jsx(we,{type:"email",placeholder:"Email",value:K,onChange:N=>te(N.target.value)}),e.jsx(we,{type:"password",placeholder:"Mot de passe (min 6 caract√®res)",value:se,onChange:N=>ue(N.target.value)}),e.jsx(we,{type:"number",placeholder:"ELO initial (1000)",value:g,onChange:N=>S(N.target.value)}),e.jsxs(A,{className:"w-full",onClick:Jt,disabled:i,children:[i?e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(St,{className:"mr-2 h-4 w-4"}),"Cr√©er l'utilisateur"]})]})]})}),e.jsx($e,{open:I,onOpenChange:H,children:e.jsxs(Se,{children:[e.jsx(Ee,{children:e.jsxs(Re,{children:["Modifier ",Z==null?void 0:Z.username]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"ELO"}),e.jsx(we,{type:"number",placeholder:"ELO",value:q,onChange:N=>P(N.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Fortune"}),e.jsx(we,{type:"number",placeholder:"Fortune",value:_,onChange:N=>ee(N.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"R√¥le"}),e.jsxs(Mc,{value:re,onValueChange:Ce,children:[e.jsx(Ka,{children:e.jsx(Oc,{placeholder:"S√©lectionner un r√¥le"})}),e.jsxs(tn,{children:[e.jsx(Bs,{value:"player",children:"Joueur"}),e.jsx(Bs,{value:"admin",children:"Administrateur"})]})]})]}),e.jsxs(A,{className:"w-full",onClick:rn,disabled:i,children:[i?e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(ot,{className:"mr-2 h-4 w-4"}),"Sauvegarder"]})]})]})}),e.jsx($e,{open:k,onOpenChange:F,children:e.jsxs(Se,{children:[e.jsx(Ee,{children:e.jsxs(Re,{children:["G√©rer la fortune de ",Z==null?void 0:Z.username]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Fortune actuelle: ",e.jsxs("span",{className:"font-bold text-foreground",children:[(Z==null?void 0:Z.fortune)||0,"‚Ç¨"]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(A,{variant:Te==="add"?"default":"outline",onClick:()=>et("add"),className:"w-full",children:[e.jsx(St,{className:"mr-2 h-4 w-4"}),"Ajouter"]}),e.jsxs(A,{variant:Te==="remove"?"default":"outline",onClick:()=>et("remove"),className:"w-full",children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),"Retirer"]})]}),e.jsx(we,{type:"number",placeholder:"Montant (‚Ç¨)",value:Ne,onChange:N=>_e(N.target.value),min:"1"}),e.jsxs(A,{className:"w-full",onClick:nn,disabled:i,children:[i?e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(cr,{className:"mr-2 h-4 w-4"}),"Confirmer"]})]})]})}),e.jsx($e,{open:J,onOpenChange:f,children:e.jsxs(Se,{children:[e.jsx(Ee,{children:e.jsxs(Re,{children:["Attribuer un badge √† ",Z==null?void 0:Z.username]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 gap-2",children:fs.map(N=>e.jsxs(A,{variant:Ve===N.id?"default":"outline",onClick:()=>Lt(N.id),className:"w-full justify-start",children:[e.jsx("span",{className:"text-2xl mr-3",children:N.icon}),e.jsx("div",{className:"text-left",children:e.jsx("p",{className:"font-bold",children:N.name})})]},N.id))}),e.jsxs(A,{className:"w-full",onClick:on,disabled:i||!Ve,children:[i?e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Donner le badge"]})]})]})}),e.jsx($e,{open:D,onOpenChange:T,children:e.jsxs(Se,{children:[e.jsx(Ee,{children:e.jsx(Re,{children:"D√©tails du match"})}),ve&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 rounded-lg bg-primary/10",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"√âquipe 1"}),e.jsx("p",{className:"font-bold mb-2",children:((Xs=ve.team1Names)==null?void 0:Xs.join(" & "))||"?"}),e.jsx("p",{className:"text-3xl font-bold text-primary",children:ve.score1||0})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-secondary/10",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"√âquipe 2"}),e.jsx("p",{className:"font-bold mb-2",children:((er=ve.team2Names)==null?void 0:er.join(" & "))||"?"}),e.jsx("p",{className:"text-3xl font-bold text-secondary",children:ve.score2||0})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-surface-alt",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),e.jsx("p",{className:"font-medium",children:new Date(ve.date||ve.timestamp).toLocaleString("fr-FR")})]}),ve.eloChanges&&e.jsxs("div",{className:"p-4 rounded-lg bg-surface-alt",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Changements ELO"}),e.jsx("div",{className:"space-y-1 text-sm",children:Object.entries(ve.eloChanges).map(([N,Q])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:N}),e.jsxs("span",{className:Q>0?"text-green-500":"text-red-500",children:[Q>0?"+":"",Q]})]},N))})]})]})]})})]})}):e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:e.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-destructive/20",children:e.jsx(it,{className:"h-8 w-8 text-destructive"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Acc√®s refus√©"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas les permissions d'administrateur"}),e.jsx(A,{onClick:()=>r("/"),children:"Retour √† l'accueil"})]})}):e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:e.jsx(ce,{className:"h-8 w-8 animate-spin text-primary"})})},Lc=new li,zc=()=>e.jsx(ci,{client:Lc,children:e.jsxs(fo,{children:[e.jsx(xi,{children:e.jsx(bo,{children:e.jsx(jo,{children:e.jsxs(hi,{children:[e.jsx(Le,{path:"/auth",element:e.jsx(jc,{})}),e.jsx(Le,{path:"/",element:e.jsx(We,{children:e.jsx(Io,{})})}),e.jsx(Le,{path:"/inventory",element:e.jsx($c,{})}),e.jsx(Le,{path:"/admin",element:e.jsx(We,{children:e.jsx(Ic,{})})}),e.jsx(Le,{path:"/leaderboard",element:e.jsx(We,{children:e.jsx(Jo,{})})}),e.jsx(Le,{path:"/match",element:e.jsx(We,{children:e.jsx(Ko,{})})}),e.jsx(Le,{path:"/babydex",element:e.jsx(We,{children:e.jsx(el,{})})}),e.jsx(Le,{path:"/betting",element:e.jsx(We,{children:e.jsx(_c,{})})}),e.jsx(Le,{path:"/profile",element:e.jsx(We,{children:e.jsx(Gl,{})})}),e.jsx(Le,{path:"/shop",element:e.jsx(We,{children:e.jsx(Sc,{})})}),e.jsx(Le,{path:"/clubs",element:e.jsx(We,{children:e.jsx(Rc,{})})}),e.jsx(Le,{path:"/tournament",element:e.jsx(We,{children:e.jsx(Tc,{})})}),e.jsx(Le,{path:"/reset-password/:token",element:e.jsx(Cc,{})}),e.jsx(Le,{path:"*",element:e.jsx(Nc,{})})]})})})}),e.jsx(co,{}),e.jsx(po,{})]})}),sn=document.getElementById("root");if(!sn)throw new Error("Root element not found");yn(sn).render(e.jsx(u.StrictMode,{children:e.jsx(zc,{})}));

<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ¯ Baby-Foot App</title>
  
  <link rel="stylesheet" href="style.css"> 
  
 <link rel="manifest" href="manifest.json">
<link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
<link rel="apple-touch-icon" href="icon-192.png"> 
<meta name="theme-color" content="#4CAF50">
<script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1343697001349278"
     crossorigin="anonymous"></script>
<meta name="google-adsense-account" content="ca-pub-1343697001349278">
</head>
<body>
  
    <section id="welcome-charter-modal" class="fullscreen-overlay" style="display:none;">
    <div class="modal-content">
        <h2>ğŸ‘‹ Bienvenue sur Baby-Foot App !</h2>
        <p>Merci de rejoindre la communautÃ©. Avant de commencer, veuillez prendre connaissance de notre charte d'utilisation.</p>
        
        <h3>ğŸ¯ Notre But</h3>
        <ul>
            <li><strong>Centraliser</strong> les matchs et statistiques de baby-foot.</li>
            <li><strong>CrÃ©er un environnement juste</strong> et amusant pour tous les joueurs.</li>
            <li><strong>Motiver</strong> Ã  jouer plus et Ã  s'amÃ©liorer.</li>
        </ul>

        <hr>

        <h3>âš ï¸ RÃ¨gles et Motif de Bannissement</h3>
        <p>Le respect de ces rÃ¨gles est obligatoire pour maintenir une communautÃ© saine :</p>
        <ul>
            <li><strong>Falsification de scores :</strong> Entrer un rÃ©sultat incorrect de maniÃ¨re volontaire pour manipuler les stats.</li>
            <li><strong>HarcÃ¨lement ou Insultes :</strong> Tout comportement abusif, harcelant, ou discours haineux envers d'autres membres.</li>
            <li><strong>Multi-comptes :</strong> CrÃ©er plusieurs comptes utilisateurs pour un seul joueur.</li>
            <li><strong>Triche sur les paris (Octets) :</strong> Toute manipulation du systÃ¨me de cotes ou de pari pour obtenir un avantage injustifiÃ©.</li>
        </ul>
        <p>Tout manquement Ã  ces rÃ¨gles entraÃ®nera un <strong>avertissement</strong> ou un <strong>bannissement immÃ©diat et permanent</strong> selon la gravitÃ©.</p>

        <button id="accept-charter-btn" class="primary-btn">J'ai lu et j'accepte la charte</button>
    </div>
</section>


  <section id="fullScreenMessage" class="fullscreen-overlay" style="display:none;">
    <h1 id="fs-title"></h1>
    <p id="fs-body"></p>
    <button id="fs-request-btn" style="display:none;">Faire une demande de rÃ©activation</button>
  </section>

  <div id="app-message" style="display: none;"></div>
  
  <section id="login-section">
    <h2>Connexion Ã  Baby-Foot App</h2>
    <div id="auth-forms">
      <input type="text" id="pseudo" placeholder="Pseudo" required>
      <input type="password" id="password" placeholder="Mot de passe" required>
      <button id="register-btn" class="action-btn">CrÃ©er un compte</button>
      <button id="local-login-btn" class="action-btn">Se connecter</button>
      
      <hr>
      <p>Ou</p>
      
      <button id="google-login-btn" class="action-btn">Se connecter avec Google</button>
    </div>
  </section>

  <header id="main-header" style="display:none;">
    <h1>âš½ Baby-Foot App</h1>
    <nav>
      <button onclick="showSection('queue')" class="nav-btn">ğŸ¯ File dâ€™attente</button>
      <button onclick="showSection('matches')" class="nav-btn">ğŸ’° Paris</button>
      <button onclick="showSection('leaderboard')" class="nav-btn">ğŸ† Classement</button>
      <button onclick="showSection('boosters')" class="nav-btn">ğŸš€ Booster</button>
      <button onclick="showSection('Baby-Dex')" class="nav-btn">ğŸ“˜ Baby-Dex</button>
      <button onclick="showSection('tournament')" class="nav-btn">ğŸ† Tournoi (Jeudi)</button>
      <button onclick="showSection('profile')" class="nav-btn">ğŸ‘¤ Profil</button>
      <button onclick="showSection('adminPanel')" class="nav-btn" id="admin-btn" style="display:none;">ğŸ‘¨â€ğŸ’¼ Admin</button>
    </nav>
  </header>
  
  <section id="queue" style="display:none;">
    <h2>ğŸ¯ File dâ€™attente</h2>
    <p id="currentPlayer">Joueur actuel : Aucun</p>
    
    <form id="queue-form">
      <input type="text" id="player-name" placeholder="Entre ton prÃ©nom ou pseudo" required>
      <button type="submit" class="action-btn">Rejoindre la file</button>
    </form>
    
    <h3>Liste d'attente</h3>
    <ol id="queue-list"></ol>
    <button id="next-btn" class="action-btn">Joueur suivant</button>
  </section>


  <section id="maintenance-screen" class="fullscreen-overlay" style="display:none; z-index: 10000; background-color: #f44336;">
        <div class="modal-content">
            <h2>ğŸ› ï¸ Maintenance en Cours</h2>
            <p>L'application est temporairement indisponible pour des raisons de maintenance et d'amÃ©lioration.</p>
            <p>Merci de votre patience !</p>
        </div>
    </section>


  <section id="adminPanel" style="display:none;">
    <h2>ğŸ‘¨â€ğŸ’¼ Panneau d'ADmin</h2>
    <nav class="admin-nav">
        <button onclick="showAdminSubPanel('reports')" class="nav-btn">Signalements</button>
        <button onclick="showAdminSubPanel('requestsPanel')" class="nav-btn">ğŸ“§ Demandes</button>
        <button onclick="showAdminSubPanel('blockedUsersPanel')" class="nav-btn">ğŸ”’ Utilisateurs BloquÃ©s</button>
        <button onclick="showAdminSubPanel('tournamentToolsPanel')" class="nav-btn">ğŸ› ï¸ Tournoi Test</button>
        <button class="admin-nav-btn" onclick="showAdminSubPanel('maintenancePanel')">âš™ï¸ Maintenance</button>
        <button class="sub-tab-button" onclick="showAdminSubPanel('taxes-admin-panel')">Taxes & ImpayÃ©s</button>
    </nav>

    <div id="reports" class="admin-sub-panel">
        <h3>Signalements de comportements suspects</h3>
        <ul id="suspiciousReports">
            </ul>
    </div>


    <div id="taxes-admin-panel" class="admin-sub-panel" style="display:none;">
    <h2>ğŸ’° Gestion des Taxes</h2>
    
    <p class="summary-stat">
        Cagnotte Totale des Taxes (Depuis le dÃ©but) : 
        <strong><span id="tax-pot-total">0.00 â‚¬</span></strong>
    </p>
    
    <hr>
    
    <h3>ğŸš¨ Utilisateurs avec Taxe ImpayÃ©e (PÃ©nalitÃ© AppliquÃ©e)</h3>
    <p>Cette liste affiche les utilisateurs ayant `hasUnpaidTaxPenalty: true`.</p>
    <ul id="unpaid-tax-list" class="report-list">
        <li>Chargement...</li>
    </ul>
</div>

    <div id="maintenancePanel" class="admin-sub-panel" style="display:none;">
    <h3>ContrÃ´le du Mode Maintenance</h3>
    <div id="maintenancePanelContent"><p>Chargement de l'Ã©tat de maintenance...</p></div>
    </div>

    <div id="requestsPanel" class="admin-sub-panel" style="display:none;">
        <h3>Demandes de RÃ©activation (DÃ©ban)</h3>
        <ul id="reactivation-requests-list">
            </ul>
    </div>

    <div id="blockedUsersPanel" class="admin-sub-panel" style="display:none;">
        <h3>Comptes BloquÃ©s</h3>
        <ul id="blocked-users-list">
            </ul>
    </div>

    <div id="tournamentToolsPanel" class="admin-sub-panel" style="display:none;">
    <h3>ğŸ› ï¸ Outils de Tournoi (Admin)</h3>
    <p>Utilisez ces outils pour gÃ©rer le tournoi pour les tests ou en cas d'urgence.</p>
    
    <button id="reset-tournament-test-btn" class="action-btn" style="background-color: #f44336; margin-top: 15px;">
        RÃ©initialiser le Tournoi
    </button>
    <p style="margin-top: 10px; font-weight: bold; font-size: 0.9em;">Ceci efface toutes les inscriptions et le bracket.</p>
    
    <hr style="margin: 20px 0;">
    
    <button id="force-start-tournament-btn" class="action-btn" style="background-color: #00bcd4; margin-top: 15px;">
        ğŸš€ Forcer le Lancement du Tournoi
    </button>
    <p style="margin-top: 10px; font-weight: bold; font-size: 0.9em;">Lance le bracket immÃ©diatement si au moins 2 Ã©quipes sont inscrites.</p>
</div>
</section>

  <section id="matches" style="display:none;">
    <h2>ğŸ’° Paris sur les Matchs</h2>
    <form id="create-match-form">
        <h3>CrÃ©er un Nouveau Match</h3>
        <input type="text" id="team1" placeholder="Nom Ã‰quipe 1" required>
        <input type="number" id="oddsTeam1" placeholder="Cote Ã‰quipe 1 (ex: 1.5)" step="0.01" min="1.01" required>
        
        <input type="text" id="team2" placeholder="Nom Ã‰quipe 2" required>
        <input type="number" id="oddsTeam2" placeholder="Cote Ã‰quipe 2 (ex: 2.5)" step="0.01" min="1.01" required>
        
        <button type="submit" class="action-btn">CrÃ©er le Match</button>
    </form>
    
    <h3 style="margin-top: 30px;">Matchs en Cours et TerminÃ©s</h3>
    <ul id="match-list">
        </ul>
  </section>

  <section id="leaderboard" style="display:none;">
    <h2>ğŸ† Solde des joueurs</h2>
    <ol id="ranking"></ol>
  </section>

  <section id="boosters" style="display:none;">
Â  Â  <h2>ğŸš€ Boosters de cartes</h2>
Â  Â  
Â  Â  
Â  Â  
Â  Â  <h3>Taux de Drop des Cartes</h3>
Â  Â  
Â  Â  <table id="drop-rate-table">
Â  Â  Â  Â  <thead>
Â  Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  Â  Â  <th>CatÃ©gorie</th>
Â  Â  Â  Â  Â  Â  Â  Â  <th class="rate-col">Taux de Drop</th>
Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  </thead>
Â  Â  Â  Â  <tbody>
Â  Â  Â  Â  Â  Â  <tr><td>Bronze-NR</td><td class="rate-col">26.5 %</td></tr>
Â  Â  Â  Â  Â  Â  <tr><td>Bronze-R</td><td class="rate-col">22.5 %</td></tr>
Â  Â  Â  Â  Â  Â  <tr><td>Silver-NR</td><td class="rate-col">15.0 %</td></tr>
Â  Â  Â  Â  Â  Â  <tr><td>Silver-R</td><td class="rate-col">11.5 %</td></tr>
Â  Â  Â  Â  Â  Â  <tr><td>Gold-NR</td><td class="rate-col">8.0 %</td></tr>
Â  Â  Â  Â  Â  Â  <tr><td>Gold-R</td><td class="rate-col">6.0 %</td></tr>
Â  Â  Â  Â  Â  Â  <tr><td class="rare-item">Espoir</td><td class="rate-col rare-item">4.0 %</td></tr>
Â  Â  Â  Â  Â  Â  <tr><td class="rare-item">Icone</td><td class="rate-col rare-item">3.0 %</td></tr>
Â  Â  Â  Â  Â  Â  <tr><td class="rare-item">Future-star</td><td class="rate-col rare-item">2.0 %</td></tr>
Â  Â  Â  Â  Â  Â  <tr><td class="legendary-item">Hist.Maker</td><td class="rate-col legendary-item">1.5 %</td></tr>
Â  Â  Â  Â  Â  Â  <tr><td class="legendary-item">God</td><td class="rate-col legendary-item">1.0 %</td></tr>
Â  Â  Â  Â  Â  Â  <tr><td class="exclusive-item">Createur</td><td class="rate-col exclusive-item">0.5 %</td></tr>
            <tr><td class="PikaPika">PikaPika</td><td class="rate-col exclusive-item-super">0.0013 %</td></tr>
            <tr><td class="BouBou">BouBou</td><td class="rate-col exclusive-item-super">0.00019 %</td></tr>
Â  Â  Â  Â  </tbody>
Â  Â  </table>
<p>Ton solde : <span id="booster-balance">0.00 â‚¬</span></p>

<div style="margin-top: 20px;">
Â  Â  Â  Â  <button id="free-booster-btn" class="action-btn" disabled>Booster Gratuit (Chargement...)</button>
Â  Â  Â  Â  <button id="booster-20-btn" class="action-btn">Booster Classique (35 â‚¬)</button>
Â  Â  Â  Â  <button id="booster-50-btn" class="action-btn">Mega Booster (70 â‚¬)</button>
Â  Â  </div>
Â  Â  <div id="booster-msg" style="margin-top: 15px; font-weight: bold; color: green;"></div>
Â  Â Â 
Â  Â  <div id="booster-reveal" style="text-align: center; margin-top: 30px; display: none;">
Â  Â  Â  Â  <h3>Carte RÃ©vÃ©lÃ©e</h3>
Â  Â  Â  Â  <img id="booster-current-card" src="./images/back.png" alt="Carte Ã  rÃ©vÃ©ler" style="width: 150px; height: auto; transition: transform 0.5s, opacity 0.5s;">
Â  Â  Â  Â  <button id="next-card-btn" class="action-btn" style="display: block; margin: 10px auto;">Carte suivante</button>
Â  Â  </div>

Â  Â  <h3 style="margin-top: 30px;">Cartes Obtenues dans ce Booster</h3>
Â  Â  <div id="booster-cards-container" class="babydex-grid">
Â  Â  Â  Â  </div>
</section>

  <section id="Baby-Dex" style="display:none;">
    <h2>ğŸ“˜ BabyDex â€” EncyclopÃ©die des cartes</h2>
    <p>DÃ©couvre toutes les cartes existantes et vois lesquelles tu possÃ¨des !</p>
    <div id="baby-cards-container" class="babydex-grid"></div>
  </section>

  <section id="profile" style="display:none;">
    <h2>ğŸ‘¤ Mon Profil</h2>
    <div id="profile-content">
        <p id="user-info">Utilisateur : Aucun</p>
        <div id="bonusTimer" style="font-weight: bold; margin-top: 10px; color: #00ff88;"></div>

        <nav class="profile-nav">
            <button onclick="showProfileSubSection('profile-stats-and-settings', this)" class="nav-btn active-profile-tab">âš™ï¸ Compte & Stats</button>
            <button onclick="showProfileSubSection('profile-friends-section', this)" class="nav-btn">ğŸ¤ Amis</button>
            <button onclick="showProfileSubSection('profile-trade-section', this)" class="nav-btn">ğŸ›’ Ã‰changes</button>
            <button class="sub-tab-button" onclick="showProfileSubSection('profile-taxes-section', this)">Taxe</button>
        </nav>
        
        <hr>

        <div id="profile-stats-and-settings" class="profile-sub-section" style="display:block;">
            
            <h3>ğŸ† Statistiques de Jeu</h3>
            <div class="stats-card">
                <h3>Statistiques de Matchs</h3>
                <p>Victoires: <span id="stats-wins">0</span></p>
                <p>DÃ©faites: <span id="stats-losses">0</span></p>
                <p>Ratio V/D: <span id="stats-ratio">0%</span></p>
            </div>

            <div class="stats-card">
                <h3>Ã‰conomie</h3>
                <div id="profile-balance" class="user-stats">Solde actuel : -- â‚¬</div>
                <p>Gains totaux (paris): <span id="stats-bet-earnings">0.00 â‚¬</span></p>
            </div>

            <hr>

            <h3>âš™ï¸ Gestion du Compte</h3>
            
            <h4>Changer de Pseudo</h4>
            <form id="change-pseudo-form">
                <input type="text" id="new-pseudo" placeholder="Nouveau Pseudo" required>
                <button type="submit" class="action-btn">Mettre Ã  jour le Pseudo</button>
                <p id="pseudo-message" style="margin-top: 5px;"></p>
            </form>
            <button id="logout-btn" class="nav-btn" onclick="logoutUser()" style="background-color: #f44336; color: white; border: 1px solid #d32f2f;">Se dÃ©connecter</button>
        </div>

        <div id="profile-friends-section" class="profile-sub-section" style="display:none;">
            <h3>ğŸ¤ Gestion des Amis</h3>
            
            <h4>Ajouter un Ami</h4>
            <form id="add-friend-form">
                <input type="text" id="friend-username" placeholder="Pseudo de l'ami Ã  ajouter" required>
                <button type="submit" class="action-btn">Envoyer Demande</button>
                <p id="friend-request-message" style="margin-top: 5px;"></p>
            </form>

            <hr>

            <h4>Demandes ReÃ§ues </h4>
            <ul id="friend-requests-list" style="list-style-type: none; padding: 0;">
            </ul>
            
            <hr>

            <h4>Mes Amis (<span id="friend-count">0</span>)</h4>
            <ul id="friend-list" style="list-style-type: none; padding: 0;">
            </ul>
        </div>

        <div id="profile-trade-section" class="profile-sub-section" style="display:none;">
    <h3>ğŸ›’ SystÃ¨me d'Ã‰change</h3>
    
    <button id="start-new-trade-btn" class="action-btn">DÃ©marrer un Nouvel Ã‰change</button>
    <div id="trade-message" style="margin-top: 10px; font-weight: bold;"></div>

    <div id="trade-initiation-form-container" style="display:none; border: 1px solid #ddd; padding: 15px; border-radius: 8px; margin-top: 20px;">
        <h4>Proposer un Ã‰change</h4>
        <form id="initiate-trade-form">
            <label for="trade-friend-select" style="font-weight: bold;">Ã‰changer avec :</label>
            <select id="trade-friend-select" required style="width: 100%; padding: 8px; margin-bottom: 15px;"></select>

            <div id="card-selection-area" style="margin-top: 20px;">
                <p>SÃ©lectionnez les cartes Ã  offrir (cliquez sur vos cartes ci-dessous), puis sÃ©lectionnez les cartes Ã  demander (cliquez sur les cartes de l'ami).</p>
                
                <h5>Vos cartes Ã  offrir :</h5>
                <div id="user-cards-to-offer" class="babydex-grid trade-card-list">
                    <p style="grid-column: 1 / -1;">Chargement de votre collection...</p>
                </div>

                <h5 style="margin-top: 20px;">Cartes demandÃ©es (de l'ami) :</h5>
                <div id="friend-cards-to-request" class="babydex-grid trade-card-list">
                    <p style="grid-column: 1 / -1;">SÃ©lectionnez un ami pour voir sa collection.</p>
                </div>
            </div>
            
            <button type="submit" class="action-btn" id="send-trade-btn" style="margin-top: 20px;">Envoyer la Proposition d'Ã‰change</button>
        </form>
    </div>

    <hr style="margin-top: 30px;">

    <h4>ğŸ“¥ Ã‰changes ReÃ§us</h4>
    <ul id="incoming-trades-list" style="list-style-type: none; padding: 0;">
        <li>Aucun Ã©change en attente.</li>
    </ul>

    <h4>ğŸ“¤ Ã‰changes EnvoyÃ©s</h4>
    <ul id="outgoing-trades-list" style="list-style-type: none; padding: 0;">
        <li>Aucun Ã©change envoyÃ©.</li>
    </ul>
</div>

<div id="profile-taxes-section" class="profile-sub-section" style="display:none;">
    <h2>ğŸ’° Gestion des Taxes</h2>
    
    <p class="summary-stat">
        <strong>PÃ©riode de paiement :</strong> Du Vendredi 18h00 au Lundi 07h30.
        <br>
        <span id="tax-status-message" class="status-message">VÃ©rification du statut...</span>
    </p>

    <div class="card-list-container"> <h3>BarÃ¨me Progressif des Taxes</h3>
        <ul id="tax-brackets-list" class="report-list">
            <li>Jusqu'Ã  99 â‚¬ : 10%</li>
            <li>De 100 â‚¬ Ã  999 â‚¬ : 15%</li>
            <li>De 1000 â‚¬ Ã  1999 â‚¬ : 19%</li>
            <li>Au-delÃ  de 2000 â‚¬ : 23%</li>
        </ul>
    </div>

    <div class="stats-grid"> 
        <div class="stat-item">
            <span class="stat-label">Solde Actuel</span>
            <strong id="current-fortune" class="stat-value">0.00 â‚¬</strong>
        </div>
        <div class="stat-item">
            <span class="stat-label">Taux AppliquÃ©</span>
            <strong id="current-tax-rate" class="stat-value">0 %</strong>
        </div>
        <div class="stat-item large">
            <span class="stat-label">Montant Ã  Payer</span>
            <strong id="tax-due-amount" class="stat-value tax-value-highlight">0.00 â‚¬</strong>
        </div>
    </div>

    <button id="pay-tax-btn" class="action-button primary-btn" disabled>
        Payer la Taxe
    </button>
    <p id="tax-block-message" style="color: red; margin-top: 10px; font-weight: bold;"></p>
</div>
</section>



<section id="achievements-section" style="display:none;" class="main-section">
    <h2>ğŸ† SuccÃ¨s DÃ©bloquÃ©s</h2>
    <div id="achievements-list">
        </div>
    <button class="nav-button" onclick="window.showSection('profile-section')">Retour au Profil</button>
</section>

<section id="tradeDetailsModal" class="modal" style="display:none; background-color: rgba(0, 0, 0, 0.7);">
    <div class="modal-content" style="background: white; padding: 20px; border-radius: 10px; max-width: 600px; margin: 50px auto; color: #333; box-shadow: 0 0 20px rgba(0,0,0,0.5);">
        <span class="close" onclick="document.getElementById('tradeDetailsModal').style.display='none'" style="cursor: pointer; position: absolute; top: 10px; right: 25px; font-size: 35px; font-weight: bold;">&times;</span>
        
        <div id="tradeDetailsContent">
            Chargement des dÃ©tails...
        </div>
    </div>
</section>

<section id="update-banner" style="display: none; position: fixed; bottom: 0; left: 0; right: 0; background-color: #388e3c; color: white; padding: 10px; text-align: center; z-index: 1000;">
    <p style="margin: 0;">
        Une nouvelle version est disponible !
        <button id="update-button" style="margin-left: 15px; background-color: white; color: #388e3c; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-weight: bold;">
            Mettre Ã  jour maintenant
        </button>
    </p>
</section>

<section id="tournament" style="display:none;">
    <h2>ğŸ† Tournoi Hebdomadaire</h2>
    
    <div style="
        font-size: 0.9em; 
        text-align: center; 
        padding: 8px 0; 
        border-top: 1px solid #ccc; 
        border-bottom: 1px solid #ccc; 
        margin-bottom: 15px; 
        color: #555;
    ">
        RÃ¨gles : 7:30 (ou 10 points) | 
        Fin du temps : point en cours terminÃ© (but/sortie) | 
        Ã‰galitÃ© : Balle dÃ©cisive | 
        Format : Ã‰limination Directe | 
        PÃ©nalitÃ© si perte de temps volontaire
    </div>

    <p>Prochain Tournoi : **Jeudi** de **13:00 Ã  14:10**.</p>

    <h3>Inscription de l'Ã©quipe (2 joueurs)</h3>
    
<form id="tournament-registration-form" onsubmit="event.preventDefault(); window.registerTeam();">
    <input type="text" id="team-name" placeholder="Nom de l'Ã‰quipe (ex: Les Invincibles)" required>
    <input type="text" id="player1-pseudo" placeholder="Pseudo Joueur 1" required list="pseudo-suggestions">
    <input type="text" id="player2-pseudo" placeholder="Pseudo Joueur 2" required list="pseudo-suggestions">

    <datalist id="pseudo-suggestions"></datalist>
    <button type="submit" id="register-team-btn" class="action-btn" disabled>Chargement du statut... ğŸ”„</button>
    <button type="button" id="unregister-team-btn" class="action-btn" style="display:none;">Se DÃ©sinscrire</button>
</form>

<h3 style="margin-top: 30px;" id="teams-count">Ã‰quipes Inscrites : 0 / 8</h3>
<ul id="tournament-teams-list" style="list-style-type: none; padding-left: 0;">
</ul>

<button id="start-tournament-btn" class="action-btn" style="display:none; margin-top: 20px;">Cliquez pour Lancer le Tournoi Maintenant !</button>
<button id="next-round-btn" class="action-btn" style="display:none; margin-top: 10px;">Passer au Tour Suivant</button>

<div id="tournament-admin-controls" style="display:none;">
    <button id="force-start-tournament-btn" class="action-btn" style="background-color: #6a6a6a; margin-top: 10px;">Forcer le DÃ©marrage (Admin)</button>
    <button id="reset-tournament-test-btn" class="action-btn" style="background-color: #f44336; margin-top: 10px;">RÃ©initialiser (Admin)</button>
</div>

<div id="tournament-bracket" style="margin-top: 30px;">
    <h3>Tableau du Tournoi</h3>
    <p id="bracket-status">Aucun tournoi en cours. Inscrivez votre Ã©quipe !</p>
    
    <div id="bracket-display"></div>
</div>

    <div id="record-match-form-container" style="margin-top: 30px; border: 1px solid #ddd; padding: 15px; border-radius: 8px; display:none;">
            <h3>Enregistrer un RÃ©sultat de Match</h3>
            <form id="record-match-form">
                
                <input type="hidden" id="record-match-id"> 
                <input type="hidden" id="record-round-num"> 
                
                <p>Match : <strong id="current-match-teams"></strong></p> <label for="record-winner-name">Gagnant :</label>
                <select id="record-winner-name" required style="width: 100%; padding: 8px; margin-bottom: 15px;"></select>

                <label for="record-score1">Score du Gagnant (selon la sÃ©lection) :</label>
                <input type="number" id="record-score1" style="width: 100%; padding: 8px; margin-bottom: 15px;">

                <label for="record-score2">Score du Perdant :</label>
                <input type="number" id="record-score2" style="width: 100%; padding: 8px; margin-bottom: 15px;">
                
                <div id="record-message" style="margin-top: 10px; font-weight: bold;"></div>
                
                <button type="submit" class="action-btn">Valider le RÃ©sultat</button>
                <button type="button" id="cancel-record-btn" class="secondary-btn">Annuler</button>
            </form>
        
</button>


</section>

  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script> 
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-analytics.js"></script> <!-- âœ… Le lien essentiel pour l'objet firebase.analytics -->
  
  

  <script>
    // Nouvelle fonction pour gÃ©rer les sous-sections du Profil
    window.showProfileSubSection = (sectionId, button) => {
    // Masquer toutes les sous-sections
    document.querySelectorAll('.profile-sub-section').forEach(section => {
        section.style.display = 'none';
    });
    
    // Afficher la section cible
    const targetSection = document.getElementById(sectionId);
    if (targetSection) {
        targetSection.style.display = 'block';
    }

    // GÃ©rer les styles des boutons pour indiquer l'onglet actif
    document.querySelectorAll('.profile-nav .nav-btn').forEach(btn => {
        btn.classList.remove('active-profile-tab');
    });
    if (button) {
        button.classList.add('active-profile-tab');
    }
    
    // ======================================
    // âš¡ï¸ LOGIQUE DE CHARGEMENT DES DONNÃ‰ES
    // ======================================

    // 1. Charger les Demandes d'Amis et la Liste d'Amis
    if (sectionId === 'profile-friends-section') {
        // Ces fonctions doivent Ãªtre dÃ©finies ailleurs dans votre app.js
        if (typeof loadFriendRequests === 'function') loadFriendRequests(); 
        if (typeof loadFriendsList === 'function') loadFriendsList(); 
    } 
    // 2. Charger les Ã‰changes Actifs
    else if (sectionId === 'profile-trade-section') {
        // La fonction qui charge les amis, les collections et les Ã©changes actifs
        if (typeof loadTradeData === 'function') loadTradeData();
    }
    // 3. Charger les Statistiques
    else if (sectionId === 'profile-stats-and-settings') {
        // L'appel Ã  loadProfileData() a Ã©tÃ© retirÃ© ici.
        // Le listener en temps rÃ©el dans loginSuccess se charge dÃ©jÃ  de mettre Ã  jour les stats.
    }
    // 4. Charger le Panneau des Taxes (NOUVEL AJOUT)
    else if (sectionId === 'profile-taxes-section') { 
        if (typeof loadTaxesPanel === 'function') loadTaxesPanel();
    }
};

    
    // Assurer que showSection est dÃ©finie globalement pour les appels onclick dans le HTML
    window.showSection = (sectionId) => {
        // La logique d'application normale masque toutes les sections
        document.querySelectorAll('section').forEach(section => {
            section.style.display = 'none';
        });
        const targetSection = document.getElementById(sectionId);
        if (targetSection) {
            targetSection.style.display = 'block';
        }
    };
    
    // showAdminSubPanel est nÃ©cessaire pour la navigation interne de l'Admin
    window.showAdminSubPanel = (panelId) => {
    document.querySelectorAll('.admin-sub-panel').forEach(panel => {
        panel.style.display = 'none';
    });
    const targetPanel = document.getElementById(panelId);
    if (targetPanel) {
        targetPanel.style.display = 'block';
         // DÃ©clenche le chargement des donnÃ©es
        if (panelId === 'reports') {
            if (typeof loadSuspiciousReports === 'function') loadSuspiciousReports();
        } else if (panelId === 'blockedUsersPanel') {
            if (typeof loadBlockedUsers === 'function') loadBlockedUsers();
        } 
        // NOUVEL AJOUT : Charger le panneau Admin des Taxes
        else if (panelId === 'taxes-admin-panel') { 
            if (typeof loadAdminTaxesPanel === 'function') loadAdminTaxesPanel();
        }
    }
};

// ... (window.showSection reste inchangÃ©e)
window.showSection = (sectionId) => {
    // La logique d'application normale masque toutes les sections
    document.querySelectorAll('section').forEach(section => {
        section.style.display = 'none';
    });
    const targetSection = document.getElementById(sectionId);
    if (targetSection) {
        targetSection.style.display = 'block';
    }
};

  </script>
<script src="firebase-config.js"></script>  
  <script src="cards.js"></script>  
  <script src="app.js"></script>
  <script src="tournament.js"></script>
  <script src="achievements.js"></script>
  <script src="pari.js"></script>        
  <script src="admin.js"></script>



  



</body>
</html>